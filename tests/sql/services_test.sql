--
-- PostgreSQL database dump
--

-- Dumped from database version 9.5.2
-- Dumped by pg_dump version 9.6.3

SET statement_timeout = 0;
SET lock_timeout = 0;
SET idle_in_transaction_session_timeout = 0;
SET client_encoding = 'UTF8';
SET standard_conforming_strings = on;
SET check_function_bodies = false;
SET client_min_messages = warning;
SET row_security = off;

--
-- Name: plpgsql; Type: EXTENSION; Schema: -; Owner: 
--

CREATE EXTENSION IF NOT EXISTS plpgsql WITH SCHEMA pg_catalog;


--
-- Name: EXTENSION plpgsql; Type: COMMENT; Schema: -; Owner: 
--

COMMENT ON EXTENSION plpgsql IS 'PL/pgSQL procedural language';


SET search_path = public, pg_catalog;

SET default_tablespace = '';

SET default_with_oids = false;

--
-- Name: services; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE services (
    id integer NOT NULL,
    uuid text,
    group_id integer,
    user_id integer,
    datacenter_id integer,
    name text,
    type text,
    version timestamp with time zone,
    status text,
    last_known_error text,
    options text,
    definition text,
    mapping text,
    sync boolean,
    sync_type text,
    sync_interval integer,
    created_at timestamp with time zone,
    updated_at timestamp with time zone,
    deleted_at timestamp with time zone
);


ALTER TABLE services OWNER TO postgres;

--
-- Name: services_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE services_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE services_id_seq OWNER TO postgres;

--
-- Name: services_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE services_id_seq OWNED BY services.id;


--
-- Name: services id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY services ALTER COLUMN id SET DEFAULT nextval('services_id_seq'::regclass);


--
-- Data for Name: services; Type: TABLE DATA; Schema: public; Owner: postgres
--

INSERT INTO services (id, uuid, group_id, user_id, datacenter_id, name, type, version, status, last_known_error, options, definition, mapping, sync, sync_type, sync_interval, created_at, updated_at, deleted_at) VALUES (1, '6f52fb16-41bc-4466-4d0e-5dba89003676', 3, 3, 1, 'aws1705913', 'aws-fake', '2017-07-21 18:54:10.589218+00', 'done', '', '', 'name: aws1705913
datacenter: fakeaws
vpcs:
- name: test-vpc
  subnet: 1.1.1.1/24
networks:
- name: web
  vpc: test-vpc
  public: true
  subnet: 10.1.0.0/24
instances:
- name: web
  type: e1.micro
  image: ami-6666f915
  network: web
  start_ip: 10.1.0.11
  count: 1
  key_pair: some-keypair
security_groups:
- name: web-sg-1
  vpc: test-vpc
  egress:
  - from_port: "80"
    ip: 10.1.1.11/32
    protocol: any
    to_port: "80"
  ingress:
  - from_port: "80"
    ip: 10.1.1.11/32
    protocol: any
    to_port: "80"
', '{"id":"6f52fb16-41bc-4466-4d0e-5dba89003676","action":"service.create","name":"aws1705913","options":null,"components":[{"_action":"none","_component":"credentials","_component_id":"credentials::aws","_provider":"aws-fake","_state":"waiting","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","name":"fakeaws","region":"fake"},{"_action":"create","_component":"vpc","_component_id":"vpc::test-vpc","_provider":"aws-fake","_state":"completed","auto_remove":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_region":"fake","datacenter_type":"aws-fake","name":"test-vpc","service":"6f52fb16-41bc-4466-4d0e-5dba89003676","subnet":"1.1.1.1/24","tags":{"Name":"test-vpc","ernest.service":"aws1705913"},"type":"vpc.create.aws-fake.done","vpc_aws_id":"fakeaws"},{"_action":"create","_component":"internet_gateway","_component_id":"internet_gateway::test-vpc","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway_aws_id":"foo","name":"test-vpc","service":"6f52fb16-41bc-4466-4d0e-5dba89003676","tags":{"Name":"test-vpc","ernest.service":"aws1705913"},"type":"internet_gateway.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"firewall","_component_id":"firewall::web-sg-1","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","name":"web-sg-1","rules":{"egress":[{"from_port":80,"ip":"10.1.1.11/32","protocol":"-1","to_port":80}],"ingress":[{"from_port":80,"ip":"10.1.1.11/32","protocol":"-1","to_port":80}]},"security_group_aws_id":"foo","service":"6f52fb16-41bc-4466-4d0e-5dba89003676","tags":{"Name":"web-sg-1","ernest.service":"aws1705913"},"type":"firewall.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"network","_component_id":"network::web","_provider":"aws-fake","_state":"completed","availability_zone":"","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway":"test-vpc","internet_gateway_aws_id":"foo","is_public":true,"name":"web","network_aws_id":"foo","range":"10.1.0.0/24","service":"6f52fb16-41bc-4466-4d0e-5dba89003676","tags":{"Name":"web","ernest.service":"aws1705913"},"type":"network.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"instance","_component_id":"instance::web-1","_provider":"aws-fake","_state":"completed","assign_elastic_ip":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","elastic_ip":"","iam_instance_profile":null,"iam_instance_profile_arn":null,"image":"ami-6666f915","instance_aws_id":"","instance_type":"e1.micro","ip":"10.1.0.11","key_pair":"some-keypair","name":"web-1","network_aws_id":"foo","network_is_public":false,"network_name":"web","public_ip":"","security_group_aws_ids":null,"security_groups":null,"service":"6f52fb16-41bc-4466-4d0e-5dba89003676","tags":{"Name":"web-1","ernest.instance_group":"web","ernest.service":"aws1705913"},"type":"instance.create.aws-fake.done","user_data":"","volumes":null}],"changes":[{"_action":"create","_component":"vpc","_component_id":"vpc::test-vpc","_provider":"aws-fake","_state":"completed","auto_remove":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_region":"fake","datacenter_type":"aws-fake","name":"test-vpc","service":"6f52fb16-41bc-4466-4d0e-5dba89003676","subnet":"1.1.1.1/24","tags":{"Name":"test-vpc","ernest.service":"aws1705913"},"type":"vpc.create.aws-fake.done","vpc_aws_id":"fakeaws"},{"_action":"create","_component":"internet_gateway","_component_id":"internet_gateway::test-vpc","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway_aws_id":"foo","name":"test-vpc","service":"6f52fb16-41bc-4466-4d0e-5dba89003676","tags":{"Name":"test-vpc","ernest.service":"aws1705913"},"type":"internet_gateway.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"network","_component_id":"network::web","_provider":"aws-fake","_state":"completed","availability_zone":"","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway":"test-vpc","internet_gateway_aws_id":"foo","is_public":true,"name":"web","network_aws_id":"foo","range":"10.1.0.0/24","service":"6f52fb16-41bc-4466-4d0e-5dba89003676","tags":{"Name":"web","ernest.service":"aws1705913"},"type":"network.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"instance","_component_id":"instance::web-1","_provider":"aws-fake","_state":"completed","assign_elastic_ip":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","elastic_ip":"","iam_instance_profile":null,"iam_instance_profile_arn":null,"image":"ami-6666f915","instance_aws_id":"","instance_type":"e1.micro","ip":"10.1.0.11","key_pair":"some-keypair","name":"web-1","network_aws_id":"foo","network_is_public":false,"network_name":"web","public_ip":"","security_group_aws_ids":null,"security_groups":null,"service":"6f52fb16-41bc-4466-4d0e-5dba89003676","tags":{"Name":"web-1","ernest.instance_group":"web","ernest.service":"aws1705913"},"type":"instance.create.aws-fake.done","user_data":"","volumes":null},{"_action":"create","_component":"firewall","_component_id":"firewall::web-sg-1","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","name":"web-sg-1","rules":{"egress":[{"from_port":80,"ip":"10.1.1.11/32","protocol":"-1","to_port":80}],"ingress":[{"from_port":80,"ip":"10.1.1.11/32","protocol":"-1","to_port":80}]},"security_group_aws_id":"foo","service":"6f52fb16-41bc-4466-4d0e-5dba89003676","tags":{"Name":"web-sg-1","ernest.service":"aws1705913"},"type":"firewall.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"}],"edges":[{"destination":"internet_gateway::test-vpc","length":1,"source":"vpc::test-vpc"},{"destination":"network::web","length":1,"source":"internet_gateway::test-vpc"},{"destination":"instance::web-1","length":1,"source":"network::web"},{"destination":"firewall::web-sg-1","length":1,"source":"vpc::test-vpc"},{"destination":"vpc::test-vpc","length":1,"source":"start"},{"destination":"end","length":1,"source":"instance::web-1"},{"destination":"end","length":1,"source":"firewall::web-sg-1"}]}', false, '', 0, '0001-01-01 00:00:00+00', '2017-07-21 18:54:10.6635+00', NULL);
INSERT INTO services (id, uuid, group_id, user_id, datacenter_id, name, type, version, status, last_known_error, options, definition, mapping, sync, sync_type, sync_interval, created_at, updated_at, deleted_at) VALUES (2, 'b5b2b130-d35e-4abf-78ca-41aecaba45f4', 3, 3, 1, 'aws1705913', 'aws-fake', '2017-07-21 18:54:11.691044+00', 'done', '', '', 'name: aws1705913
datacenter: fakeaws
vpcs:
- name: test-vpc
  subnet: 1.1.1.1/24
networks:
- name: web
  vpc: test-vpc
  subnet: 10.1.0.0/24
  public: true
- name: bknd
  vpc: test-vpc
  subnet: 10.2.0.0/24
instances:
- name: web
  type: e1.micro
  image: ami-6666f915
  network: web
  start_ip: 10.1.0.11
  count: 1
  key_pair: some-keypair
- name: bknd
  type: e1.micro
  image: ami-6666f915
  network: bknd
  start_ip: 10.2.0.11
  count: 1
  key_pair: some-keypair
security_groups:
- name: web-sg-1
  vpc: test-vpc
  egress:
  - from_port: "80"
    ip: 10.1.1.11/32
    protocol: any
    to_port: "80"
  ingress:
  - from_port: "80"
    ip: 10.1.1.11/32
    protocol: any
    to_port: "80"
', '{"id":"b5b2b130-d35e-4abf-78ca-41aecaba45f4","action":"service.create","name":"aws1705913","options":null,"components":[{"_action":"create","_component":"vpc","_component_id":"vpc::test-vpc","_provider":"aws-fake","_state":"completed","auto_remove":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_region":"fake","datacenter_type":"aws-fake","name":"test-vpc","service":"6f52fb16-41bc-4466-4d0e-5dba89003676","subnet":"1.1.1.1/24","tags":{"Name":"test-vpc","ernest.service":"aws1705913"},"vpc_aws_id":"fakeaws"},{"_action":"create","_component":"internet_gateway","_component_id":"internet_gateway::test-vpc","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway_aws_id":"foo","name":"test-vpc","service":"6f52fb16-41bc-4466-4d0e-5dba89003676","tags":{"Name":"test-vpc","ernest.service":"aws1705913"},"vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"firewall","_component_id":"firewall::web-sg-1","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","name":"web-sg-1","rules":{"egress":[{"from_port":80,"ip":"10.1.1.11/32","protocol":"-1","to_port":80}],"ingress":[{"from_port":80,"ip":"10.1.1.11/32","protocol":"-1","to_port":80}]},"security_group_aws_id":"foo","service":"6f52fb16-41bc-4466-4d0e-5dba89003676","tags":{"Name":"web-sg-1","ernest.service":"aws1705913"},"vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"network","_component_id":"network::web","_provider":"aws-fake","_state":"completed","availability_zone":"","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway":"test-vpc","internet_gateway_aws_id":"foo","is_public":true,"name":"web","network_aws_id":"foo","range":"10.1.0.0/24","service":"6f52fb16-41bc-4466-4d0e-5dba89003676","tags":{"Name":"web","ernest.service":"aws1705913"},"vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"instance","_component_id":"instance::web-1","_provider":"aws-fake","_state":"completed","assign_elastic_ip":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","elastic_ip":"","iam_instance_profile":null,"iam_instance_profile_arn":null,"image":"ami-6666f915","instance_aws_id":"","instance_type":"e1.micro","ip":"10.1.0.11","key_pair":"some-keypair","name":"web-1","network_aws_id":"foo","network_is_public":false,"network_name":"web","public_ip":"","security_group_aws_ids":null,"security_groups":null,"service":"6f52fb16-41bc-4466-4d0e-5dba89003676","tags":{"Name":"web-1","ernest.instance_group":"web","ernest.service":"aws1705913"},"user_data":"","volumes":null},{"_action":"none","_component":"credentials","_component_id":"credentials::aws","_provider":"aws-fake","_state":"waiting","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","name":"fakeaws","region":"fake"},{"_action":"create","_component":"network","_component_id":"network::bknd","_provider":"aws-fake","_state":"completed","availability_zone":"","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway":"test-vpc","internet_gateway_aws_id":"","is_public":false,"name":"bknd","network_aws_id":"foo","range":"10.2.0.0/24","service":"b5b2b130-d35e-4abf-78ca-41aecaba45f4","tags":{"Name":"bknd","ernest.service":"aws1705913"},"type":"network.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"instance","_component_id":"instance::bknd-1","_provider":"aws-fake","_state":"completed","assign_elastic_ip":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","elastic_ip":"","iam_instance_profile":null,"iam_instance_profile_arn":null,"image":"ami-6666f915","instance_aws_id":"","instance_type":"e1.micro","ip":"10.2.0.11","key_pair":"some-keypair","name":"bknd-1","network_aws_id":"foo","network_is_public":false,"network_name":"bknd","public_ip":"","security_group_aws_ids":null,"security_groups":null,"service":"b5b2b130-d35e-4abf-78ca-41aecaba45f4","tags":{"Name":"bknd-1","ernest.instance_group":"bknd","ernest.service":"aws1705913"},"type":"instance.create.aws-fake.done","user_data":"","volumes":null}],"changes":[{"_action":"create","_component":"network","_component_id":"network::bknd","_provider":"aws-fake","_state":"completed","availability_zone":"","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway":"test-vpc","internet_gateway_aws_id":"","is_public":false,"name":"bknd","network_aws_id":"foo","range":"10.2.0.0/24","service":"b5b2b130-d35e-4abf-78ca-41aecaba45f4","tags":{"Name":"bknd","ernest.service":"aws1705913"},"type":"network.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"instance","_component_id":"instance::bknd-1","_provider":"aws-fake","_state":"completed","assign_elastic_ip":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","elastic_ip":"","iam_instance_profile":null,"iam_instance_profile_arn":null,"image":"ami-6666f915","instance_aws_id":"","instance_type":"e1.micro","ip":"10.2.0.11","key_pair":"some-keypair","name":"bknd-1","network_aws_id":"foo","network_is_public":false,"network_name":"bknd","public_ip":"","security_group_aws_ids":null,"security_groups":null,"service":"b5b2b130-d35e-4abf-78ca-41aecaba45f4","tags":{"Name":"bknd-1","ernest.instance_group":"bknd","ernest.service":"aws1705913"},"type":"instance.create.aws-fake.done","user_data":"","volumes":null}],"edges":[{"destination":"instance::bknd-1","length":1,"source":"network::bknd"},{"destination":"network::bknd","length":1,"source":"start"},{"destination":"end","length":1,"source":"instance::bknd-1"}]}', false, '', 0, '0001-01-01 00:00:00+00', '2017-07-21 18:54:11.725876+00', NULL);
INSERT INTO services (id, uuid, group_id, user_id, datacenter_id, name, type, version, status, last_known_error, options, definition, mapping, sync, sync_type, sync_interval, created_at, updated_at, deleted_at) VALUES (3, '78b8d82e-6e59-4ed7-5528-35491ae43dfd', 3, 3, 1, 'aws8321536', 'aws-fake', '2017-07-21 18:54:17.842452+00', 'done', '', '', 'name: aws8321536
datacenter: fakeaws
vpcs:
- name: test-vpc
  subnet: 1.1.1.1/24
networks:
- name: web
  vpc: test-vpc
  public: true
  subnet: 10.1.0.0/24
instances:
- name: web
  type: e1.micro
  image: ami-6666f915
  network: web
  start_ip: 10.1.0.11
  count: 1
  key_pair: some-keypair
security_groups:
- name: web-sg-1
  vpc: test-vpc
  egress:
  - from_port: "80"
    ip: 10.1.1.11/32
    protocol: any
    to_port: "80"
  ingress:
  - from_port: "80"
    ip: 10.1.1.11/32
    protocol: any
    to_port: "80"
  - from_port: "22"
    ip: 10.1.1.11/32
    protocol: any
    to_port: "22"
', '{"id":"78b8d82e-6e59-4ed7-5528-35491ae43dfd","action":"service.create","name":"aws8321536","options":null,"components":[{"_action":"none","_component":"credentials","_component_id":"credentials::aws","_provider":"aws-fake","_state":"waiting","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","name":"fakeaws","region":"fake"},{"_action":"create","_component":"vpc","_component_id":"vpc::test-vpc","_provider":"aws-fake","_state":"completed","auto_remove":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_region":"fake","datacenter_type":"aws-fake","name":"test-vpc","service":"78b8d82e-6e59-4ed7-5528-35491ae43dfd","subnet":"1.1.1.1/24","tags":{"Name":"test-vpc","ernest.service":"aws8321536"},"type":"vpc.create.aws-fake.done","vpc_aws_id":"fakeaws"},{"_action":"create","_component":"internet_gateway","_component_id":"internet_gateway::test-vpc","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway_aws_id":"foo","name":"test-vpc","service":"78b8d82e-6e59-4ed7-5528-35491ae43dfd","tags":{"Name":"test-vpc","ernest.service":"aws8321536"},"type":"internet_gateway.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"firewall","_component_id":"firewall::web-sg-1","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","name":"web-sg-1","rules":{"egress":[{"from_port":80,"ip":"10.1.1.11/32","protocol":"-1","to_port":80}],"ingress":[{"from_port":80,"ip":"10.1.1.11/32","protocol":"-1","to_port":80},{"from_port":22,"ip":"10.1.1.11/32","protocol":"-1","to_port":22}]},"security_group_aws_id":"foo","service":"78b8d82e-6e59-4ed7-5528-35491ae43dfd","tags":{"Name":"web-sg-1","ernest.service":"aws8321536"},"type":"firewall.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"network","_component_id":"network::web","_provider":"aws-fake","_state":"completed","availability_zone":"","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway":"test-vpc","internet_gateway_aws_id":"foo","is_public":true,"name":"web","network_aws_id":"foo","range":"10.1.0.0/24","service":"78b8d82e-6e59-4ed7-5528-35491ae43dfd","tags":{"Name":"web","ernest.service":"aws8321536"},"type":"network.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"instance","_component_id":"instance::web-1","_provider":"aws-fake","_state":"completed","assign_elastic_ip":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","elastic_ip":"","iam_instance_profile":null,"iam_instance_profile_arn":null,"image":"ami-6666f915","instance_aws_id":"","instance_type":"e1.micro","ip":"10.1.0.11","key_pair":"some-keypair","name":"web-1","network_aws_id":"foo","network_is_public":false,"network_name":"web","public_ip":"","security_group_aws_ids":null,"security_groups":null,"service":"78b8d82e-6e59-4ed7-5528-35491ae43dfd","tags":{"Name":"web-1","ernest.instance_group":"web","ernest.service":"aws8321536"},"type":"instance.create.aws-fake.done","user_data":"","volumes":null}],"changes":[{"_action":"create","_component":"vpc","_component_id":"vpc::test-vpc","_provider":"aws-fake","_state":"completed","auto_remove":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_region":"fake","datacenter_type":"aws-fake","name":"test-vpc","service":"78b8d82e-6e59-4ed7-5528-35491ae43dfd","subnet":"1.1.1.1/24","tags":{"Name":"test-vpc","ernest.service":"aws8321536"},"type":"vpc.create.aws-fake.done","vpc_aws_id":"fakeaws"},{"_action":"create","_component":"internet_gateway","_component_id":"internet_gateway::test-vpc","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway_aws_id":"foo","name":"test-vpc","service":"78b8d82e-6e59-4ed7-5528-35491ae43dfd","tags":{"Name":"test-vpc","ernest.service":"aws8321536"},"type":"internet_gateway.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"network","_component_id":"network::web","_provider":"aws-fake","_state":"completed","availability_zone":"","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway":"test-vpc","internet_gateway_aws_id":"foo","is_public":true,"name":"web","network_aws_id":"foo","range":"10.1.0.0/24","service":"78b8d82e-6e59-4ed7-5528-35491ae43dfd","tags":{"Name":"web","ernest.service":"aws8321536"},"type":"network.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"instance","_component_id":"instance::web-1","_provider":"aws-fake","_state":"completed","assign_elastic_ip":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","elastic_ip":"","iam_instance_profile":null,"iam_instance_profile_arn":null,"image":"ami-6666f915","instance_aws_id":"","instance_type":"e1.micro","ip":"10.1.0.11","key_pair":"some-keypair","name":"web-1","network_aws_id":"foo","network_is_public":false,"network_name":"web","public_ip":"","security_group_aws_ids":null,"security_groups":null,"service":"78b8d82e-6e59-4ed7-5528-35491ae43dfd","tags":{"Name":"web-1","ernest.instance_group":"web","ernest.service":"aws8321536"},"type":"instance.create.aws-fake.done","user_data":"","volumes":null},{"_action":"create","_component":"firewall","_component_id":"firewall::web-sg-1","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","name":"web-sg-1","rules":{"egress":[{"from_port":80,"ip":"10.1.1.11/32","protocol":"-1","to_port":80}],"ingress":[{"from_port":80,"ip":"10.1.1.11/32","protocol":"-1","to_port":80},{"from_port":22,"ip":"10.1.1.11/32","protocol":"-1","to_port":22}]},"security_group_aws_id":"foo","service":"78b8d82e-6e59-4ed7-5528-35491ae43dfd","tags":{"Name":"web-sg-1","ernest.service":"aws8321536"},"type":"firewall.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"}],"edges":[{"destination":"internet_gateway::test-vpc","length":1,"source":"vpc::test-vpc"},{"destination":"network::web","length":1,"source":"internet_gateway::test-vpc"},{"destination":"instance::web-1","length":1,"source":"network::web"},{"destination":"firewall::web-sg-1","length":1,"source":"vpc::test-vpc"},{"destination":"vpc::test-vpc","length":1,"source":"start"},{"destination":"end","length":1,"source":"instance::web-1"},{"destination":"end","length":1,"source":"firewall::web-sg-1"}]}', false, '', 0, '0001-01-01 00:00:00+00', '2017-07-21 18:54:17.913585+00', NULL);
INSERT INTO services (id, uuid, group_id, user_id, datacenter_id, name, type, version, status, last_known_error, options, definition, mapping, sync, sync_type, sync_interval, created_at, updated_at, deleted_at) VALUES (4, '6f3b8845-9461-4c2f-4b2a-bd2d5a182bdc', 3, 3, 1, 'aws8321536', 'aws-fake', '2017-07-21 18:54:18.93946+00', 'done', '', '', 'name: aws8321536
datacenter: fakeaws
vpcs:
- name: test-vpc
  subnet: 1.1.1.1/24
networks:
- name: web
  vpc: test-vpc
  public: true
  subnet: 10.1.0.0/24
instances:
- name: web
  type: e1.micro
  image: ami-6666f915
  network: web
  start_ip: 10.1.0.11
  count: 1
  key_pair: some-keypair
security_groups:
- name: web-sg-1
  vpc: test-vpc
  egress:
  - from_port: "80"
    ip: 10.1.1.11/32
    protocol: any
    to_port: "80"
  - from_port: "22"
    ip: 10.1.1.11/32
    protocol: any
    to_port: "22"
  ingress:
  - from_port: "80"
    ip: 10.1.1.11/32
    protocol: any
    to_port: "80"
  - from_port: "22"
    ip: 10.1.1.11/32
    protocol: any
    to_port: "22"
', '{"id":"6f3b8845-9461-4c2f-4b2a-bd2d5a182bdc","action":"service.create","name":"aws8321536","options":null,"components":[{"_action":"create","_component":"vpc","_component_id":"vpc::test-vpc","_provider":"aws-fake","_state":"completed","auto_remove":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_region":"fake","datacenter_type":"aws-fake","name":"test-vpc","service":"78b8d82e-6e59-4ed7-5528-35491ae43dfd","subnet":"1.1.1.1/24","tags":{"Name":"test-vpc","ernest.service":"aws8321536"},"vpc_aws_id":"fakeaws"},{"_action":"create","_component":"internet_gateway","_component_id":"internet_gateway::test-vpc","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway_aws_id":"foo","name":"test-vpc","service":"78b8d82e-6e59-4ed7-5528-35491ae43dfd","tags":{"Name":"test-vpc","ernest.service":"aws8321536"},"vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"update","_component":"firewall","_component_id":"firewall::web-sg-1","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","name":"web-sg-1","rules":{"egress":[{"from_port":80,"ip":"10.1.1.11/32","protocol":"-1","to_port":80},{"from_port":22,"ip":"10.1.1.11/32","protocol":"-1","to_port":22}],"ingress":[{"from_port":80,"ip":"10.1.1.11/32","protocol":"-1","to_port":80},{"from_port":22,"ip":"10.1.1.11/32","protocol":"-1","to_port":22}]},"security_group_aws_id":"foo","service":"6f3b8845-9461-4c2f-4b2a-bd2d5a182bdc","tags":{"Name":"web-sg-1","ernest.service":"aws8321536"},"type":"firewall.update.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"network","_component_id":"network::web","_provider":"aws-fake","_state":"completed","availability_zone":"","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway":"test-vpc","internet_gateway_aws_id":"foo","is_public":true,"name":"web","network_aws_id":"foo","range":"10.1.0.0/24","service":"78b8d82e-6e59-4ed7-5528-35491ae43dfd","tags":{"Name":"web","ernest.service":"aws8321536"},"vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"instance","_component_id":"instance::web-1","_provider":"aws-fake","_state":"completed","assign_elastic_ip":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","elastic_ip":"","iam_instance_profile":null,"iam_instance_profile_arn":null,"image":"ami-6666f915","instance_aws_id":"","instance_type":"e1.micro","ip":"10.1.0.11","key_pair":"some-keypair","name":"web-1","network_aws_id":"foo","network_is_public":false,"network_name":"web","public_ip":"","security_group_aws_ids":null,"security_groups":null,"service":"78b8d82e-6e59-4ed7-5528-35491ae43dfd","tags":{"Name":"web-1","ernest.instance_group":"web","ernest.service":"aws8321536"},"user_data":"","volumes":null},{"_action":"none","_component":"credentials","_component_id":"credentials::aws","_provider":"aws-fake","_state":"waiting","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","name":"fakeaws","region":"fake"}],"changes":[{"_action":"update","_component":"firewall","_component_id":"firewall::web-sg-1","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","name":"web-sg-1","rules":{"egress":[{"from_port":80,"ip":"10.1.1.11/32","protocol":"-1","to_port":80},{"from_port":22,"ip":"10.1.1.11/32","protocol":"-1","to_port":22}],"ingress":[{"from_port":80,"ip":"10.1.1.11/32","protocol":"-1","to_port":80},{"from_port":22,"ip":"10.1.1.11/32","protocol":"-1","to_port":22}]},"security_group_aws_id":"foo","service":"6f3b8845-9461-4c2f-4b2a-bd2d5a182bdc","tags":{"Name":"web-sg-1","ernest.service":"aws8321536"},"type":"firewall.update.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"}],"edges":[{"destination":"firewall::web-sg-1","length":1,"source":"start"},{"destination":"end","length":1,"source":"firewall::web-sg-1"}]}', false, '', 0, '0001-01-01 00:00:00+00', '2017-07-21 18:54:18.960508+00', NULL);
INSERT INTO services (id, uuid, group_id, user_id, datacenter_id, name, type, version, status, last_known_error, options, definition, mapping, sync, sync_type, sync_interval, created_at, updated_at, deleted_at) VALUES (5, '03388ccf-bae8-4566-7061-03ff863b81f9', 3, 3, 1, 'aws6712793', 'aws-fake', '2017-07-21 18:54:25.057673+00', 'done', '', '', 'name: aws6712793
datacenter: fakeaws
vpcs:
- name: test-vpc
  subnet: 1.1.1.1/24
nat_gateways:
- name: db-nat
  public_network: web
networks:
- name: web
  vpc: test-vpc
  subnet: 10.1.0.0/24
  public: true
- name: db
  vpc: test-vpc
  subnet: 10.2.0.0/24
  public: false
  nat_gateway: db-nat
instances:
- name: web
  type: e1.micro
  image: ami-6666f915
  network: web
  start_ip: 10.1.0.11
  count: 1
  key_pair: some-keypair
security_groups:
- name: web-sg-1
  vpc: test-vpc
  egress:
  - from_port: "80"
    ip: 10.1.1.11/32
    protocol: any
    to_port: "80"
  ingress:
  - from_port: "80"
    ip: 10.1.1.11/32
    protocol: any
    to_port: "80"
', '{"id":"03388ccf-bae8-4566-7061-03ff863b81f9","action":"service.create","name":"aws6712793","options":null,"components":[{"_action":"none","_component":"credentials","_component_id":"credentials::aws","_provider":"aws-fake","_state":"waiting","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","name":"fakeaws","region":"fake"},{"_action":"create","_component":"vpc","_component_id":"vpc::test-vpc","_provider":"aws-fake","_state":"completed","auto_remove":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_region":"fake","datacenter_type":"aws-fake","name":"test-vpc","service":"03388ccf-bae8-4566-7061-03ff863b81f9","subnet":"1.1.1.1/24","tags":{"Name":"test-vpc","ernest.service":"aws6712793"},"type":"vpc.create.aws-fake.done","vpc_aws_id":"fakeaws"},{"_action":"create","_component":"internet_gateway","_component_id":"internet_gateway::test-vpc","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway_aws_id":"foo","name":"test-vpc","service":"03388ccf-bae8-4566-7061-03ff863b81f9","tags":{"Name":"test-vpc","ernest.service":"aws6712793"},"type":"internet_gateway.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"network","_component_id":"network::db","_provider":"aws-fake","_state":"completed","availability_zone":"","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway":"test-vpc","internet_gateway_aws_id":"","is_public":false,"name":"db","network_aws_id":"foo","range":"10.2.0.0/24","service":"03388ccf-bae8-4566-7061-03ff863b81f9","tags":{"Name":"db","ernest.nat_gateway":"db-nat","ernest.service":"aws6712793"},"type":"network.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"firewall","_component_id":"firewall::web-sg-1","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","name":"web-sg-1","rules":{"egress":[{"from_port":80,"ip":"10.1.1.11/32","protocol":"-1","to_port":80}],"ingress":[{"from_port":80,"ip":"10.1.1.11/32","protocol":"-1","to_port":80}]},"security_group_aws_id":"foo","service":"03388ccf-bae8-4566-7061-03ff863b81f9","tags":{"Name":"web-sg-1","ernest.service":"aws6712793"},"type":"firewall.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"network","_component_id":"network::web","_provider":"aws-fake","_state":"completed","availability_zone":"","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway":"test-vpc","internet_gateway_aws_id":"foo","is_public":true,"name":"web","network_aws_id":"foo","range":"10.1.0.0/24","service":"03388ccf-bae8-4566-7061-03ff863b81f9","tags":{"Name":"web","ernest.service":"aws6712793"},"type":"network.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"instance","_component_id":"instance::web-1","_provider":"aws-fake","_state":"completed","assign_elastic_ip":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","elastic_ip":"","iam_instance_profile":null,"iam_instance_profile_arn":null,"image":"ami-6666f915","instance_aws_id":"","instance_type":"e1.micro","ip":"10.1.0.11","key_pair":"some-keypair","name":"web-1","network_aws_id":"foo","network_is_public":false,"network_name":"web","public_ip":"","security_group_aws_ids":null,"security_groups":null,"service":"03388ccf-bae8-4566-7061-03ff863b81f9","tags":{"Name":"web-1","ernest.instance_group":"web","ernest.service":"aws6712793"},"type":"instance.create.aws-fake.done","user_data":"","volumes":null},{"_action":"create","_component":"nat","_component_id":"nat::db-nat","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway_id":"","name":"db-nat","nat_gateway_allocation_id":"","nat_gateway_allocation_ip":"","nat_gateway_aws_id":"","public_network":"web","public_network_aws_id":"foo","routed_networks":["db"],"routed_networks_aws_ids":["foo"],"service":"03388ccf-bae8-4566-7061-03ff863b81f9","tags":null,"type":"nat.create.aws-fake.done","vpc_id":"fakeaws"}],"changes":[{"_action":"create","_component":"vpc","_component_id":"vpc::test-vpc","_provider":"aws-fake","_state":"completed","auto_remove":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_region":"fake","datacenter_type":"aws-fake","name":"test-vpc","service":"03388ccf-bae8-4566-7061-03ff863b81f9","subnet":"1.1.1.1/24","tags":{"Name":"test-vpc","ernest.service":"aws6712793"},"type":"vpc.create.aws-fake.done","vpc_aws_id":"fakeaws"},{"_action":"create","_component":"internet_gateway","_component_id":"internet_gateway::test-vpc","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway_aws_id":"foo","name":"test-vpc","service":"03388ccf-bae8-4566-7061-03ff863b81f9","tags":{"Name":"test-vpc","ernest.service":"aws6712793"},"type":"internet_gateway.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"network","_component_id":"network::web","_provider":"aws-fake","_state":"completed","availability_zone":"","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway":"test-vpc","internet_gateway_aws_id":"foo","is_public":true,"name":"web","network_aws_id":"foo","range":"10.1.0.0/24","service":"03388ccf-bae8-4566-7061-03ff863b81f9","tags":{"Name":"web","ernest.service":"aws6712793"},"type":"network.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"network","_component_id":"network::db","_provider":"aws-fake","_state":"completed","availability_zone":"","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway":"test-vpc","internet_gateway_aws_id":"","is_public":false,"name":"db","network_aws_id":"foo","range":"10.2.0.0/24","service":"03388ccf-bae8-4566-7061-03ff863b81f9","tags":{"Name":"db","ernest.nat_gateway":"db-nat","ernest.service":"aws6712793"},"type":"network.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"instance","_component_id":"instance::web-1","_provider":"aws-fake","_state":"completed","assign_elastic_ip":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","elastic_ip":"","iam_instance_profile":null,"iam_instance_profile_arn":null,"image":"ami-6666f915","instance_aws_id":"","instance_type":"e1.micro","ip":"10.1.0.11","key_pair":"some-keypair","name":"web-1","network_aws_id":"foo","network_is_public":false,"network_name":"web","public_ip":"","security_group_aws_ids":null,"security_groups":null,"service":"03388ccf-bae8-4566-7061-03ff863b81f9","tags":{"Name":"web-1","ernest.instance_group":"web","ernest.service":"aws6712793"},"type":"instance.create.aws-fake.done","user_data":"","volumes":null},{"_action":"create","_component":"firewall","_component_id":"firewall::web-sg-1","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","name":"web-sg-1","rules":{"egress":[{"from_port":80,"ip":"10.1.1.11/32","protocol":"-1","to_port":80}],"ingress":[{"from_port":80,"ip":"10.1.1.11/32","protocol":"-1","to_port":80}]},"security_group_aws_id":"foo","service":"03388ccf-bae8-4566-7061-03ff863b81f9","tags":{"Name":"web-sg-1","ernest.service":"aws6712793"},"type":"firewall.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"nat","_component_id":"nat::db-nat","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway_id":"","name":"db-nat","nat_gateway_allocation_id":"","nat_gateway_allocation_ip":"","nat_gateway_aws_id":"","public_network":"web","public_network_aws_id":"foo","routed_networks":["db"],"routed_networks_aws_ids":["foo"],"service":"03388ccf-bae8-4566-7061-03ff863b81f9","tags":null,"type":"nat.create.aws-fake.done","vpc_id":"fakeaws"}],"edges":[{"destination":"internet_gateway::test-vpc","length":1,"source":"vpc::test-vpc"},{"destination":"network::web","length":1,"source":"internet_gateway::test-vpc"},{"destination":"network::db","length":1,"source":"vpc::test-vpc"},{"destination":"instance::web-1","length":1,"source":"network::web"},{"destination":"firewall::web-sg-1","length":1,"source":"vpc::test-vpc"},{"destination":"nat::db-nat","length":1,"source":"network::db"},{"destination":"nat::db-nat","length":1,"source":"network::web"},{"destination":"vpc::test-vpc","length":1,"source":"start"},{"destination":"end","length":1,"source":"instance::web-1"},{"destination":"end","length":1,"source":"firewall::web-sg-1"},{"destination":"end","length":1,"source":"nat::db-nat"}]}', false, '', 0, '0001-01-01 00:00:00+00', '2017-07-21 18:54:25.1566+00', NULL);
INSERT INTO services (id, uuid, group_id, user_id, datacenter_id, name, type, version, status, last_known_error, options, definition, mapping, sync, sync_type, sync_interval, created_at, updated_at, deleted_at) VALUES (6, '060b0391-1b08-4644-7703-82cf4c9741dd', 3, 3, 1, 'aws6712793', 'aws-fake', '2017-07-21 18:54:26.188965+00', 'done', '', '', 'name: aws6712793
datacenter: fakeaws
vpcs:
- name: test-vpc
  subnet: 1.1.1.1/24
nat_gateways:
- name: db-nat
  public_network: web
networks:
- name: web
  vpc: test-vpc
  subnet: 10.1.0.0/24
  public: true
- name: db
  vpc: test-vpc
  subnet: 10.2.0.0/24
  public: false
  nat_gateway: db-nat
instances:
- name: web
  type: e1.micro
  image: ami-6666f915
  network: web
  start_ip: 10.1.0.11
  count: 1
  key_pair: some-keypair
security_groups:
- name: web-sg-1
  vpc: test-vpc
  egress:
  - from_port: "80"
    ip: 10.1.1.11/32
    protocol: any
    to_port: "80"
  ingress:
  - from_port: "80"
    ip: 10.1.1.11/32
    protocol: any
    to_port: "80"
loadbalancers:
- name: elb-1
  private: true
  instances:
  - web
  listeners:
  - from_port: 80
    to_port: 80
    protocol: http
  security_groups:
  - web-sg-1
s3_buckets:
- name: bucket-1
  bucket_location: eu-west-1
  grantees:
  - id: foo@r3labs.io
    type: emailaddress
    permissions: full_control
', '{"id":"060b0391-1b08-4644-7703-82cf4c9741dd","action":"service.create","name":"aws6712793","options":null,"components":[{"_action":"create","_component":"vpc","_component_id":"vpc::test-vpc","_provider":"aws-fake","_state":"completed","auto_remove":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_region":"fake","datacenter_type":"aws-fake","name":"test-vpc","service":"03388ccf-bae8-4566-7061-03ff863b81f9","subnet":"1.1.1.1/24","tags":{"Name":"test-vpc","ernest.service":"aws6712793"},"vpc_aws_id":"fakeaws"},{"_action":"create","_component":"internet_gateway","_component_id":"internet_gateway::test-vpc","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway_aws_id":"foo","name":"test-vpc","service":"03388ccf-bae8-4566-7061-03ff863b81f9","tags":{"Name":"test-vpc","ernest.service":"aws6712793"},"vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"network","_component_id":"network::db","_provider":"aws-fake","_state":"completed","availability_zone":"","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway":"test-vpc","internet_gateway_aws_id":"","is_public":false,"name":"db","network_aws_id":"foo","range":"10.2.0.0/24","service":"03388ccf-bae8-4566-7061-03ff863b81f9","tags":{"Name":"db","ernest.nat_gateway":"db-nat","ernest.service":"aws6712793"},"vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"firewall","_component_id":"firewall::web-sg-1","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","name":"web-sg-1","rules":{"egress":[{"from_port":80,"ip":"10.1.1.11/32","protocol":"-1","to_port":80}],"ingress":[{"from_port":80,"ip":"10.1.1.11/32","protocol":"-1","to_port":80}]},"security_group_aws_id":"foo","service":"03388ccf-bae8-4566-7061-03ff863b81f9","tags":{"Name":"web-sg-1","ernest.service":"aws6712793"},"vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"network","_component_id":"network::web","_provider":"aws-fake","_state":"completed","availability_zone":"","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway":"test-vpc","internet_gateway_aws_id":"foo","is_public":true,"name":"web","network_aws_id":"foo","range":"10.1.0.0/24","service":"03388ccf-bae8-4566-7061-03ff863b81f9","tags":{"Name":"web","ernest.service":"aws6712793"},"vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"instance","_component_id":"instance::web-1","_provider":"aws-fake","_state":"completed","assign_elastic_ip":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","elastic_ip":"","iam_instance_profile":null,"iam_instance_profile_arn":null,"image":"ami-6666f915","instance_aws_id":"","instance_type":"e1.micro","ip":"10.1.0.11","key_pair":"some-keypair","name":"web-1","network_aws_id":"foo","network_is_public":false,"network_name":"web","public_ip":"","security_group_aws_ids":null,"security_groups":null,"service":"03388ccf-bae8-4566-7061-03ff863b81f9","tags":{"Name":"web-1","ernest.instance_group":"web","ernest.service":"aws6712793"},"user_data":"","volumes":null},{"_action":"create","_component":"nat","_component_id":"nat::db-nat","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway_id":"","name":"db-nat","nat_gateway_allocation_id":"","nat_gateway_allocation_ip":"","nat_gateway_aws_id":"","public_network":"web","public_network_aws_id":"foo","routed_networks":["db"],"routed_networks_aws_ids":["foo"],"service":"03388ccf-bae8-4566-7061-03ff863b81f9","tags":null,"vpc_id":"fakeaws"},{"_action":"none","_component":"credentials","_component_id":"credentials::aws","_provider":"aws-fake","_state":"waiting","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","name":"fakeaws","region":"fake"},{"_action":"create","_component":"elb","_component_id":"elb::elb-1","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","dns_name":"fake-dns-name","instance_aws_ids":["$(components.#[_component_id=\"instance::web-1\"].instance_aws_id)"],"instance_names":["web-1"],"instances":["web"],"is_private":true,"listeners":[{"from_port":80,"protocol":"HTTP","ssl_cert":"","to_port":80}],"name":"elb-1","network_aws_ids":null,"networks":null,"security_group_aws_ids":["foo"],"security_groups":["web-sg-1"],"service":"060b0391-1b08-4644-7703-82cf4c9741dd","tags":{"ernest.service":"aws6712793"},"type":"elb.create.aws-fake.done"},{"_action":"create","_component":"s3","_component_id":"s3::bucket-1","_provider":"aws-fake","_state":"completed","acl":"","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","bucket_location":"eu-west-1","bucket_uri":"","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","grantees":[{"id":"foo@r3labs.io","permissions":"FULL_CONTROL","type":"emailaddress"}],"name":"bucket-1","service":"060b0391-1b08-4644-7703-82cf4c9741dd","tags":{"ernest.service":"aws6712793"},"type":"s3.create.aws-fake.done"}],"changes":[{"_action":"create","_component":"elb","_component_id":"elb::elb-1","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","dns_name":"fake-dns-name","instance_aws_ids":["$(components.#[_component_id=\"instance::web-1\"].instance_aws_id)"],"instance_names":["web-1"],"instances":["web"],"is_private":true,"listeners":[{"from_port":80,"protocol":"HTTP","ssl_cert":"","to_port":80}],"name":"elb-1","network_aws_ids":null,"networks":null,"security_group_aws_ids":["foo"],"security_groups":["web-sg-1"],"service":"060b0391-1b08-4644-7703-82cf4c9741dd","tags":{"ernest.service":"aws6712793"},"type":"elb.create.aws-fake.done"},{"_action":"create","_component":"s3","_component_id":"s3::bucket-1","_provider":"aws-fake","_state":"completed","acl":"","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","bucket_location":"eu-west-1","bucket_uri":"","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","grantees":[{"id":"foo@r3labs.io","permissions":"FULL_CONTROL","type":"emailaddress"}],"name":"bucket-1","service":"060b0391-1b08-4644-7703-82cf4c9741dd","tags":{"ernest.service":"aws6712793"},"type":"s3.create.aws-fake.done"}],"edges":[{"destination":"elb::elb-1","length":1,"source":"start"},{"destination":"end","length":1,"source":"elb::elb-1"},{"destination":"s3::bucket-1","length":1,"source":"start"},{"destination":"end","length":1,"source":"s3::bucket-1"}]}', false, '', 0, '0001-01-01 00:00:00+00', '2017-07-21 18:54:26.231666+00', NULL);
INSERT INTO services (id, uuid, group_id, user_id, datacenter_id, name, type, version, status, last_known_error, options, definition, mapping, sync, sync_type, sync_interval, created_at, updated_at, deleted_at) VALUES (8, '4735d2e5-d79d-470b-4e83-5a2aae15bc6f', 3, 3, 1, 'aws241885', 'aws-fake', '2017-07-21 18:54:33.445286+00', 'done', '', '', 'name: aws241885
datacenter: fakeaws
vpcs:
- name: test-vpc
  subnet: 1.1.1.1/24
networks:
- name: web
  vpc: test-vpc
  public: true
  subnet: 10.1.0.0/24
instances:
- name: web
  type: e1.micro
  image: ami-6666f915
  network: web
  start_ip: 10.1.0.11
  count: 1
  key_pair: some-keypair
security_groups:
- name: web-sg-1
  vpc: test-vpc
  egress:
  - from_port: "80"
    ip: 10.1.1.11/32
    protocol: any
    to_port: "80"
  ingress:
  - from_port: "80"
    ip: 10.1.1.11/32
    protocol: any
    to_port: "80"
  - from_port: "22"
    ip: 10.1.1.11/32
    protocol: any
    to_port: "22"
', '{"id":"4735d2e5-d79d-470b-4e83-5a2aae15bc6f","action":"service.create","name":"aws241885","options":null,"components":[{"_action":"create","_component":"vpc","_component_id":"vpc::test-vpc","_provider":"aws-fake","_state":"completed","auto_remove":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_region":"fake","datacenter_type":"aws-fake","name":"test-vpc","service":"69f4c046-184c-49ee-52f2-6d22deb5ec6a","subnet":"1.1.1.1/24","tags":{"Name":"test-vpc","ernest.service":"aws241885"},"vpc_aws_id":"fakeaws"},{"_action":"create","_component":"internet_gateway","_component_id":"internet_gateway::test-vpc","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway_aws_id":"foo","name":"test-vpc","service":"69f4c046-184c-49ee-52f2-6d22deb5ec6a","tags":{"Name":"test-vpc","ernest.service":"aws241885"},"vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"update","_component":"firewall","_component_id":"firewall::web-sg-1","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","name":"web-sg-1","rules":{"egress":[{"from_port":80,"ip":"10.1.1.11/32","protocol":"-1","to_port":80}],"ingress":[{"from_port":80,"ip":"10.1.1.11/32","protocol":"-1","to_port":80},{"from_port":22,"ip":"10.1.1.11/32","protocol":"-1","to_port":22}]},"security_group_aws_id":"foo","service":"4735d2e5-d79d-470b-4e83-5a2aae15bc6f","tags":{"Name":"web-sg-1","ernest.service":"aws241885"},"type":"firewall.update.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"network","_component_id":"network::web","_provider":"aws-fake","_state":"completed","availability_zone":"","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway":"test-vpc","internet_gateway_aws_id":"foo","is_public":true,"name":"web","network_aws_id":"foo","range":"10.1.0.0/24","service":"69f4c046-184c-49ee-52f2-6d22deb5ec6a","tags":{"Name":"web","ernest.service":"aws241885"},"vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"instance","_component_id":"instance::web-1","_provider":"aws-fake","_state":"completed","assign_elastic_ip":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","elastic_ip":"","iam_instance_profile":null,"iam_instance_profile_arn":null,"image":"ami-6666f915","instance_aws_id":"","instance_type":"e1.micro","ip":"10.1.0.11","key_pair":"some-keypair","name":"web-1","network_aws_id":"foo","network_is_public":false,"network_name":"web","public_ip":"","security_group_aws_ids":null,"security_groups":null,"service":"69f4c046-184c-49ee-52f2-6d22deb5ec6a","tags":{"Name":"web-1","ernest.instance_group":"web","ernest.service":"aws241885"},"user_data":"","volumes":null},{"_action":"none","_component":"credentials","_component_id":"credentials::aws","_provider":"aws-fake","_state":"waiting","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","name":"fakeaws","region":"fake"}],"changes":[{"_action":"update","_component":"firewall","_component_id":"firewall::web-sg-1","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","name":"web-sg-1","rules":{"egress":[{"from_port":80,"ip":"10.1.1.11/32","protocol":"-1","to_port":80}],"ingress":[{"from_port":80,"ip":"10.1.1.11/32","protocol":"-1","to_port":80},{"from_port":22,"ip":"10.1.1.11/32","protocol":"-1","to_port":22}]},"security_group_aws_id":"foo","service":"4735d2e5-d79d-470b-4e83-5a2aae15bc6f","tags":{"Name":"web-sg-1","ernest.service":"aws241885"},"type":"firewall.update.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"}],"edges":[{"destination":"firewall::web-sg-1","length":1,"source":"start"},{"destination":"end","length":1,"source":"firewall::web-sg-1"}]}', false, '', 0, '0001-01-01 00:00:00+00', '2017-07-21 18:54:33.467397+00', NULL);
INSERT INTO services (id, uuid, group_id, user_id, datacenter_id, name, type, version, status, last_known_error, options, definition, mapping, sync, sync_type, sync_interval, created_at, updated_at, deleted_at) VALUES (7, '69f4c046-184c-49ee-52f2-6d22deb5ec6a', 3, 3, 1, 'aws241885', 'aws-fake', '2017-07-21 18:54:32.349759+00', 'done', '', '', 'name: aws241885
datacenter: fakeaws
vpcs:
- name: test-vpc
  subnet: 1.1.1.1/24
networks:
- name: web
  vpc: test-vpc
  public: true
  subnet: 10.1.0.0/24
instances:
- name: web
  type: e1.micro
  image: ami-6666f915
  network: web
  start_ip: 10.1.0.11
  count: 1
  key_pair: some-keypair
security_groups:
- name: web-sg-1
  vpc: test-vpc
  egress:
  - from_port: "80"
    ip: 10.1.1.11/32
    protocol: any
    to_port: "80"
  ingress:
  - from_port: "80"
    ip: 10.1.1.11/32
    protocol: any
    to_port: "80"
', '{"id":"69f4c046-184c-49ee-52f2-6d22deb5ec6a","action":"service.create","name":"aws241885","options":null,"components":[{"_action":"none","_component":"credentials","_component_id":"credentials::aws","_provider":"aws-fake","_state":"waiting","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","name":"fakeaws","region":"fake"},{"_action":"create","_component":"vpc","_component_id":"vpc::test-vpc","_provider":"aws-fake","_state":"completed","auto_remove":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_region":"fake","datacenter_type":"aws-fake","name":"test-vpc","service":"69f4c046-184c-49ee-52f2-6d22deb5ec6a","subnet":"1.1.1.1/24","tags":{"Name":"test-vpc","ernest.service":"aws241885"},"type":"vpc.create.aws-fake.done","vpc_aws_id":"fakeaws"},{"_action":"create","_component":"internet_gateway","_component_id":"internet_gateway::test-vpc","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway_aws_id":"foo","name":"test-vpc","service":"69f4c046-184c-49ee-52f2-6d22deb5ec6a","tags":{"Name":"test-vpc","ernest.service":"aws241885"},"type":"internet_gateway.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"firewall","_component_id":"firewall::web-sg-1","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","name":"web-sg-1","rules":{"egress":[{"from_port":80,"ip":"10.1.1.11/32","protocol":"-1","to_port":80}],"ingress":[{"from_port":80,"ip":"10.1.1.11/32","protocol":"-1","to_port":80}]},"security_group_aws_id":"foo","service":"69f4c046-184c-49ee-52f2-6d22deb5ec6a","tags":{"Name":"web-sg-1","ernest.service":"aws241885"},"type":"firewall.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"network","_component_id":"network::web","_provider":"aws-fake","_state":"completed","availability_zone":"","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway":"test-vpc","internet_gateway_aws_id":"foo","is_public":true,"name":"web","network_aws_id":"foo","range":"10.1.0.0/24","service":"69f4c046-184c-49ee-52f2-6d22deb5ec6a","tags":{"Name":"web","ernest.service":"aws241885"},"type":"network.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"instance","_component_id":"instance::web-1","_provider":"aws-fake","_state":"completed","assign_elastic_ip":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","elastic_ip":"","iam_instance_profile":null,"iam_instance_profile_arn":null,"image":"ami-6666f915","instance_aws_id":"","instance_type":"e1.micro","ip":"10.1.0.11","key_pair":"some-keypair","name":"web-1","network_aws_id":"foo","network_is_public":false,"network_name":"web","public_ip":"","security_group_aws_ids":null,"security_groups":null,"service":"69f4c046-184c-49ee-52f2-6d22deb5ec6a","tags":{"Name":"web-1","ernest.instance_group":"web","ernest.service":"aws241885"},"type":"instance.create.aws-fake.done","user_data":"","volumes":null}],"changes":[{"_action":"create","_component":"vpc","_component_id":"vpc::test-vpc","_provider":"aws-fake","_state":"completed","auto_remove":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_region":"fake","datacenter_type":"aws-fake","name":"test-vpc","service":"69f4c046-184c-49ee-52f2-6d22deb5ec6a","subnet":"1.1.1.1/24","tags":{"Name":"test-vpc","ernest.service":"aws241885"},"type":"vpc.create.aws-fake.done","vpc_aws_id":"fakeaws"},{"_action":"create","_component":"internet_gateway","_component_id":"internet_gateway::test-vpc","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway_aws_id":"foo","name":"test-vpc","service":"69f4c046-184c-49ee-52f2-6d22deb5ec6a","tags":{"Name":"test-vpc","ernest.service":"aws241885"},"type":"internet_gateway.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"network","_component_id":"network::web","_provider":"aws-fake","_state":"completed","availability_zone":"","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway":"test-vpc","internet_gateway_aws_id":"foo","is_public":true,"name":"web","network_aws_id":"foo","range":"10.1.0.0/24","service":"69f4c046-184c-49ee-52f2-6d22deb5ec6a","tags":{"Name":"web","ernest.service":"aws241885"},"type":"network.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"instance","_component_id":"instance::web-1","_provider":"aws-fake","_state":"completed","assign_elastic_ip":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","elastic_ip":"","iam_instance_profile":null,"iam_instance_profile_arn":null,"image":"ami-6666f915","instance_aws_id":"","instance_type":"e1.micro","ip":"10.1.0.11","key_pair":"some-keypair","name":"web-1","network_aws_id":"foo","network_is_public":false,"network_name":"web","public_ip":"","security_group_aws_ids":null,"security_groups":null,"service":"69f4c046-184c-49ee-52f2-6d22deb5ec6a","tags":{"Name":"web-1","ernest.instance_group":"web","ernest.service":"aws241885"},"type":"instance.create.aws-fake.done","user_data":"","volumes":null},{"_action":"create","_component":"firewall","_component_id":"firewall::web-sg-1","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","name":"web-sg-1","rules":{"egress":[{"from_port":80,"ip":"10.1.1.11/32","protocol":"-1","to_port":80}],"ingress":[{"from_port":80,"ip":"10.1.1.11/32","protocol":"-1","to_port":80}]},"security_group_aws_id":"foo","service":"69f4c046-184c-49ee-52f2-6d22deb5ec6a","tags":{"Name":"web-sg-1","ernest.service":"aws241885"},"type":"firewall.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"}],"edges":[{"destination":"internet_gateway::test-vpc","length":1,"source":"vpc::test-vpc"},{"destination":"network::web","length":1,"source":"internet_gateway::test-vpc"},{"destination":"instance::web-1","length":1,"source":"network::web"},{"destination":"firewall::web-sg-1","length":1,"source":"vpc::test-vpc"},{"destination":"vpc::test-vpc","length":1,"source":"start"},{"destination":"end","length":1,"source":"instance::web-1"},{"destination":"end","length":1,"source":"firewall::web-sg-1"}]}', false, '', 0, '0001-01-01 00:00:00+00', '2017-07-21 18:54:32.418059+00', NULL);
INSERT INTO services (id, uuid, group_id, user_id, datacenter_id, name, type, version, status, last_known_error, options, definition, mapping, sync, sync_type, sync_interval, created_at, updated_at, deleted_at) VALUES (9, '259fb788-4c86-41cb-4ff0-431e5eb20a99', 3, 3, 1, 'aws3118741', 'aws-fake', '2017-07-21 18:54:39.568355+00', 'done', '', '', 'name: aws3118741
datacenter: fakeaws
vpcs:
- name: test-vpc
  subnet: 1.1.1.1/24
networks:
- name: web
  vpc: test-vpc
  subnet: 10.1.0.0/24
  public: true
instances:
- name: web
  type: e1.micro
  image: ami-6666f915
  network: web
  start_ip: 10.1.0.11
  count: 1
  key_pair: some-keypair
security_groups:
- name: web-sg-1
  vpc: test-vpc
  egress:
  - from_port: "80"
    ip: 10.1.1.11/32
    protocol: any
    to_port: "80"
  ingress:
  - from_port: "80"
    ip: 10.1.1.11/32
    protocol: any
    to_port: "80"
', '{"id":"259fb788-4c86-41cb-4ff0-431e5eb20a99","action":"service.create","name":"aws3118741","options":null,"components":[{"_action":"none","_component":"credentials","_component_id":"credentials::aws","_provider":"aws-fake","_state":"waiting","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","name":"fakeaws","region":"fake"},{"_action":"create","_component":"vpc","_component_id":"vpc::test-vpc","_provider":"aws-fake","_state":"completed","auto_remove":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_region":"fake","datacenter_type":"aws-fake","name":"test-vpc","service":"259fb788-4c86-41cb-4ff0-431e5eb20a99","subnet":"1.1.1.1/24","tags":{"Name":"test-vpc","ernest.service":"aws3118741"},"type":"vpc.create.aws-fake.done","vpc_aws_id":"fakeaws"},{"_action":"create","_component":"internet_gateway","_component_id":"internet_gateway::test-vpc","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway_aws_id":"foo","name":"test-vpc","service":"259fb788-4c86-41cb-4ff0-431e5eb20a99","tags":{"Name":"test-vpc","ernest.service":"aws3118741"},"type":"internet_gateway.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"firewall","_component_id":"firewall::web-sg-1","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","name":"web-sg-1","rules":{"egress":[{"from_port":80,"ip":"10.1.1.11/32","protocol":"-1","to_port":80}],"ingress":[{"from_port":80,"ip":"10.1.1.11/32","protocol":"-1","to_port":80}]},"security_group_aws_id":"foo","service":"259fb788-4c86-41cb-4ff0-431e5eb20a99","tags":{"Name":"web-sg-1","ernest.service":"aws3118741"},"type":"firewall.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"network","_component_id":"network::web","_provider":"aws-fake","_state":"completed","availability_zone":"","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway":"test-vpc","internet_gateway_aws_id":"foo","is_public":true,"name":"web","network_aws_id":"foo","range":"10.1.0.0/24","service":"259fb788-4c86-41cb-4ff0-431e5eb20a99","tags":{"Name":"web","ernest.service":"aws3118741"},"type":"network.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"instance","_component_id":"instance::web-1","_provider":"aws-fake","_state":"completed","assign_elastic_ip":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","elastic_ip":"","iam_instance_profile":null,"iam_instance_profile_arn":null,"image":"ami-6666f915","instance_aws_id":"","instance_type":"e1.micro","ip":"10.1.0.11","key_pair":"some-keypair","name":"web-1","network_aws_id":"foo","network_is_public":false,"network_name":"web","public_ip":"","security_group_aws_ids":null,"security_groups":null,"service":"259fb788-4c86-41cb-4ff0-431e5eb20a99","tags":{"Name":"web-1","ernest.instance_group":"web","ernest.service":"aws3118741"},"type":"instance.create.aws-fake.done","user_data":"","volumes":null}],"changes":[{"_action":"create","_component":"vpc","_component_id":"vpc::test-vpc","_provider":"aws-fake","_state":"completed","auto_remove":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_region":"fake","datacenter_type":"aws-fake","name":"test-vpc","service":"259fb788-4c86-41cb-4ff0-431e5eb20a99","subnet":"1.1.1.1/24","tags":{"Name":"test-vpc","ernest.service":"aws3118741"},"type":"vpc.create.aws-fake.done","vpc_aws_id":"fakeaws"},{"_action":"create","_component":"internet_gateway","_component_id":"internet_gateway::test-vpc","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway_aws_id":"foo","name":"test-vpc","service":"259fb788-4c86-41cb-4ff0-431e5eb20a99","tags":{"Name":"test-vpc","ernest.service":"aws3118741"},"type":"internet_gateway.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"network","_component_id":"network::web","_provider":"aws-fake","_state":"completed","availability_zone":"","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway":"test-vpc","internet_gateway_aws_id":"foo","is_public":true,"name":"web","network_aws_id":"foo","range":"10.1.0.0/24","service":"259fb788-4c86-41cb-4ff0-431e5eb20a99","tags":{"Name":"web","ernest.service":"aws3118741"},"type":"network.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"instance","_component_id":"instance::web-1","_provider":"aws-fake","_state":"completed","assign_elastic_ip":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","elastic_ip":"","iam_instance_profile":null,"iam_instance_profile_arn":null,"image":"ami-6666f915","instance_aws_id":"","instance_type":"e1.micro","ip":"10.1.0.11","key_pair":"some-keypair","name":"web-1","network_aws_id":"foo","network_is_public":false,"network_name":"web","public_ip":"","security_group_aws_ids":null,"security_groups":null,"service":"259fb788-4c86-41cb-4ff0-431e5eb20a99","tags":{"Name":"web-1","ernest.instance_group":"web","ernest.service":"aws3118741"},"type":"instance.create.aws-fake.done","user_data":"","volumes":null},{"_action":"create","_component":"firewall","_component_id":"firewall::web-sg-1","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","name":"web-sg-1","rules":{"egress":[{"from_port":80,"ip":"10.1.1.11/32","protocol":"-1","to_port":80}],"ingress":[{"from_port":80,"ip":"10.1.1.11/32","protocol":"-1","to_port":80}]},"security_group_aws_id":"foo","service":"259fb788-4c86-41cb-4ff0-431e5eb20a99","tags":{"Name":"web-sg-1","ernest.service":"aws3118741"},"type":"firewall.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"}],"edges":[{"destination":"internet_gateway::test-vpc","length":1,"source":"vpc::test-vpc"},{"destination":"network::web","length":1,"source":"internet_gateway::test-vpc"},{"destination":"instance::web-1","length":1,"source":"network::web"},{"destination":"firewall::web-sg-1","length":1,"source":"vpc::test-vpc"},{"destination":"vpc::test-vpc","length":1,"source":"start"},{"destination":"end","length":1,"source":"instance::web-1"},{"destination":"end","length":1,"source":"firewall::web-sg-1"}]}', false, '', 0, '0001-01-01 00:00:00+00', '2017-07-21 18:54:39.636341+00', NULL);
INSERT INTO services (id, uuid, group_id, user_id, datacenter_id, name, type, version, status, last_known_error, options, definition, mapping, sync, sync_type, sync_interval, created_at, updated_at, deleted_at) VALUES (11, 'da6d4393-129b-4cb3-469e-f33d7e50f85b', 3, 3, 1, 'aws7777483', 'aws-fake', '2017-07-21 18:54:46.816349+00', 'done', '', '', 'name: aws7777483
datacenter: fakeaws
vpcs:
- name: test-vpc
  subnet: 1.1.1.1/24
networks:
- name: web
  vpc: test-vpc
  public: true
  subnet: 10.1.0.0/24
instances:
- name: web
  type: e1.micro
  image: ami-6666f915
  network: web
  start_ip: 10.1.0.11
  count: 1
  key_pair: some-keypair
security_groups:
- name: web-sg-1
  vpc: test-vpc
  egress:
  - from_port: "80"
    ip: 10.1.1.11/32
    protocol: any
    to_port: "80"
  ingress:
  - from_port: "80"
    ip: 10.1.1.11/32
    protocol: any
    to_port: "80"
', '{"id":"da6d4393-129b-4cb3-469e-f33d7e50f85b","action":"service.create","name":"aws7777483","options":null,"components":[{"_action":"none","_component":"credentials","_component_id":"credentials::aws","_provider":"aws-fake","_state":"waiting","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","name":"fakeaws","region":"fake"},{"_action":"create","_component":"vpc","_component_id":"vpc::test-vpc","_provider":"aws-fake","_state":"completed","auto_remove":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_region":"fake","datacenter_type":"aws-fake","name":"test-vpc","service":"da6d4393-129b-4cb3-469e-f33d7e50f85b","subnet":"1.1.1.1/24","tags":{"Name":"test-vpc","ernest.service":"aws7777483"},"type":"vpc.create.aws-fake.done","vpc_aws_id":"fakeaws"},{"_action":"create","_component":"internet_gateway","_component_id":"internet_gateway::test-vpc","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway_aws_id":"foo","name":"test-vpc","service":"da6d4393-129b-4cb3-469e-f33d7e50f85b","tags":{"Name":"test-vpc","ernest.service":"aws7777483"},"type":"internet_gateway.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"firewall","_component_id":"firewall::web-sg-1","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","name":"web-sg-1","rules":{"egress":[{"from_port":80,"ip":"10.1.1.11/32","protocol":"-1","to_port":80}],"ingress":[{"from_port":80,"ip":"10.1.1.11/32","protocol":"-1","to_port":80}]},"security_group_aws_id":"foo","service":"da6d4393-129b-4cb3-469e-f33d7e50f85b","tags":{"Name":"web-sg-1","ernest.service":"aws7777483"},"type":"firewall.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"network","_component_id":"network::web","_provider":"aws-fake","_state":"completed","availability_zone":"","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway":"test-vpc","internet_gateway_aws_id":"foo","is_public":true,"name":"web","network_aws_id":"foo","range":"10.1.0.0/24","service":"da6d4393-129b-4cb3-469e-f33d7e50f85b","tags":{"Name":"web","ernest.service":"aws7777483"},"type":"network.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"instance","_component_id":"instance::web-1","_provider":"aws-fake","_state":"completed","assign_elastic_ip":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","elastic_ip":"","iam_instance_profile":null,"iam_instance_profile_arn":null,"image":"ami-6666f915","instance_aws_id":"","instance_type":"e1.micro","ip":"10.1.0.11","key_pair":"some-keypair","name":"web-1","network_aws_id":"foo","network_is_public":false,"network_name":"web","public_ip":"","security_group_aws_ids":null,"security_groups":null,"service":"da6d4393-129b-4cb3-469e-f33d7e50f85b","tags":{"Name":"web-1","ernest.instance_group":"web","ernest.service":"aws7777483"},"type":"instance.create.aws-fake.done","user_data":"","volumes":null}],"changes":[{"_action":"create","_component":"vpc","_component_id":"vpc::test-vpc","_provider":"aws-fake","_state":"completed","auto_remove":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_region":"fake","datacenter_type":"aws-fake","name":"test-vpc","service":"da6d4393-129b-4cb3-469e-f33d7e50f85b","subnet":"1.1.1.1/24","tags":{"Name":"test-vpc","ernest.service":"aws7777483"},"type":"vpc.create.aws-fake.done","vpc_aws_id":"fakeaws"},{"_action":"create","_component":"internet_gateway","_component_id":"internet_gateway::test-vpc","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway_aws_id":"foo","name":"test-vpc","service":"da6d4393-129b-4cb3-469e-f33d7e50f85b","tags":{"Name":"test-vpc","ernest.service":"aws7777483"},"type":"internet_gateway.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"network","_component_id":"network::web","_provider":"aws-fake","_state":"completed","availability_zone":"","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway":"test-vpc","internet_gateway_aws_id":"foo","is_public":true,"name":"web","network_aws_id":"foo","range":"10.1.0.0/24","service":"da6d4393-129b-4cb3-469e-f33d7e50f85b","tags":{"Name":"web","ernest.service":"aws7777483"},"type":"network.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"instance","_component_id":"instance::web-1","_provider":"aws-fake","_state":"completed","assign_elastic_ip":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","elastic_ip":"","iam_instance_profile":null,"iam_instance_profile_arn":null,"image":"ami-6666f915","instance_aws_id":"","instance_type":"e1.micro","ip":"10.1.0.11","key_pair":"some-keypair","name":"web-1","network_aws_id":"foo","network_is_public":false,"network_name":"web","public_ip":"","security_group_aws_ids":null,"security_groups":null,"service":"da6d4393-129b-4cb3-469e-f33d7e50f85b","tags":{"Name":"web-1","ernest.instance_group":"web","ernest.service":"aws7777483"},"type":"instance.create.aws-fake.done","user_data":"","volumes":null},{"_action":"create","_component":"firewall","_component_id":"firewall::web-sg-1","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","name":"web-sg-1","rules":{"egress":[{"from_port":80,"ip":"10.1.1.11/32","protocol":"-1","to_port":80}],"ingress":[{"from_port":80,"ip":"10.1.1.11/32","protocol":"-1","to_port":80}]},"security_group_aws_id":"foo","service":"da6d4393-129b-4cb3-469e-f33d7e50f85b","tags":{"Name":"web-sg-1","ernest.service":"aws7777483"},"type":"firewall.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"}],"edges":[{"destination":"internet_gateway::test-vpc","length":1,"source":"vpc::test-vpc"},{"destination":"network::web","length":1,"source":"internet_gateway::test-vpc"},{"destination":"instance::web-1","length":1,"source":"network::web"},{"destination":"firewall::web-sg-1","length":1,"source":"vpc::test-vpc"},{"destination":"vpc::test-vpc","length":1,"source":"start"},{"destination":"end","length":1,"source":"instance::web-1"},{"destination":"end","length":1,"source":"firewall::web-sg-1"}]}', false, '', 0, '0001-01-01 00:00:00+00', '2017-07-21 18:54:46.885731+00', NULL);
INSERT INTO services (id, uuid, group_id, user_id, datacenter_id, name, type, version, status, last_known_error, options, definition, mapping, sync, sync_type, sync_interval, created_at, updated_at, deleted_at) VALUES (10, '58966112-f66f-46a5-6f6f-f74a0e135f06', 3, 3, 1, 'aws3118741', 'aws-fake', '2017-07-21 18:54:40.663903+00', 'done', '', '', 'name: aws3118741
datacenter: fakeaws
vpcs:
- name: test-vpc
  subnet: 1.1.1.1/24
nat_gateways:
- name: db-nat
  public_network: web
networks:
- name: web
  vpc: test-vpc
  subnet: 10.1.0.0/24
  public: true
- name: db
  vpc: test-vpc
  subnet: 10.2.0.0/24
  public: false
  nat_gateway: db-nat
instances:
- name: web
  type: e1.micro
  image: ami-6666f915
  network: web
  start_ip: 10.1.0.11
  count: 1
  key_pair: some-keypair
security_groups:
- name: web-sg-1
  vpc: test-vpc
  egress:
  - from_port: "80"
    ip: 10.1.1.11/32
    protocol: any
    to_port: "80"
  ingress:
  - from_port: "80"
    ip: 10.1.1.11/32
    protocol: any
    to_port: "80"
', '{"id":"58966112-f66f-46a5-6f6f-f74a0e135f06","action":"service.create","name":"aws3118741","options":null,"components":[{"_action":"create","_component":"vpc","_component_id":"vpc::test-vpc","_provider":"aws-fake","_state":"completed","auto_remove":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_region":"fake","datacenter_type":"aws-fake","name":"test-vpc","service":"259fb788-4c86-41cb-4ff0-431e5eb20a99","subnet":"1.1.1.1/24","tags":{"Name":"test-vpc","ernest.service":"aws3118741"},"vpc_aws_id":"fakeaws"},{"_action":"create","_component":"internet_gateway","_component_id":"internet_gateway::test-vpc","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway_aws_id":"foo","name":"test-vpc","service":"259fb788-4c86-41cb-4ff0-431e5eb20a99","tags":{"Name":"test-vpc","ernest.service":"aws3118741"},"vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"firewall","_component_id":"firewall::web-sg-1","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","name":"web-sg-1","rules":{"egress":[{"from_port":80,"ip":"10.1.1.11/32","protocol":"-1","to_port":80}],"ingress":[{"from_port":80,"ip":"10.1.1.11/32","protocol":"-1","to_port":80}]},"security_group_aws_id":"foo","service":"259fb788-4c86-41cb-4ff0-431e5eb20a99","tags":{"Name":"web-sg-1","ernest.service":"aws3118741"},"vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"network","_component_id":"network::web","_provider":"aws-fake","_state":"completed","availability_zone":"","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway":"test-vpc","internet_gateway_aws_id":"foo","is_public":true,"name":"web","network_aws_id":"foo","range":"10.1.0.0/24","service":"259fb788-4c86-41cb-4ff0-431e5eb20a99","tags":{"Name":"web","ernest.service":"aws3118741"},"vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"instance","_component_id":"instance::web-1","_provider":"aws-fake","_state":"completed","assign_elastic_ip":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","elastic_ip":"","iam_instance_profile":null,"iam_instance_profile_arn":null,"image":"ami-6666f915","instance_aws_id":"","instance_type":"e1.micro","ip":"10.1.0.11","key_pair":"some-keypair","name":"web-1","network_aws_id":"foo","network_is_public":false,"network_name":"web","public_ip":"","security_group_aws_ids":null,"security_groups":null,"service":"259fb788-4c86-41cb-4ff0-431e5eb20a99","tags":{"Name":"web-1","ernest.instance_group":"web","ernest.service":"aws3118741"},"user_data":"","volumes":null},{"_action":"none","_component":"credentials","_component_id":"credentials::aws","_provider":"aws-fake","_state":"waiting","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","name":"fakeaws","region":"fake"},{"_action":"create","_component":"network","_component_id":"network::db","_provider":"aws-fake","_state":"completed","availability_zone":"","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway":"test-vpc","internet_gateway_aws_id":"","is_public":false,"name":"db","network_aws_id":"foo","range":"10.2.0.0/24","service":"58966112-f66f-46a5-6f6f-f74a0e135f06","tags":{"Name":"db","ernest.nat_gateway":"db-nat","ernest.service":"aws3118741"},"type":"network.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"nat","_component_id":"nat::db-nat","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway_id":"","name":"db-nat","nat_gateway_allocation_id":"","nat_gateway_allocation_ip":"","nat_gateway_aws_id":"","public_network":"web","public_network_aws_id":"foo","routed_networks":["db"],"routed_networks_aws_ids":["foo"],"service":"58966112-f66f-46a5-6f6f-f74a0e135f06","tags":null,"type":"nat.create.aws-fake.done","vpc_id":"fakeaws"}],"changes":[{"_action":"create","_component":"network","_component_id":"network::db","_provider":"aws-fake","_state":"completed","availability_zone":"","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway":"test-vpc","internet_gateway_aws_id":"","is_public":false,"name":"db","network_aws_id":"foo","range":"10.2.0.0/24","service":"58966112-f66f-46a5-6f6f-f74a0e135f06","tags":{"Name":"db","ernest.nat_gateway":"db-nat","ernest.service":"aws3118741"},"type":"network.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"nat","_component_id":"nat::db-nat","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway_id":"","name":"db-nat","nat_gateway_allocation_id":"","nat_gateway_allocation_ip":"","nat_gateway_aws_id":"","public_network":"web","public_network_aws_id":"foo","routed_networks":["db"],"routed_networks_aws_ids":["foo"],"service":"58966112-f66f-46a5-6f6f-f74a0e135f06","tags":null,"type":"nat.create.aws-fake.done","vpc_id":"fakeaws"}],"edges":[{"destination":"nat::db-nat","length":1,"source":"network::db"},{"destination":"network::db","length":1,"source":"start"},{"destination":"end","length":1,"source":"nat::db-nat"}]}', false, '', 0, '0001-01-01 00:00:00+00', '2017-07-21 18:54:40.696894+00', NULL);
INSERT INTO services (id, uuid, group_id, user_id, datacenter_id, name, type, version, status, last_known_error, options, definition, mapping, sync, sync_type, sync_interval, created_at, updated_at, deleted_at) VALUES (12, '6d64bdd6-c3f7-4fa2-4ebc-8b459bb25b81', 3, 3, 1, 'aws7777483', 'aws-fake', '2017-07-21 18:54:47.912191+00', 'done', '', '', 'name: aws7777483
datacenter: fakeaws
vpcs:
- name: test-vpc
  subnet: 1.1.1.1/24
networks:
- name: web
  vpc: test-vpc
  subnet: 10.1.0.0/24
  public: true
- name: bknd
  vpc: test-vpc
  subnet: 10.2.0.0/24
instances:
- name: web
  type: e1.micro
  image: ami-6666f915
  network: web
  start_ip: 10.1.0.11
  count: 1
  key_pair: some-keypair
security_groups:
- name: web-sg-1
  vpc: test-vpc
  egress:
  - from_port: "80"
    ip: 10.1.1.11/32
    protocol: any
    to_port: "80"
  ingress:
  - from_port: "80"
    ip: 10.1.1.11/32
    protocol: any
    to_port: "80"
', '{"id":"6d64bdd6-c3f7-4fa2-4ebc-8b459bb25b81","action":"service.create","name":"aws7777483","options":null,"components":[{"_action":"create","_component":"vpc","_component_id":"vpc::test-vpc","_provider":"aws-fake","_state":"completed","auto_remove":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_region":"fake","datacenter_type":"aws-fake","name":"test-vpc","service":"da6d4393-129b-4cb3-469e-f33d7e50f85b","subnet":"1.1.1.1/24","tags":{"Name":"test-vpc","ernest.service":"aws7777483"},"vpc_aws_id":"fakeaws"},{"_action":"create","_component":"internet_gateway","_component_id":"internet_gateway::test-vpc","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway_aws_id":"foo","name":"test-vpc","service":"da6d4393-129b-4cb3-469e-f33d7e50f85b","tags":{"Name":"test-vpc","ernest.service":"aws7777483"},"vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"firewall","_component_id":"firewall::web-sg-1","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","name":"web-sg-1","rules":{"egress":[{"from_port":80,"ip":"10.1.1.11/32","protocol":"-1","to_port":80}],"ingress":[{"from_port":80,"ip":"10.1.1.11/32","protocol":"-1","to_port":80}]},"security_group_aws_id":"foo","service":"da6d4393-129b-4cb3-469e-f33d7e50f85b","tags":{"Name":"web-sg-1","ernest.service":"aws7777483"},"vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"network","_component_id":"network::web","_provider":"aws-fake","_state":"completed","availability_zone":"","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway":"test-vpc","internet_gateway_aws_id":"foo","is_public":true,"name":"web","network_aws_id":"foo","range":"10.1.0.0/24","service":"da6d4393-129b-4cb3-469e-f33d7e50f85b","tags":{"Name":"web","ernest.service":"aws7777483"},"vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"instance","_component_id":"instance::web-1","_provider":"aws-fake","_state":"completed","assign_elastic_ip":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","elastic_ip":"","iam_instance_profile":null,"iam_instance_profile_arn":null,"image":"ami-6666f915","instance_aws_id":"","instance_type":"e1.micro","ip":"10.1.0.11","key_pair":"some-keypair","name":"web-1","network_aws_id":"foo","network_is_public":false,"network_name":"web","public_ip":"","security_group_aws_ids":null,"security_groups":null,"service":"da6d4393-129b-4cb3-469e-f33d7e50f85b","tags":{"Name":"web-1","ernest.instance_group":"web","ernest.service":"aws7777483"},"user_data":"","volumes":null},{"_action":"none","_component":"credentials","_component_id":"credentials::aws","_provider":"aws-fake","_state":"waiting","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","name":"fakeaws","region":"fake"},{"_action":"create","_component":"network","_component_id":"network::bknd","_provider":"aws-fake","_state":"completed","availability_zone":"","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway":"test-vpc","internet_gateway_aws_id":"","is_public":false,"name":"bknd","network_aws_id":"foo","range":"10.2.0.0/24","service":"6d64bdd6-c3f7-4fa2-4ebc-8b459bb25b81","tags":{"Name":"bknd","ernest.service":"aws7777483"},"type":"network.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"}],"changes":[{"_action":"create","_component":"network","_component_id":"network::bknd","_provider":"aws-fake","_state":"completed","availability_zone":"","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway":"test-vpc","internet_gateway_aws_id":"","is_public":false,"name":"bknd","network_aws_id":"foo","range":"10.2.0.0/24","service":"6d64bdd6-c3f7-4fa2-4ebc-8b459bb25b81","tags":{"Name":"bknd","ernest.service":"aws7777483"},"type":"network.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"}],"edges":[{"destination":"network::bknd","length":1,"source":"start"},{"destination":"end","length":1,"source":"network::bknd"}]}', false, '', 0, '0001-01-01 00:00:00+00', '2017-07-21 18:54:47.935512+00', NULL);
INSERT INTO services (id, uuid, group_id, user_id, datacenter_id, name, type, version, status, last_known_error, options, definition, mapping, sync, sync_type, sync_interval, created_at, updated_at, deleted_at) VALUES (14, 'f5d101d8-0f0b-44d4-4c0c-8f0e69bb57f0', 3, 3, 1, 'aws335230', 'aws-fake', '2017-07-21 18:54:55.173802+00', 'done', '', '', 'name: aws335230
datacenter: fakeaws
vpcs:
- name: test-vpc
  subnet: 1.1.1.1/24
nat_gateways:
- name: db-nat
  public_network: web
networks:
- name: web
  vpc: test-vpc
  subnet: 10.1.0.0/24
  public: true
- name: db-a
  vpc: test-vpc
  subnet: 10.2.0.0/24
  public: false
  availability_zone: fake-1a
  nat_gateway: db-nat
- name: db-b
  vpc: test-vpc
  subnet: 10.3.0.0/24
  public: false
  availability_zone: fake-1b
  nat_gateway: db-nat
instances:
- name: web
  type: e1.micro
  image: ami-6666f915
  network: web
  start_ip: 10.1.0.11
  count: 1
  key_pair: some-keypair
security_groups:
- name: web-sg-1
  vpc: test-vpc
  egress:
  - from_port: "80"
    ip: 10.1.1.11/32
    protocol: any
    to_port: "80"
  ingress:
  - from_port: "80"
    ip: 10.1.1.11/32
    protocol: any
    to_port: "80"
rds_clusters:
- name: aurora
  engine: aurora
  port: 3306
  networks:
  - db-a
  - db-b
  security_groups:
  - web-sg-1
  backups:
    retention: 1
  database_name: test
  database_username: test
  database_password: testpass
', '{"id":"f5d101d8-0f0b-44d4-4c0c-8f0e69bb57f0","action":"service.create","name":"aws335230","options":null,"components":[{"_action":"create","_component":"vpc","_component_id":"vpc::test-vpc","_provider":"aws-fake","_state":"completed","auto_remove":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_region":"fake","datacenter_type":"aws-fake","name":"test-vpc","service":"52165155-2a84-4af1-782a-81404eece711","subnet":"1.1.1.1/24","tags":{"Name":"test-vpc","ernest.service":"aws335230"},"vpc_aws_id":"fakeaws"},{"_action":"create","_component":"internet_gateway","_component_id":"internet_gateway::test-vpc","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway_aws_id":"foo","name":"test-vpc","service":"52165155-2a84-4af1-782a-81404eece711","tags":{"Name":"test-vpc","ernest.service":"aws335230"},"vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"firewall","_component_id":"firewall::web-sg-1","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","name":"web-sg-1","rules":{"egress":[{"from_port":80,"ip":"10.1.1.11/32","protocol":"-1","to_port":80}],"ingress":[{"from_port":80,"ip":"10.1.1.11/32","protocol":"-1","to_port":80}]},"security_group_aws_id":"foo","service":"52165155-2a84-4af1-782a-81404eece711","tags":{"Name":"web-sg-1","ernest.service":"aws335230"},"vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"network","_component_id":"network::web","_provider":"aws-fake","_state":"completed","availability_zone":"","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway":"test-vpc","internet_gateway_aws_id":"foo","is_public":true,"name":"web","network_aws_id":"foo","range":"10.1.0.0/24","service":"52165155-2a84-4af1-782a-81404eece711","tags":{"Name":"web","ernest.service":"aws335230"},"vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"instance","_component_id":"instance::web-1","_provider":"aws-fake","_state":"completed","assign_elastic_ip":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","elastic_ip":"","iam_instance_profile":null,"iam_instance_profile_arn":null,"image":"ami-6666f915","instance_aws_id":"","instance_type":"e1.micro","ip":"10.1.0.11","key_pair":"some-keypair","name":"web-1","network_aws_id":"foo","network_is_public":false,"network_name":"web","public_ip":"","security_group_aws_ids":null,"security_groups":null,"service":"52165155-2a84-4af1-782a-81404eece711","tags":{"Name":"web-1","ernest.instance_group":"web","ernest.service":"aws335230"},"user_data":"","volumes":null},{"_action":"update","_component":"nat","_component_id":"nat::db-nat","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway_id":"","name":"db-nat","nat_gateway_allocation_id":"","nat_gateway_allocation_ip":"","nat_gateway_aws_id":"","public_network":"web","public_network_aws_id":"foo","routed_networks":["db-a","db-b"],"routed_networks_aws_ids":["foo","foo"],"service":"f5d101d8-0f0b-44d4-4c0c-8f0e69bb57f0","tags":null,"type":"nat.update.aws-fake.done","vpc_id":"fakeaws"},{"_action":"none","_component":"credentials","_component_id":"credentials::aws","_provider":"aws-fake","_state":"waiting","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","name":"fakeaws","region":"fake"},{"_action":"create","_component":"network","_component_id":"network::db-a","_provider":"aws-fake","_state":"completed","availability_zone":"fake-1a","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway":"test-vpc","internet_gateway_aws_id":"","is_public":false,"name":"db-a","network_aws_id":"foo","range":"10.2.0.0/24","service":"f5d101d8-0f0b-44d4-4c0c-8f0e69bb57f0","tags":{"Name":"db-a","ernest.nat_gateway":"db-nat","ernest.service":"aws335230"},"type":"network.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"network","_component_id":"network::db-b","_provider":"aws-fake","_state":"completed","availability_zone":"fake-1b","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway":"test-vpc","internet_gateway_aws_id":"","is_public":false,"name":"db-b","network_aws_id":"foo","range":"10.3.0.0/24","service":"f5d101d8-0f0b-44d4-4c0c-8f0e69bb57f0","tags":{"Name":"db-b","ernest.nat_gateway":"db-nat","ernest.service":"aws335230"},"type":"network.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"rds_cluster","_component_id":"rds_cluster::aurora","_provider":"aws-fake","_state":"completed","arn":"","availability_zones":null,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","backup_retention":1,"database_name":"test","database_password":"testpass","database_username":"test","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","endpoint":"rds-endpoint","engine":"aurora","final_snapshot":false,"name":"aurora","network_aws_ids":["foo","foo"],"networks":["db-a","db-b"],"port":3306,"security_group_aws_ids":["foo"],"security_groups":["web-sg-1"],"service":"f5d101d8-0f0b-44d4-4c0c-8f0e69bb57f0","tags":{"ernest.service":"aws335230"},"type":"rds_cluster.create.aws-fake.done"}],"changes":[{"_action":"create","_component":"network","_component_id":"network::db-a","_provider":"aws-fake","_state":"completed","availability_zone":"fake-1a","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway":"test-vpc","internet_gateway_aws_id":"","is_public":false,"name":"db-a","network_aws_id":"foo","range":"10.2.0.0/24","service":"f5d101d8-0f0b-44d4-4c0c-8f0e69bb57f0","tags":{"Name":"db-a","ernest.nat_gateway":"db-nat","ernest.service":"aws335230"},"type":"network.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"network","_component_id":"network::db-b","_provider":"aws-fake","_state":"completed","availability_zone":"fake-1b","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway":"test-vpc","internet_gateway_aws_id":"","is_public":false,"name":"db-b","network_aws_id":"foo","range":"10.3.0.0/24","service":"f5d101d8-0f0b-44d4-4c0c-8f0e69bb57f0","tags":{"Name":"db-b","ernest.nat_gateway":"db-nat","ernest.service":"aws335230"},"type":"network.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"update","_component":"nat","_component_id":"nat::db-nat","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway_id":"","name":"db-nat","nat_gateway_allocation_id":"","nat_gateway_allocation_ip":"","nat_gateway_aws_id":"","public_network":"web","public_network_aws_id":"foo","routed_networks":["db-a","db-b"],"routed_networks_aws_ids":["foo","foo"],"service":"f5d101d8-0f0b-44d4-4c0c-8f0e69bb57f0","tags":null,"type":"nat.update.aws-fake.done","vpc_id":"fakeaws"},{"_action":"create","_component":"rds_cluster","_component_id":"rds_cluster::aurora","_provider":"aws-fake","_state":"completed","arn":"","availability_zones":null,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","backup_retention":1,"database_name":"test","database_password":"testpass","database_username":"test","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","endpoint":"rds-endpoint","engine":"aurora","final_snapshot":false,"name":"aurora","network_aws_ids":["foo","foo"],"networks":["db-a","db-b"],"port":3306,"security_group_aws_ids":["foo"],"security_groups":["web-sg-1"],"service":"f5d101d8-0f0b-44d4-4c0c-8f0e69bb57f0","tags":{"ernest.service":"aws335230"},"type":"rds_cluster.create.aws-fake.done"},{"_action":"delete","_component":"network","_component_id":"network::db","_provider":"aws-fake","_state":"completed","availability_zone":"","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway":"test-vpc","internet_gateway_aws_id":"","is_public":false,"name":"db","network_aws_id":"foo","range":"10.2.0.0/24","service":"f5d101d8-0f0b-44d4-4c0c-8f0e69bb57f0","tags":{"Name":"db","ernest.nat_gateway":"db-nat","ernest.service":"aws335230"},"type":"network.delete.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"}],"edges":[{"destination":"nat::db-nat","length":1,"source":"network::db-a"},{"destination":"nat::db-nat","length":1,"source":"network::db-b"},{"destination":"nat::db-nat","length":1,"source":"start"},{"destination":"rds_cluster::aurora","length":1,"source":"network::db-a"},{"destination":"rds_cluster::aurora","length":1,"source":"network::db-b"},{"destination":"network::db-a","length":1,"source":"start"},{"destination":"network::db-b","length":1,"source":"start"},{"destination":"end","length":1,"source":"nat::db-nat"},{"destination":"end","length":1,"source":"rds_cluster::aurora"},{"destination":"network::db","length":1,"source":"start"},{"destination":"end","length":1,"source":"network::db"}]}', false, '', 0, '0001-01-01 00:00:00+00', '2017-07-21 18:54:55.261455+00', NULL);
INSERT INTO services (id, uuid, group_id, user_id, datacenter_id, name, type, version, status, last_known_error, options, definition, mapping, sync, sync_type, sync_interval, created_at, updated_at, deleted_at) VALUES (16, '7d30c6f2-eedc-4e5c-5ec6-76aabd57fdc7', 3, 3, 1, 'aws799446', 'aws-fake', '2017-07-21 18:55:02.529479+00', 'done', '', '', 'name: aws799446
datacenter: fakeaws
vpcs:
- name: test-vpc
  subnet: 1.1.1.1/24
nat_gateways:
- name: db-nat
  public_network: web
networks:
- name: web
  vpc: test-vpc
  subnet: 10.1.0.0/24
  public: true
- name: db-a
  vpc: test-vpc
  subnet: 10.2.0.0/24
  public: false
  availability_zone: fake-1a
  nat_gateway: db-nat
- name: db-b
  vpc: test-vpc
  subnet: 10.3.0.0/24
  public: false
  availability_zone: fake-1b
  nat_gateway: db-nat
instances:
- name: web
  type: e1.micro
  image: ami-6666f915
  network: web
  start_ip: 10.1.0.11
  count: 1
  key_pair: some-keypair
security_groups:
- name: web-sg-1
  vpc: test-vpc
  egress:
  - from_port: "80"
    ip: 10.1.1.11/32
    protocol: any
    to_port: "80"
  ingress:
  - from_port: "80"
    ip: 10.1.1.11/32
    protocol: any
    to_port: "80"
rds_clusters:
- name: aurora
  engine: aurora
  port: 3306
  networks:
  - db-a
  - db-b
  security_groups:
  - web-sg-1
  backups:
    retention: 1
  database_name: test
  database_username: test
  database_password: testpass-2
rds_instances:
- name: test-1
  cluster: aurora
  size: db.r3.large
', '{"id":"7d30c6f2-eedc-4e5c-5ec6-76aabd57fdc7","action":"service.create","name":"aws799446","options":null,"components":[{"_action":"create","_component":"vpc","_component_id":"vpc::test-vpc","_provider":"aws-fake","_state":"completed","auto_remove":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_region":"fake","datacenter_type":"aws-fake","name":"test-vpc","service":"5fbf5a6a-1881-47e1-7c0a-ef040967030c","subnet":"1.1.1.1/24","tags":{"Name":"test-vpc","ernest.service":"aws799446"},"vpc_aws_id":"fakeaws"},{"_action":"create","_component":"internet_gateway","_component_id":"internet_gateway::test-vpc","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway_aws_id":"foo","name":"test-vpc","service":"5fbf5a6a-1881-47e1-7c0a-ef040967030c","tags":{"Name":"test-vpc","ernest.service":"aws799446"},"vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"network","_component_id":"network::db-a","_provider":"aws-fake","_state":"completed","availability_zone":"fake-1a","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway":"test-vpc","internet_gateway_aws_id":"","is_public":false,"name":"db-a","network_aws_id":"foo","range":"10.2.0.0/24","service":"5fbf5a6a-1881-47e1-7c0a-ef040967030c","tags":{"Name":"db-a","ernest.nat_gateway":"db-nat","ernest.service":"aws799446"},"vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"network","_component_id":"network::db-b","_provider":"aws-fake","_state":"completed","availability_zone":"fake-1b","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway":"test-vpc","internet_gateway_aws_id":"","is_public":false,"name":"db-b","network_aws_id":"foo","range":"10.3.0.0/24","service":"5fbf5a6a-1881-47e1-7c0a-ef040967030c","tags":{"Name":"db-b","ernest.nat_gateway":"db-nat","ernest.service":"aws799446"},"vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"firewall","_component_id":"firewall::web-sg-1","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","name":"web-sg-1","rules":{"egress":[{"from_port":80,"ip":"10.1.1.11/32","protocol":"-1","to_port":80}],"ingress":[{"from_port":80,"ip":"10.1.1.11/32","protocol":"-1","to_port":80}]},"security_group_aws_id":"foo","service":"5fbf5a6a-1881-47e1-7c0a-ef040967030c","tags":{"Name":"web-sg-1","ernest.service":"aws799446"},"vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"network","_component_id":"network::web","_provider":"aws-fake","_state":"completed","availability_zone":"","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway":"test-vpc","internet_gateway_aws_id":"foo","is_public":true,"name":"web","network_aws_id":"foo","range":"10.1.0.0/24","service":"5fbf5a6a-1881-47e1-7c0a-ef040967030c","tags":{"Name":"web","ernest.service":"aws799446"},"vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"rds_cluster","_component_id":"rds_cluster::aurora","_provider":"aws-fake","_state":"completed","arn":"","availability_zones":null,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","backup_retention":1,"database_name":"test","database_password":"testpass-2","database_username":"test","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","endpoint":"rds-endpoint","engine":"aurora","final_snapshot":false,"name":"aurora","network_aws_ids":["foo","foo"],"networks":["db-a","db-b"],"port":3306,"security_group_aws_ids":["foo"],"security_groups":["web-sg-1"],"service":"5fbf5a6a-1881-47e1-7c0a-ef040967030c","tags":{"ernest.service":"aws799446"}},{"_action":"create","_component":"instance","_component_id":"instance::web-1","_provider":"aws-fake","_state":"completed","assign_elastic_ip":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","elastic_ip":"","iam_instance_profile":null,"iam_instance_profile_arn":null,"image":"ami-6666f915","instance_aws_id":"","instance_type":"e1.micro","ip":"10.1.0.11","key_pair":"some-keypair","name":"web-1","network_aws_id":"foo","network_is_public":false,"network_name":"web","public_ip":"","security_group_aws_ids":null,"security_groups":null,"service":"5fbf5a6a-1881-47e1-7c0a-ef040967030c","tags":{"Name":"web-1","ernest.instance_group":"web","ernest.service":"aws799446"},"user_data":"","volumes":null},{"_action":"create","_component":"nat","_component_id":"nat::db-nat","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway_id":"","name":"db-nat","nat_gateway_allocation_id":"","nat_gateway_allocation_ip":"","nat_gateway_aws_id":"","public_network":"web","public_network_aws_id":"foo","routed_networks":["db-a","db-b"],"routed_networks_aws_ids":["foo","foo"],"service":"5fbf5a6a-1881-47e1-7c0a-ef040967030c","tags":null,"vpc_id":"fakeaws"},{"_action":"none","_component":"credentials","_component_id":"credentials::aws","_provider":"aws-fake","_state":"waiting","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","name":"fakeaws","region":"fake"},{"_action":"create","_component":"rds_instance","_component_id":"rds_instance::test-1","_provider":"aws-fake","_state":"completed","arn":"","auto_upgrade":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","cluster":"aurora","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","endpoint":"rds-endpoint","engine":"aurora","final_snapshot":false,"multi_az":false,"name":"test-1","network_aws_ids":null,"networks":null,"public":false,"security_group_aws_ids":null,"security_groups":null,"service":"7d30c6f2-eedc-4e5c-5ec6-76aabd57fdc7","size":"db.r3.large","tags":{"ernest.service":"aws799446"},"type":"rds_instance.create.aws-fake.done"}],"changes":[{"_action":"create","_component":"rds_instance","_component_id":"rds_instance::test-1","_provider":"aws-fake","_state":"completed","arn":"","auto_upgrade":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","cluster":"aurora","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","endpoint":"rds-endpoint","engine":"aurora","final_snapshot":false,"multi_az":false,"name":"test-1","network_aws_ids":null,"networks":null,"public":false,"security_group_aws_ids":null,"security_groups":null,"service":"7d30c6f2-eedc-4e5c-5ec6-76aabd57fdc7","size":"db.r3.large","tags":{"ernest.service":"aws799446"},"type":"rds_instance.create.aws-fake.done"}],"edges":[{"destination":"rds_instance::test-1","length":1,"source":"start"},{"destination":"end","length":1,"source":"rds_instance::test-1"}]}', false, '', 0, '0001-01-01 00:00:00+00', '2017-07-21 18:55:02.55276+00', NULL);
INSERT INTO services (id, uuid, group_id, user_id, datacenter_id, name, type, version, status, last_known_error, options, definition, mapping, sync, sync_type, sync_interval, created_at, updated_at, deleted_at) VALUES (13, '52165155-2a84-4af1-782a-81404eece711', 3, 3, 1, 'aws335230', 'aws-fake', '2017-07-21 18:54:54.035294+00', 'done', '', '', 'name: aws335230
datacenter: fakeaws
vpcs:
- name: test-vpc
  subnet: 1.1.1.1/24
nat_gateways:
- name: db-nat
  public_network: web
networks:
- name: web
  vpc: test-vpc
  subnet: 10.1.0.0/24
  public: true
- name: db
  vpc: test-vpc
  subnet: 10.2.0.0/24
  public: false
  nat_gateway: db-nat
instances:
- name: web
  type: e1.micro
  image: ami-6666f915
  network: web
  start_ip: 10.1.0.11
  count: 1
  key_pair: some-keypair
security_groups:
- name: web-sg-1
  vpc: test-vpc
  egress:
  - from_port: "80"
    ip: 10.1.1.11/32
    protocol: any
    to_port: "80"
  ingress:
  - from_port: "80"
    ip: 10.1.1.11/32
    protocol: any
    to_port: "80"
', '{"id":"52165155-2a84-4af1-782a-81404eece711","action":"service.create","name":"aws335230","options":null,"components":[{"_action":"none","_component":"credentials","_component_id":"credentials::aws","_provider":"aws-fake","_state":"waiting","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","name":"fakeaws","region":"fake"},{"_action":"create","_component":"vpc","_component_id":"vpc::test-vpc","_provider":"aws-fake","_state":"completed","auto_remove":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_region":"fake","datacenter_type":"aws-fake","name":"test-vpc","service":"52165155-2a84-4af1-782a-81404eece711","subnet":"1.1.1.1/24","tags":{"Name":"test-vpc","ernest.service":"aws335230"},"type":"vpc.create.aws-fake.done","vpc_aws_id":"fakeaws"},{"_action":"create","_component":"internet_gateway","_component_id":"internet_gateway::test-vpc","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway_aws_id":"foo","name":"test-vpc","service":"52165155-2a84-4af1-782a-81404eece711","tags":{"Name":"test-vpc","ernest.service":"aws335230"},"type":"internet_gateway.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"network","_component_id":"network::db","_provider":"aws-fake","_state":"completed","availability_zone":"","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway":"test-vpc","internet_gateway_aws_id":"","is_public":false,"name":"db","network_aws_id":"foo","range":"10.2.0.0/24","service":"52165155-2a84-4af1-782a-81404eece711","tags":{"Name":"db","ernest.nat_gateway":"db-nat","ernest.service":"aws335230"},"type":"network.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"firewall","_component_id":"firewall::web-sg-1","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","name":"web-sg-1","rules":{"egress":[{"from_port":80,"ip":"10.1.1.11/32","protocol":"-1","to_port":80}],"ingress":[{"from_port":80,"ip":"10.1.1.11/32","protocol":"-1","to_port":80}]},"security_group_aws_id":"foo","service":"52165155-2a84-4af1-782a-81404eece711","tags":{"Name":"web-sg-1","ernest.service":"aws335230"},"type":"firewall.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"network","_component_id":"network::web","_provider":"aws-fake","_state":"completed","availability_zone":"","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway":"test-vpc","internet_gateway_aws_id":"foo","is_public":true,"name":"web","network_aws_id":"foo","range":"10.1.0.0/24","service":"52165155-2a84-4af1-782a-81404eece711","tags":{"Name":"web","ernest.service":"aws335230"},"type":"network.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"instance","_component_id":"instance::web-1","_provider":"aws-fake","_state":"completed","assign_elastic_ip":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","elastic_ip":"","iam_instance_profile":null,"iam_instance_profile_arn":null,"image":"ami-6666f915","instance_aws_id":"","instance_type":"e1.micro","ip":"10.1.0.11","key_pair":"some-keypair","name":"web-1","network_aws_id":"foo","network_is_public":false,"network_name":"web","public_ip":"","security_group_aws_ids":null,"security_groups":null,"service":"52165155-2a84-4af1-782a-81404eece711","tags":{"Name":"web-1","ernest.instance_group":"web","ernest.service":"aws335230"},"type":"instance.create.aws-fake.done","user_data":"","volumes":null},{"_action":"create","_component":"nat","_component_id":"nat::db-nat","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway_id":"","name":"db-nat","nat_gateway_allocation_id":"","nat_gateway_allocation_ip":"","nat_gateway_aws_id":"","public_network":"web","public_network_aws_id":"foo","routed_networks":["db"],"routed_networks_aws_ids":["foo"],"service":"52165155-2a84-4af1-782a-81404eece711","tags":null,"type":"nat.create.aws-fake.done","vpc_id":"fakeaws"}],"changes":[{"_action":"create","_component":"vpc","_component_id":"vpc::test-vpc","_provider":"aws-fake","_state":"completed","auto_remove":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_region":"fake","datacenter_type":"aws-fake","name":"test-vpc","service":"52165155-2a84-4af1-782a-81404eece711","subnet":"1.1.1.1/24","tags":{"Name":"test-vpc","ernest.service":"aws335230"},"type":"vpc.create.aws-fake.done","vpc_aws_id":"fakeaws"},{"_action":"create","_component":"internet_gateway","_component_id":"internet_gateway::test-vpc","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway_aws_id":"foo","name":"test-vpc","service":"52165155-2a84-4af1-782a-81404eece711","tags":{"Name":"test-vpc","ernest.service":"aws335230"},"type":"internet_gateway.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"network","_component_id":"network::web","_provider":"aws-fake","_state":"completed","availability_zone":"","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway":"test-vpc","internet_gateway_aws_id":"foo","is_public":true,"name":"web","network_aws_id":"foo","range":"10.1.0.0/24","service":"52165155-2a84-4af1-782a-81404eece711","tags":{"Name":"web","ernest.service":"aws335230"},"type":"network.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"network","_component_id":"network::db","_provider":"aws-fake","_state":"completed","availability_zone":"","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway":"test-vpc","internet_gateway_aws_id":"","is_public":false,"name":"db","network_aws_id":"foo","range":"10.2.0.0/24","service":"52165155-2a84-4af1-782a-81404eece711","tags":{"Name":"db","ernest.nat_gateway":"db-nat","ernest.service":"aws335230"},"type":"network.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"instance","_component_id":"instance::web-1","_provider":"aws-fake","_state":"completed","assign_elastic_ip":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","elastic_ip":"","iam_instance_profile":null,"iam_instance_profile_arn":null,"image":"ami-6666f915","instance_aws_id":"","instance_type":"e1.micro","ip":"10.1.0.11","key_pair":"some-keypair","name":"web-1","network_aws_id":"foo","network_is_public":false,"network_name":"web","public_ip":"","security_group_aws_ids":null,"security_groups":null,"service":"52165155-2a84-4af1-782a-81404eece711","tags":{"Name":"web-1","ernest.instance_group":"web","ernest.service":"aws335230"},"type":"instance.create.aws-fake.done","user_data":"","volumes":null},{"_action":"create","_component":"firewall","_component_id":"firewall::web-sg-1","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","name":"web-sg-1","rules":{"egress":[{"from_port":80,"ip":"10.1.1.11/32","protocol":"-1","to_port":80}],"ingress":[{"from_port":80,"ip":"10.1.1.11/32","protocol":"-1","to_port":80}]},"security_group_aws_id":"foo","service":"52165155-2a84-4af1-782a-81404eece711","tags":{"Name":"web-sg-1","ernest.service":"aws335230"},"type":"firewall.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"nat","_component_id":"nat::db-nat","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway_id":"","name":"db-nat","nat_gateway_allocation_id":"","nat_gateway_allocation_ip":"","nat_gateway_aws_id":"","public_network":"web","public_network_aws_id":"foo","routed_networks":["db"],"routed_networks_aws_ids":["foo"],"service":"52165155-2a84-4af1-782a-81404eece711","tags":null,"type":"nat.create.aws-fake.done","vpc_id":"fakeaws"}],"edges":[{"destination":"internet_gateway::test-vpc","length":1,"source":"vpc::test-vpc"},{"destination":"network::web","length":1,"source":"internet_gateway::test-vpc"},{"destination":"network::db","length":1,"source":"vpc::test-vpc"},{"destination":"instance::web-1","length":1,"source":"network::web"},{"destination":"firewall::web-sg-1","length":1,"source":"vpc::test-vpc"},{"destination":"nat::db-nat","length":1,"source":"network::db"},{"destination":"nat::db-nat","length":1,"source":"network::web"},{"destination":"vpc::test-vpc","length":1,"source":"start"},{"destination":"end","length":1,"source":"instance::web-1"},{"destination":"end","length":1,"source":"firewall::web-sg-1"},{"destination":"end","length":1,"source":"nat::db-nat"}]}', false, '', 0, '0001-01-01 00:00:00+00', '2017-07-21 18:54:54.145127+00', NULL);
INSERT INTO services (id, uuid, group_id, user_id, datacenter_id, name, type, version, status, last_known_error, options, definition, mapping, sync, sync_type, sync_interval, created_at, updated_at, deleted_at) VALUES (15, '5fbf5a6a-1881-47e1-7c0a-ef040967030c', 3, 3, 1, 'aws799446', 'aws-fake', '2017-07-21 18:55:01.363005+00', 'done', '', '', 'name: aws799446
datacenter: fakeaws
vpcs:
- name: test-vpc
  subnet: 1.1.1.1/24
nat_gateways:
- name: db-nat
  public_network: web
networks:
- name: web
  vpc: test-vpc
  subnet: 10.1.0.0/24
  public: true
- name: db-a
  vpc: test-vpc
  subnet: 10.2.0.0/24
  public: false
  availability_zone: fake-1a
  nat_gateway: db-nat
- name: db-b
  vpc: test-vpc
  subnet: 10.3.0.0/24
  public: false
  availability_zone: fake-1b
  nat_gateway: db-nat
instances:
- name: web
  type: e1.micro
  image: ami-6666f915
  network: web
  start_ip: 10.1.0.11
  count: 1
  key_pair: some-keypair
security_groups:
- name: web-sg-1
  vpc: test-vpc
  egress:
  - from_port: "80"
    ip: 10.1.1.11/32
    protocol: any
    to_port: "80"
  ingress:
  - from_port: "80"
    ip: 10.1.1.11/32
    protocol: any
    to_port: "80"
rds_clusters:
- name: aurora
  engine: aurora
  port: 3306
  networks:
  - db-a
  - db-b
  security_groups:
  - web-sg-1
  backups:
    retention: 1
  database_name: test
  database_username: test
  database_password: testpass-2
', '{"id":"5fbf5a6a-1881-47e1-7c0a-ef040967030c","action":"service.create","name":"aws799446","options":null,"components":[{"_action":"none","_component":"credentials","_component_id":"credentials::aws","_provider":"aws-fake","_state":"waiting","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","name":"fakeaws","region":"fake"},{"_action":"create","_component":"vpc","_component_id":"vpc::test-vpc","_provider":"aws-fake","_state":"completed","auto_remove":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_region":"fake","datacenter_type":"aws-fake","name":"test-vpc","service":"5fbf5a6a-1881-47e1-7c0a-ef040967030c","subnet":"1.1.1.1/24","tags":{"Name":"test-vpc","ernest.service":"aws799446"},"type":"vpc.create.aws-fake.done","vpc_aws_id":"fakeaws"},{"_action":"create","_component":"internet_gateway","_component_id":"internet_gateway::test-vpc","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway_aws_id":"foo","name":"test-vpc","service":"5fbf5a6a-1881-47e1-7c0a-ef040967030c","tags":{"Name":"test-vpc","ernest.service":"aws799446"},"type":"internet_gateway.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"network","_component_id":"network::db-a","_provider":"aws-fake","_state":"completed","availability_zone":"fake-1a","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway":"test-vpc","internet_gateway_aws_id":"","is_public":false,"name":"db-a","network_aws_id":"foo","range":"10.2.0.0/24","service":"5fbf5a6a-1881-47e1-7c0a-ef040967030c","tags":{"Name":"db-a","ernest.nat_gateway":"db-nat","ernest.service":"aws799446"},"type":"network.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"network","_component_id":"network::db-b","_provider":"aws-fake","_state":"completed","availability_zone":"fake-1b","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway":"test-vpc","internet_gateway_aws_id":"","is_public":false,"name":"db-b","network_aws_id":"foo","range":"10.3.0.0/24","service":"5fbf5a6a-1881-47e1-7c0a-ef040967030c","tags":{"Name":"db-b","ernest.nat_gateway":"db-nat","ernest.service":"aws799446"},"type":"network.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"firewall","_component_id":"firewall::web-sg-1","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","name":"web-sg-1","rules":{"egress":[{"from_port":80,"ip":"10.1.1.11/32","protocol":"-1","to_port":80}],"ingress":[{"from_port":80,"ip":"10.1.1.11/32","protocol":"-1","to_port":80}]},"security_group_aws_id":"foo","service":"5fbf5a6a-1881-47e1-7c0a-ef040967030c","tags":{"Name":"web-sg-1","ernest.service":"aws799446"},"type":"firewall.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"network","_component_id":"network::web","_provider":"aws-fake","_state":"completed","availability_zone":"","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway":"test-vpc","internet_gateway_aws_id":"foo","is_public":true,"name":"web","network_aws_id":"foo","range":"10.1.0.0/24","service":"5fbf5a6a-1881-47e1-7c0a-ef040967030c","tags":{"Name":"web","ernest.service":"aws799446"},"type":"network.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"rds_cluster","_component_id":"rds_cluster::aurora","_provider":"aws-fake","_state":"completed","arn":"","availability_zones":null,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","backup_retention":1,"database_name":"test","database_password":"testpass-2","database_username":"test","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","endpoint":"rds-endpoint","engine":"aurora","final_snapshot":false,"name":"aurora","network_aws_ids":["foo","foo"],"networks":["db-a","db-b"],"port":3306,"security_group_aws_ids":["foo"],"security_groups":["web-sg-1"],"service":"5fbf5a6a-1881-47e1-7c0a-ef040967030c","tags":{"ernest.service":"aws799446"},"type":"rds_cluster.create.aws-fake.done"},{"_action":"create","_component":"instance","_component_id":"instance::web-1","_provider":"aws-fake","_state":"completed","assign_elastic_ip":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","elastic_ip":"","iam_instance_profile":null,"iam_instance_profile_arn":null,"image":"ami-6666f915","instance_aws_id":"","instance_type":"e1.micro","ip":"10.1.0.11","key_pair":"some-keypair","name":"web-1","network_aws_id":"foo","network_is_public":false,"network_name":"web","public_ip":"","security_group_aws_ids":null,"security_groups":null,"service":"5fbf5a6a-1881-47e1-7c0a-ef040967030c","tags":{"Name":"web-1","ernest.instance_group":"web","ernest.service":"aws799446"},"type":"instance.create.aws-fake.done","user_data":"","volumes":null},{"_action":"create","_component":"nat","_component_id":"nat::db-nat","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway_id":"","name":"db-nat","nat_gateway_allocation_id":"","nat_gateway_allocation_ip":"","nat_gateway_aws_id":"","public_network":"web","public_network_aws_id":"foo","routed_networks":["db-a","db-b"],"routed_networks_aws_ids":["foo","foo"],"service":"5fbf5a6a-1881-47e1-7c0a-ef040967030c","tags":null,"type":"nat.create.aws-fake.done","vpc_id":"fakeaws"}],"changes":[{"_action":"create","_component":"vpc","_component_id":"vpc::test-vpc","_provider":"aws-fake","_state":"completed","auto_remove":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_region":"fake","datacenter_type":"aws-fake","name":"test-vpc","service":"5fbf5a6a-1881-47e1-7c0a-ef040967030c","subnet":"1.1.1.1/24","tags":{"Name":"test-vpc","ernest.service":"aws799446"},"type":"vpc.create.aws-fake.done","vpc_aws_id":"fakeaws"},{"_action":"create","_component":"internet_gateway","_component_id":"internet_gateway::test-vpc","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway_aws_id":"foo","name":"test-vpc","service":"5fbf5a6a-1881-47e1-7c0a-ef040967030c","tags":{"Name":"test-vpc","ernest.service":"aws799446"},"type":"internet_gateway.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"network","_component_id":"network::web","_provider":"aws-fake","_state":"completed","availability_zone":"","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway":"test-vpc","internet_gateway_aws_id":"foo","is_public":true,"name":"web","network_aws_id":"foo","range":"10.1.0.0/24","service":"5fbf5a6a-1881-47e1-7c0a-ef040967030c","tags":{"Name":"web","ernest.service":"aws799446"},"type":"network.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"network","_component_id":"network::db-a","_provider":"aws-fake","_state":"completed","availability_zone":"fake-1a","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway":"test-vpc","internet_gateway_aws_id":"","is_public":false,"name":"db-a","network_aws_id":"foo","range":"10.2.0.0/24","service":"5fbf5a6a-1881-47e1-7c0a-ef040967030c","tags":{"Name":"db-a","ernest.nat_gateway":"db-nat","ernest.service":"aws799446"},"type":"network.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"network","_component_id":"network::db-b","_provider":"aws-fake","_state":"completed","availability_zone":"fake-1b","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway":"test-vpc","internet_gateway_aws_id":"","is_public":false,"name":"db-b","network_aws_id":"foo","range":"10.3.0.0/24","service":"5fbf5a6a-1881-47e1-7c0a-ef040967030c","tags":{"Name":"db-b","ernest.nat_gateway":"db-nat","ernest.service":"aws799446"},"type":"network.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"instance","_component_id":"instance::web-1","_provider":"aws-fake","_state":"completed","assign_elastic_ip":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","elastic_ip":"","iam_instance_profile":null,"iam_instance_profile_arn":null,"image":"ami-6666f915","instance_aws_id":"","instance_type":"e1.micro","ip":"10.1.0.11","key_pair":"some-keypair","name":"web-1","network_aws_id":"foo","network_is_public":false,"network_name":"web","public_ip":"","security_group_aws_ids":null,"security_groups":null,"service":"5fbf5a6a-1881-47e1-7c0a-ef040967030c","tags":{"Name":"web-1","ernest.instance_group":"web","ernest.service":"aws799446"},"type":"instance.create.aws-fake.done","user_data":"","volumes":null},{"_action":"create","_component":"firewall","_component_id":"firewall::web-sg-1","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","name":"web-sg-1","rules":{"egress":[{"from_port":80,"ip":"10.1.1.11/32","protocol":"-1","to_port":80}],"ingress":[{"from_port":80,"ip":"10.1.1.11/32","protocol":"-1","to_port":80}]},"security_group_aws_id":"foo","service":"5fbf5a6a-1881-47e1-7c0a-ef040967030c","tags":{"Name":"web-sg-1","ernest.service":"aws799446"},"type":"firewall.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"nat","_component_id":"nat::db-nat","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway_id":"","name":"db-nat","nat_gateway_allocation_id":"","nat_gateway_allocation_ip":"","nat_gateway_aws_id":"","public_network":"web","public_network_aws_id":"foo","routed_networks":["db-a","db-b"],"routed_networks_aws_ids":["foo","foo"],"service":"5fbf5a6a-1881-47e1-7c0a-ef040967030c","tags":null,"type":"nat.create.aws-fake.done","vpc_id":"fakeaws"},{"_action":"create","_component":"rds_cluster","_component_id":"rds_cluster::aurora","_provider":"aws-fake","_state":"completed","arn":"","availability_zones":null,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","backup_retention":1,"database_name":"test","database_password":"testpass-2","database_username":"test","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","endpoint":"rds-endpoint","engine":"aurora","final_snapshot":false,"name":"aurora","network_aws_ids":["foo","foo"],"networks":["db-a","db-b"],"port":3306,"security_group_aws_ids":["foo"],"security_groups":["web-sg-1"],"service":"5fbf5a6a-1881-47e1-7c0a-ef040967030c","tags":{"ernest.service":"aws799446"},"type":"rds_cluster.create.aws-fake.done"}],"edges":[{"destination":"internet_gateway::test-vpc","length":1,"source":"vpc::test-vpc"},{"destination":"network::web","length":1,"source":"internet_gateway::test-vpc"},{"destination":"network::db-a","length":1,"source":"vpc::test-vpc"},{"destination":"network::db-b","length":1,"source":"vpc::test-vpc"},{"destination":"instance::web-1","length":1,"source":"network::web"},{"destination":"firewall::web-sg-1","length":1,"source":"vpc::test-vpc"},{"destination":"nat::db-nat","length":1,"source":"network::db-a"},{"destination":"nat::db-nat","length":1,"source":"network::db-b"},{"destination":"nat::db-nat","length":1,"source":"network::web"},{"destination":"rds_cluster::aurora","length":1,"source":"firewall::web-sg-1"},{"destination":"rds_cluster::aurora","length":1,"source":"network::db-a"},{"destination":"rds_cluster::aurora","length":1,"source":"network::db-b"},{"destination":"vpc::test-vpc","length":1,"source":"start"},{"destination":"end","length":1,"source":"instance::web-1"},{"destination":"end","length":1,"source":"nat::db-nat"},{"destination":"end","length":1,"source":"rds_cluster::aurora"}]}', false, '', 0, '0001-01-01 00:00:00+00', '2017-07-21 18:55:01.497416+00', NULL);
INSERT INTO services (id, uuid, group_id, user_id, datacenter_id, name, type, version, status, last_known_error, options, definition, mapping, sync, sync_type, sync_interval, created_at, updated_at, deleted_at) VALUES (26, 'a5cda986-c9da-4100-6b5c-42a137da6e91', 3, 3, 1, 'aws4545644', 'aws-fake', '2017-07-21 18:55:43.939203+00', 'done', '', '', 'name: aws4545644
datacenter: fakeaws
vpcs:
- name: test-vpc
  subnet: 1.1.1.1/24
networks:
- name: web
  vpc: test-vpc
  public: true
  subnet: 10.1.0.0/24
instances:
- name: web
  type: e1.micro
  image: ami-6666f915
  network: web
  start_ip: 10.1.0.11
  count: 1
  key_pair: some-keypair
  security_groups:
  - web-sg-1
security_groups:
- name: web-sg-1
  vpc: test-vpc
  egress:
  - from_port: "80"
    ip: 10.1.1.11/32
    protocol: any
    to_port: "80"
  ingress:
  - from_port: "80"
    ip: 10.1.1.11/32
    protocol: any
    to_port: "80"
', '{"id":"a5cda986-c9da-4100-6b5c-42a137da6e91","action":"service.create","name":"aws4545644","options":null,"components":[{"_action":"none","_component":"credentials","_component_id":"credentials::aws","_provider":"aws-fake","_state":"waiting","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","name":"fakeaws","region":"fake"},{"_action":"create","_component":"vpc","_component_id":"vpc::test-vpc","_provider":"aws-fake","_state":"completed","auto_remove":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_region":"fake","datacenter_type":"aws-fake","name":"test-vpc","service":"a5cda986-c9da-4100-6b5c-42a137da6e91","subnet":"1.1.1.1/24","tags":{"Name":"test-vpc","ernest.service":"aws4545644"},"type":"vpc.create.aws-fake.done","vpc_aws_id":"fakeaws"},{"_action":"create","_component":"internet_gateway","_component_id":"internet_gateway::test-vpc","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway_aws_id":"foo","name":"test-vpc","service":"a5cda986-c9da-4100-6b5c-42a137da6e91","tags":{"Name":"test-vpc","ernest.service":"aws4545644"},"type":"internet_gateway.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"firewall","_component_id":"firewall::web-sg-1","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","name":"web-sg-1","rules":{"egress":[{"from_port":80,"ip":"10.1.1.11/32","protocol":"-1","to_port":80}],"ingress":[{"from_port":80,"ip":"10.1.1.11/32","protocol":"-1","to_port":80}]},"security_group_aws_id":"foo","service":"a5cda986-c9da-4100-6b5c-42a137da6e91","tags":{"Name":"web-sg-1","ernest.service":"aws4545644"},"type":"firewall.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"network","_component_id":"network::web","_provider":"aws-fake","_state":"completed","availability_zone":"","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway":"test-vpc","internet_gateway_aws_id":"foo","is_public":true,"name":"web","network_aws_id":"foo","range":"10.1.0.0/24","service":"a5cda986-c9da-4100-6b5c-42a137da6e91","tags":{"Name":"web","ernest.service":"aws4545644"},"type":"network.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"instance","_component_id":"instance::web-1","_provider":"aws-fake","_state":"completed","assign_elastic_ip":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","elastic_ip":"","iam_instance_profile":null,"iam_instance_profile_arn":null,"image":"ami-6666f915","instance_aws_id":"","instance_type":"e1.micro","ip":"10.1.0.11","key_pair":"some-keypair","name":"web-1","network_aws_id":"foo","network_is_public":false,"network_name":"web","public_ip":"","security_group_aws_ids":["foo"],"security_groups":["web-sg-1"],"service":"a5cda986-c9da-4100-6b5c-42a137da6e91","tags":{"Name":"web-1","ernest.instance_group":"web","ernest.service":"aws4545644"},"type":"instance.create.aws-fake.done","user_data":"","volumes":null}],"changes":[{"_action":"create","_component":"vpc","_component_id":"vpc::test-vpc","_provider":"aws-fake","_state":"completed","auto_remove":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_region":"fake","datacenter_type":"aws-fake","name":"test-vpc","service":"a5cda986-c9da-4100-6b5c-42a137da6e91","subnet":"1.1.1.1/24","tags":{"Name":"test-vpc","ernest.service":"aws4545644"},"type":"vpc.create.aws-fake.done","vpc_aws_id":"fakeaws"},{"_action":"create","_component":"internet_gateway","_component_id":"internet_gateway::test-vpc","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway_aws_id":"foo","name":"test-vpc","service":"a5cda986-c9da-4100-6b5c-42a137da6e91","tags":{"Name":"test-vpc","ernest.service":"aws4545644"},"type":"internet_gateway.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"network","_component_id":"network::web","_provider":"aws-fake","_state":"completed","availability_zone":"","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway":"test-vpc","internet_gateway_aws_id":"foo","is_public":true,"name":"web","network_aws_id":"foo","range":"10.1.0.0/24","service":"a5cda986-c9da-4100-6b5c-42a137da6e91","tags":{"Name":"web","ernest.service":"aws4545644"},"type":"network.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"instance","_component_id":"instance::web-1","_provider":"aws-fake","_state":"completed","assign_elastic_ip":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","elastic_ip":"","iam_instance_profile":null,"iam_instance_profile_arn":null,"image":"ami-6666f915","instance_aws_id":"","instance_type":"e1.micro","ip":"10.1.0.11","key_pair":"some-keypair","name":"web-1","network_aws_id":"foo","network_is_public":false,"network_name":"web","public_ip":"","security_group_aws_ids":["foo"],"security_groups":["web-sg-1"],"service":"a5cda986-c9da-4100-6b5c-42a137da6e91","tags":{"Name":"web-1","ernest.instance_group":"web","ernest.service":"aws4545644"},"type":"instance.create.aws-fake.done","user_data":"","volumes":null},{"_action":"create","_component":"firewall","_component_id":"firewall::web-sg-1","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","name":"web-sg-1","rules":{"egress":[{"from_port":80,"ip":"10.1.1.11/32","protocol":"-1","to_port":80}],"ingress":[{"from_port":80,"ip":"10.1.1.11/32","protocol":"-1","to_port":80}]},"security_group_aws_id":"foo","service":"a5cda986-c9da-4100-6b5c-42a137da6e91","tags":{"Name":"web-sg-1","ernest.service":"aws4545644"},"type":"firewall.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"}],"edges":[{"destination":"internet_gateway::test-vpc","length":1,"source":"vpc::test-vpc"},{"destination":"network::web","length":1,"source":"internet_gateway::test-vpc"},{"destination":"instance::web-1","length":1,"source":"firewall::web-sg-1"},{"destination":"instance::web-1","length":1,"source":"network::web"},{"destination":"firewall::web-sg-1","length":1,"source":"vpc::test-vpc"},{"destination":"vpc::test-vpc","length":1,"source":"start"},{"destination":"end","length":1,"source":"instance::web-1"}]}', false, '', 0, '0001-01-01 00:00:00+00', '2017-07-21 18:55:44.007467+00', NULL);
INSERT INTO services (id, uuid, group_id, user_id, datacenter_id, name, type, version, status, last_known_error, options, definition, mapping, sync, sync_type, sync_interval, created_at, updated_at, deleted_at) VALUES (24, 'ef9a82bd-d1a6-4dac-6ca0-7aab6399694e', 3, 3, 1, 'aws6429855', 'aws-fake', '2017-07-21 18:55:36.630349+00', 'done', '', '', 'name: aws6429855
datacenter: fakeaws
vpcs:
- name: test-vpc
  subnet: 1.1.1.1/24
nat_gateways:
- name: db-nat
  public_network: web
networks:
- name: web
  vpc: test-vpc
  subnet: 10.1.0.0/24
  public: true
- name: db-a
  vpc: test-vpc
  subnet: 10.2.0.0/24
  public: false
  availability_zone: fake-1a
  nat_gateway: db-nat
- name: db-b
  vpc: test-vpc
  subnet: 10.3.0.0/24
  public: false
  availability_zone: fake-1b
  nat_gateway: db-nat
instances:
- name: web
  type: e1.micro
  image: ami-6666f915
  network: web
  start_ip: 10.1.0.11
  count: 1
  key_pair: some-keypair
security_groups:
- name: web-sg-1
  vpc: test-vpc
  egress:
  - from_port: "80"
    ip: 10.1.1.11/32
    protocol: any
    to_port: "80"
  ingress:
  - from_port: "80"
    ip: 10.1.1.11/32
    protocol: any
    to_port: "80"
rds_clusters:
- name: aurora
  engine: aurora
  port: 3306
  networks:
  - db-a
  - db-b
  security_groups:
  - web-sg-1
  backups:
    retention: 1
  database_name: test
  database_username: test
  database_password: testpass-2
rds_instances:
- name: test-1
  cluster: aurora
  size: db.r3.xlarge
', '{"id":"ef9a82bd-d1a6-4dac-6ca0-7aab6399694e","action":"service.create","name":"aws6429855","options":null,"components":[{"_action":"none","_component":"credentials","_component_id":"credentials::aws","_provider":"aws-fake","_state":"waiting","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","name":"fakeaws","region":"fake"},{"_action":"create","_component":"vpc","_component_id":"vpc::test-vpc","_provider":"aws-fake","_state":"completed","auto_remove":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_region":"fake","datacenter_type":"aws-fake","name":"test-vpc","service":"ef9a82bd-d1a6-4dac-6ca0-7aab6399694e","subnet":"1.1.1.1/24","tags":{"Name":"test-vpc","ernest.service":"aws6429855"},"type":"vpc.create.aws-fake.done","vpc_aws_id":"fakeaws"},{"_action":"create","_component":"internet_gateway","_component_id":"internet_gateway::test-vpc","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway_aws_id":"foo","name":"test-vpc","service":"ef9a82bd-d1a6-4dac-6ca0-7aab6399694e","tags":{"Name":"test-vpc","ernest.service":"aws6429855"},"type":"internet_gateway.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"network","_component_id":"network::db-a","_provider":"aws-fake","_state":"completed","availability_zone":"fake-1a","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway":"test-vpc","internet_gateway_aws_id":"","is_public":false,"name":"db-a","network_aws_id":"foo","range":"10.2.0.0/24","service":"ef9a82bd-d1a6-4dac-6ca0-7aab6399694e","tags":{"Name":"db-a","ernest.nat_gateway":"db-nat","ernest.service":"aws6429855"},"type":"network.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"network","_component_id":"network::db-b","_provider":"aws-fake","_state":"completed","availability_zone":"fake-1b","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway":"test-vpc","internet_gateway_aws_id":"","is_public":false,"name":"db-b","network_aws_id":"foo","range":"10.3.0.0/24","service":"ef9a82bd-d1a6-4dac-6ca0-7aab6399694e","tags":{"Name":"db-b","ernest.nat_gateway":"db-nat","ernest.service":"aws6429855"},"type":"network.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"firewall","_component_id":"firewall::web-sg-1","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","name":"web-sg-1","rules":{"egress":[{"from_port":80,"ip":"10.1.1.11/32","protocol":"-1","to_port":80}],"ingress":[{"from_port":80,"ip":"10.1.1.11/32","protocol":"-1","to_port":80}]},"security_group_aws_id":"foo","service":"ef9a82bd-d1a6-4dac-6ca0-7aab6399694e","tags":{"Name":"web-sg-1","ernest.service":"aws6429855"},"type":"firewall.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"network","_component_id":"network::web","_provider":"aws-fake","_state":"completed","availability_zone":"","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway":"test-vpc","internet_gateway_aws_id":"foo","is_public":true,"name":"web","network_aws_id":"foo","range":"10.1.0.0/24","service":"ef9a82bd-d1a6-4dac-6ca0-7aab6399694e","tags":{"Name":"web","ernest.service":"aws6429855"},"type":"network.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"rds_cluster","_component_id":"rds_cluster::aurora","_provider":"aws-fake","_state":"completed","arn":"","availability_zones":null,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","backup_retention":1,"database_name":"test","database_password":"testpass-2","database_username":"test","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","endpoint":"rds-endpoint","engine":"aurora","final_snapshot":false,"name":"aurora","network_aws_ids":["foo","foo"],"networks":["db-a","db-b"],"port":3306,"security_group_aws_ids":["foo"],"security_groups":["web-sg-1"],"service":"ef9a82bd-d1a6-4dac-6ca0-7aab6399694e","tags":{"ernest.service":"aws6429855"},"type":"rds_cluster.create.aws-fake.done"},{"_action":"create","_component":"instance","_component_id":"instance::web-1","_provider":"aws-fake","_state":"completed","assign_elastic_ip":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","elastic_ip":"","iam_instance_profile":null,"iam_instance_profile_arn":null,"image":"ami-6666f915","instance_aws_id":"","instance_type":"e1.micro","ip":"10.1.0.11","key_pair":"some-keypair","name":"web-1","network_aws_id":"foo","network_is_public":false,"network_name":"web","public_ip":"","security_group_aws_ids":null,"security_groups":null,"service":"ef9a82bd-d1a6-4dac-6ca0-7aab6399694e","tags":{"Name":"web-1","ernest.instance_group":"web","ernest.service":"aws6429855"},"type":"instance.create.aws-fake.done","user_data":"","volumes":null},{"_action":"create","_component":"nat","_component_id":"nat::db-nat","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway_id":"","name":"db-nat","nat_gateway_allocation_id":"","nat_gateway_allocation_ip":"","nat_gateway_aws_id":"","public_network":"web","public_network_aws_id":"foo","routed_networks":["db-a","db-b"],"routed_networks_aws_ids":["foo","foo"],"service":"ef9a82bd-d1a6-4dac-6ca0-7aab6399694e","tags":null,"type":"nat.create.aws-fake.done","vpc_id":"fakeaws"},{"_action":"create","_component":"rds_instance","_component_id":"rds_instance::test-1","_provider":"aws-fake","_state":"completed","arn":"","auto_upgrade":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","cluster":"aurora","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","endpoint":"rds-endpoint","engine":"aurora","final_snapshot":false,"multi_az":false,"name":"test-1","network_aws_ids":null,"networks":null,"public":false,"security_group_aws_ids":null,"security_groups":null,"service":"ef9a82bd-d1a6-4dac-6ca0-7aab6399694e","size":"db.r3.xlarge","tags":{"ernest.service":"aws6429855"},"type":"rds_instance.create.aws-fake.done"}],"changes":[{"_action":"create","_component":"vpc","_component_id":"vpc::test-vpc","_provider":"aws-fake","_state":"completed","auto_remove":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_region":"fake","datacenter_type":"aws-fake","name":"test-vpc","service":"ef9a82bd-d1a6-4dac-6ca0-7aab6399694e","subnet":"1.1.1.1/24","tags":{"Name":"test-vpc","ernest.service":"aws6429855"},"type":"vpc.create.aws-fake.done","vpc_aws_id":"fakeaws"},{"_action":"create","_component":"internet_gateway","_component_id":"internet_gateway::test-vpc","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway_aws_id":"foo","name":"test-vpc","service":"ef9a82bd-d1a6-4dac-6ca0-7aab6399694e","tags":{"Name":"test-vpc","ernest.service":"aws6429855"},"type":"internet_gateway.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"network","_component_id":"network::web","_provider":"aws-fake","_state":"completed","availability_zone":"","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway":"test-vpc","internet_gateway_aws_id":"foo","is_public":true,"name":"web","network_aws_id":"foo","range":"10.1.0.0/24","service":"ef9a82bd-d1a6-4dac-6ca0-7aab6399694e","tags":{"Name":"web","ernest.service":"aws6429855"},"type":"network.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"network","_component_id":"network::db-a","_provider":"aws-fake","_state":"completed","availability_zone":"fake-1a","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway":"test-vpc","internet_gateway_aws_id":"","is_public":false,"name":"db-a","network_aws_id":"foo","range":"10.2.0.0/24","service":"ef9a82bd-d1a6-4dac-6ca0-7aab6399694e","tags":{"Name":"db-a","ernest.nat_gateway":"db-nat","ernest.service":"aws6429855"},"type":"network.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"network","_component_id":"network::db-b","_provider":"aws-fake","_state":"completed","availability_zone":"fake-1b","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway":"test-vpc","internet_gateway_aws_id":"","is_public":false,"name":"db-b","network_aws_id":"foo","range":"10.3.0.0/24","service":"ef9a82bd-d1a6-4dac-6ca0-7aab6399694e","tags":{"Name":"db-b","ernest.nat_gateway":"db-nat","ernest.service":"aws6429855"},"type":"network.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"instance","_component_id":"instance::web-1","_provider":"aws-fake","_state":"completed","assign_elastic_ip":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","elastic_ip":"","iam_instance_profile":null,"iam_instance_profile_arn":null,"image":"ami-6666f915","instance_aws_id":"","instance_type":"e1.micro","ip":"10.1.0.11","key_pair":"some-keypair","name":"web-1","network_aws_id":"foo","network_is_public":false,"network_name":"web","public_ip":"","security_group_aws_ids":null,"security_groups":null,"service":"ef9a82bd-d1a6-4dac-6ca0-7aab6399694e","tags":{"Name":"web-1","ernest.instance_group":"web","ernest.service":"aws6429855"},"type":"instance.create.aws-fake.done","user_data":"","volumes":null},{"_action":"create","_component":"firewall","_component_id":"firewall::web-sg-1","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","name":"web-sg-1","rules":{"egress":[{"from_port":80,"ip":"10.1.1.11/32","protocol":"-1","to_port":80}],"ingress":[{"from_port":80,"ip":"10.1.1.11/32","protocol":"-1","to_port":80}]},"security_group_aws_id":"foo","service":"ef9a82bd-d1a6-4dac-6ca0-7aab6399694e","tags":{"Name":"web-sg-1","ernest.service":"aws6429855"},"type":"firewall.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"nat","_component_id":"nat::db-nat","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway_id":"","name":"db-nat","nat_gateway_allocation_id":"","nat_gateway_allocation_ip":"","nat_gateway_aws_id":"","public_network":"web","public_network_aws_id":"foo","routed_networks":["db-a","db-b"],"routed_networks_aws_ids":["foo","foo"],"service":"ef9a82bd-d1a6-4dac-6ca0-7aab6399694e","tags":null,"type":"nat.create.aws-fake.done","vpc_id":"fakeaws"},{"_action":"create","_component":"rds_cluster","_component_id":"rds_cluster::aurora","_provider":"aws-fake","_state":"completed","arn":"","availability_zones":null,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","backup_retention":1,"database_name":"test","database_password":"testpass-2","database_username":"test","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","endpoint":"rds-endpoint","engine":"aurora","final_snapshot":false,"name":"aurora","network_aws_ids":["foo","foo"],"networks":["db-a","db-b"],"port":3306,"security_group_aws_ids":["foo"],"security_groups":["web-sg-1"],"service":"ef9a82bd-d1a6-4dac-6ca0-7aab6399694e","tags":{"ernest.service":"aws6429855"},"type":"rds_cluster.create.aws-fake.done"},{"_action":"create","_component":"rds_instance","_component_id":"rds_instance::test-1","_provider":"aws-fake","_state":"completed","arn":"","auto_upgrade":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","cluster":"aurora","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","endpoint":"rds-endpoint","engine":"aurora","final_snapshot":false,"multi_az":false,"name":"test-1","network_aws_ids":null,"networks":null,"public":false,"security_group_aws_ids":null,"security_groups":null,"service":"ef9a82bd-d1a6-4dac-6ca0-7aab6399694e","size":"db.r3.xlarge","tags":{"ernest.service":"aws6429855"},"type":"rds_instance.create.aws-fake.done"}],"edges":[{"destination":"internet_gateway::test-vpc","length":1,"source":"vpc::test-vpc"},{"destination":"network::web","length":1,"source":"internet_gateway::test-vpc"},{"destination":"network::db-a","length":1,"source":"vpc::test-vpc"},{"destination":"network::db-b","length":1,"source":"vpc::test-vpc"},{"destination":"instance::web-1","length":1,"source":"network::web"},{"destination":"firewall::web-sg-1","length":1,"source":"vpc::test-vpc"},{"destination":"nat::db-nat","length":1,"source":"network::db-a"},{"destination":"nat::db-nat","length":1,"source":"network::db-b"},{"destination":"nat::db-nat","length":1,"source":"network::web"},{"destination":"rds_cluster::aurora","length":1,"source":"firewall::web-sg-1"},{"destination":"rds_cluster::aurora","length":1,"source":"network::db-a"},{"destination":"rds_cluster::aurora","length":1,"source":"network::db-b"},{"destination":"rds_instance::test-1","length":1,"source":"rds_cluster::aurora"},{"destination":"vpc::test-vpc","length":1,"source":"start"},{"destination":"end","length":1,"source":"instance::web-1"},{"destination":"end","length":1,"source":"nat::db-nat"},{"destination":"end","length":1,"source":"rds_instance::test-1"}]}', false, '', 0, '0001-01-01 00:00:00+00', '2017-07-21 18:55:36.787594+00', NULL);
INSERT INTO services (id, uuid, group_id, user_id, datacenter_id, name, type, version, status, last_known_error, options, definition, mapping, sync, sync_type, sync_interval, created_at, updated_at, deleted_at) VALUES (18, '4238e294-d51b-44b3-6738-1c9a7f7bd4e4', 3, 3, 1, 'aws6153856', 'aws-fake', '2017-07-21 18:55:09.747888+00', 'done', '', '', 'name: aws6153856
datacenter: fakeaws
vpcs:
- name: test-vpc
  subnet: 1.1.1.1/24
networks:
- name: web
  vpc: test-vpc
  public: true
  subnet: 10.1.0.0/24
instances:
- name: web
  type: e1.micro
  image: ami-6666f915
  network: web
  start_ip: 10.1.0.11
  count: 1
  key_pair: some-keypair
security_groups:
- name: web-sg-1
  vpc: test-vpc
  egress:
  - from_port: "80"
    ip: 10.1.1.11/32
    protocol: any
    to_port: "80"
  ingress:
  - from_port: "80"
    ip: 10.1.1.11/32
    protocol: any
    to_port: "80"
', '{"id":"4238e294-d51b-44b3-6738-1c9a7f7bd4e4","action":"service.create","name":"aws6153856","options":null,"components":[{"_action":"create","_component":"vpc","_component_id":"vpc::test-vpc","_provider":"aws-fake","_state":"completed","auto_remove":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_region":"fake","datacenter_type":"aws-fake","name":"test-vpc","service":"f2d534bf-e8c9-464e-760e-bf312863a478","subnet":"1.1.1.1/24","tags":{"Name":"test-vpc","ernest.service":"aws6153856"},"vpc_aws_id":"fakeaws"},{"_action":"create","_component":"internet_gateway","_component_id":"internet_gateway::test-vpc","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway_aws_id":"foo","name":"test-vpc","service":"f2d534bf-e8c9-464e-760e-bf312863a478","tags":{"Name":"test-vpc","ernest.service":"aws6153856"},"vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"firewall","_component_id":"firewall::web-sg-1","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","name":"web-sg-1","rules":{"egress":[{"from_port":80,"ip":"10.1.1.11/32","protocol":"-1","to_port":80}],"ingress":[{"from_port":80,"ip":"10.1.1.11/32","protocol":"-1","to_port":80}]},"security_group_aws_id":"foo","service":"f2d534bf-e8c9-464e-760e-bf312863a478","tags":{"Name":"web-sg-1","ernest.service":"aws6153856"},"vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"network","_component_id":"network::web","_provider":"aws-fake","_state":"completed","availability_zone":"","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway":"test-vpc","internet_gateway_aws_id":"foo","is_public":true,"name":"web","network_aws_id":"foo","range":"10.1.0.0/24","service":"f2d534bf-e8c9-464e-760e-bf312863a478","tags":{"Name":"web","ernest.service":"aws6153856"},"vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"update","_component":"instance","_component_id":"instance::web-1","_provider":"aws-fake","_state":"completed","assign_elastic_ip":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","elastic_ip":"","iam_instance_profile":null,"iam_instance_profile_arn":null,"image":"ami-6666f915","instance_aws_id":"","instance_type":"e1.micro","ip":"10.1.0.11","key_pair":"some-keypair","name":"web-1","network_aws_id":"foo","network_is_public":false,"network_name":"web","public_ip":"","security_group_aws_ids":null,"security_groups":null,"service":"4238e294-d51b-44b3-6738-1c9a7f7bd4e4","tags":{"Name":"web-1","ernest.instance_group":"web","ernest.service":"aws6153856"},"type":"instance.update.aws-fake.done","user_data":"","volumes":null},{"_action":"none","_component":"credentials","_component_id":"credentials::aws","_provider":"aws-fake","_state":"waiting","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","name":"fakeaws","region":"fake"}],"changes":[{"_action":"update","_component":"instance","_component_id":"instance::web-1","_provider":"aws-fake","_state":"completed","assign_elastic_ip":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","elastic_ip":"","iam_instance_profile":null,"iam_instance_profile_arn":null,"image":"ami-6666f915","instance_aws_id":"","instance_type":"e1.micro","ip":"10.1.0.11","key_pair":"some-keypair","name":"web-1","network_aws_id":"foo","network_is_public":false,"network_name":"web","public_ip":"","security_group_aws_ids":null,"security_groups":null,"service":"4238e294-d51b-44b3-6738-1c9a7f7bd4e4","tags":{"Name":"web-1","ernest.instance_group":"web","ernest.service":"aws6153856"},"type":"instance.update.aws-fake.done","user_data":"","volumes":null}],"edges":[{"destination":"instance::web-1","length":1,"source":"start"},{"destination":"end","length":1,"source":"instance::web-1"}]}', false, '', 0, '0001-01-01 00:00:00+00', '2017-07-21 18:55:09.769177+00', NULL);
INSERT INTO services (id, uuid, group_id, user_id, datacenter_id, name, type, version, status, last_known_error, options, definition, mapping, sync, sync_type, sync_interval, created_at, updated_at, deleted_at) VALUES (17, 'f2d534bf-e8c9-464e-760e-bf312863a478', 3, 3, 1, 'aws6153856', 'aws-fake', '2017-07-21 18:55:08.648697+00', 'done', '', '', 'name: aws6153856
datacenter: fakeaws
vpcs:
- name: test-vpc
  subnet: 1.1.1.1/24
networks:
- name: web
  vpc: test-vpc
  public: true
  subnet: 10.1.0.0/24
instances:
- name: web
  type: e1.micro
  image: ami-6666f915
  network: web
  start_ip: 10.1.0.11
  count: 1
  key_pair: some-keypair
  security_groups:
  - web-sg-1
security_groups:
- name: web-sg-1
  vpc: test-vpc
  egress:
  - from_port: "80"
    ip: 10.1.1.11/32
    protocol: any
    to_port: "80"
  ingress:
  - from_port: "80"
    ip: 10.1.1.11/32
    protocol: any
    to_port: "80"
', '{"id":"f2d534bf-e8c9-464e-760e-bf312863a478","action":"service.create","name":"aws6153856","options":null,"components":[{"_action":"none","_component":"credentials","_component_id":"credentials::aws","_provider":"aws-fake","_state":"waiting","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","name":"fakeaws","region":"fake"},{"_action":"create","_component":"vpc","_component_id":"vpc::test-vpc","_provider":"aws-fake","_state":"completed","auto_remove":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_region":"fake","datacenter_type":"aws-fake","name":"test-vpc","service":"f2d534bf-e8c9-464e-760e-bf312863a478","subnet":"1.1.1.1/24","tags":{"Name":"test-vpc","ernest.service":"aws6153856"},"type":"vpc.create.aws-fake.done","vpc_aws_id":"fakeaws"},{"_action":"create","_component":"internet_gateway","_component_id":"internet_gateway::test-vpc","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway_aws_id":"foo","name":"test-vpc","service":"f2d534bf-e8c9-464e-760e-bf312863a478","tags":{"Name":"test-vpc","ernest.service":"aws6153856"},"type":"internet_gateway.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"firewall","_component_id":"firewall::web-sg-1","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","name":"web-sg-1","rules":{"egress":[{"from_port":80,"ip":"10.1.1.11/32","protocol":"-1","to_port":80}],"ingress":[{"from_port":80,"ip":"10.1.1.11/32","protocol":"-1","to_port":80}]},"security_group_aws_id":"foo","service":"f2d534bf-e8c9-464e-760e-bf312863a478","tags":{"Name":"web-sg-1","ernest.service":"aws6153856"},"type":"firewall.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"network","_component_id":"network::web","_provider":"aws-fake","_state":"completed","availability_zone":"","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway":"test-vpc","internet_gateway_aws_id":"foo","is_public":true,"name":"web","network_aws_id":"foo","range":"10.1.0.0/24","service":"f2d534bf-e8c9-464e-760e-bf312863a478","tags":{"Name":"web","ernest.service":"aws6153856"},"type":"network.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"instance","_component_id":"instance::web-1","_provider":"aws-fake","_state":"completed","assign_elastic_ip":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","elastic_ip":"","iam_instance_profile":null,"iam_instance_profile_arn":null,"image":"ami-6666f915","instance_aws_id":"","instance_type":"e1.micro","ip":"10.1.0.11","key_pair":"some-keypair","name":"web-1","network_aws_id":"foo","network_is_public":false,"network_name":"web","public_ip":"","security_group_aws_ids":["foo"],"security_groups":["web-sg-1"],"service":"f2d534bf-e8c9-464e-760e-bf312863a478","tags":{"Name":"web-1","ernest.instance_group":"web","ernest.service":"aws6153856"},"type":"instance.create.aws-fake.done","user_data":"","volumes":null}],"changes":[{"_action":"create","_component":"vpc","_component_id":"vpc::test-vpc","_provider":"aws-fake","_state":"completed","auto_remove":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_region":"fake","datacenter_type":"aws-fake","name":"test-vpc","service":"f2d534bf-e8c9-464e-760e-bf312863a478","subnet":"1.1.1.1/24","tags":{"Name":"test-vpc","ernest.service":"aws6153856"},"type":"vpc.create.aws-fake.done","vpc_aws_id":"fakeaws"},{"_action":"create","_component":"internet_gateway","_component_id":"internet_gateway::test-vpc","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway_aws_id":"foo","name":"test-vpc","service":"f2d534bf-e8c9-464e-760e-bf312863a478","tags":{"Name":"test-vpc","ernest.service":"aws6153856"},"type":"internet_gateway.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"network","_component_id":"network::web","_provider":"aws-fake","_state":"completed","availability_zone":"","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway":"test-vpc","internet_gateway_aws_id":"foo","is_public":true,"name":"web","network_aws_id":"foo","range":"10.1.0.0/24","service":"f2d534bf-e8c9-464e-760e-bf312863a478","tags":{"Name":"web","ernest.service":"aws6153856"},"type":"network.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"instance","_component_id":"instance::web-1","_provider":"aws-fake","_state":"completed","assign_elastic_ip":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","elastic_ip":"","iam_instance_profile":null,"iam_instance_profile_arn":null,"image":"ami-6666f915","instance_aws_id":"","instance_type":"e1.micro","ip":"10.1.0.11","key_pair":"some-keypair","name":"web-1","network_aws_id":"foo","network_is_public":false,"network_name":"web","public_ip":"","security_group_aws_ids":["foo"],"security_groups":["web-sg-1"],"service":"f2d534bf-e8c9-464e-760e-bf312863a478","tags":{"Name":"web-1","ernest.instance_group":"web","ernest.service":"aws6153856"},"type":"instance.create.aws-fake.done","user_data":"","volumes":null},{"_action":"create","_component":"firewall","_component_id":"firewall::web-sg-1","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","name":"web-sg-1","rules":{"egress":[{"from_port":80,"ip":"10.1.1.11/32","protocol":"-1","to_port":80}],"ingress":[{"from_port":80,"ip":"10.1.1.11/32","protocol":"-1","to_port":80}]},"security_group_aws_id":"foo","service":"f2d534bf-e8c9-464e-760e-bf312863a478","tags":{"Name":"web-sg-1","ernest.service":"aws6153856"},"type":"firewall.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"}],"edges":[{"destination":"internet_gateway::test-vpc","length":1,"source":"vpc::test-vpc"},{"destination":"network::web","length":1,"source":"internet_gateway::test-vpc"},{"destination":"instance::web-1","length":1,"source":"firewall::web-sg-1"},{"destination":"instance::web-1","length":1,"source":"network::web"},{"destination":"firewall::web-sg-1","length":1,"source":"vpc::test-vpc"},{"destination":"vpc::test-vpc","length":1,"source":"start"},{"destination":"end","length":1,"source":"instance::web-1"}]}', false, '', 0, '0001-01-01 00:00:00+00', '2017-07-21 18:55:08.718314+00', NULL);
INSERT INTO services (id, uuid, group_id, user_id, datacenter_id, name, type, version, status, last_known_error, options, definition, mapping, sync, sync_type, sync_interval, created_at, updated_at, deleted_at) VALUES (19, '71e85de5-d58d-46eb-49c0-7bb2a06b1afc', 3, 3, 1, 'aws9188591', 'aws-fake', '2017-07-21 18:55:15.866332+00', 'done', '', '', 'name: aws9188591
datacenter: fakeaws
vpcs:
- name: test-vpc
  subnet: 1.1.1.1/24
networks:
- name: web
  vpc: test-vpc
  public: true
  subnet: 10.1.0.0/24
instances:
- name: web
  type: e1.micro
  image: ami-6666f915
  network: web
  start_ip: 10.1.0.11
  count: 1
  key_pair: some-keypair
  security_groups:
  - web-sg-1
security_groups:
- name: web-sg-1
  vpc: test-vpc
  egress:
  - from_port: "80"
    ip: 10.1.1.11/32
    protocol: any
    to_port: "80"
  ingress:
  - from_port: "80"
    ip: 10.1.1.11/32
    protocol: any
    to_port: "80"
', '{"id":"71e85de5-d58d-46eb-49c0-7bb2a06b1afc","action":"service.create","name":"aws9188591","options":null,"components":[{"_action":"none","_component":"credentials","_component_id":"credentials::aws","_provider":"aws-fake","_state":"waiting","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","name":"fakeaws","region":"fake"},{"_action":"create","_component":"vpc","_component_id":"vpc::test-vpc","_provider":"aws-fake","_state":"completed","auto_remove":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_region":"fake","datacenter_type":"aws-fake","name":"test-vpc","service":"71e85de5-d58d-46eb-49c0-7bb2a06b1afc","subnet":"1.1.1.1/24","tags":{"Name":"test-vpc","ernest.service":"aws9188591"},"type":"vpc.create.aws-fake.done","vpc_aws_id":"fakeaws"},{"_action":"create","_component":"internet_gateway","_component_id":"internet_gateway::test-vpc","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway_aws_id":"foo","name":"test-vpc","service":"71e85de5-d58d-46eb-49c0-7bb2a06b1afc","tags":{"Name":"test-vpc","ernest.service":"aws9188591"},"type":"internet_gateway.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"firewall","_component_id":"firewall::web-sg-1","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","name":"web-sg-1","rules":{"egress":[{"from_port":80,"ip":"10.1.1.11/32","protocol":"-1","to_port":80}],"ingress":[{"from_port":80,"ip":"10.1.1.11/32","protocol":"-1","to_port":80}]},"security_group_aws_id":"foo","service":"71e85de5-d58d-46eb-49c0-7bb2a06b1afc","tags":{"Name":"web-sg-1","ernest.service":"aws9188591"},"type":"firewall.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"network","_component_id":"network::web","_provider":"aws-fake","_state":"completed","availability_zone":"","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway":"test-vpc","internet_gateway_aws_id":"foo","is_public":true,"name":"web","network_aws_id":"foo","range":"10.1.0.0/24","service":"71e85de5-d58d-46eb-49c0-7bb2a06b1afc","tags":{"Name":"web","ernest.service":"aws9188591"},"type":"network.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"instance","_component_id":"instance::web-1","_provider":"aws-fake","_state":"completed","assign_elastic_ip":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","elastic_ip":"","iam_instance_profile":null,"iam_instance_profile_arn":null,"image":"ami-6666f915","instance_aws_id":"","instance_type":"e1.micro","ip":"10.1.0.11","key_pair":"some-keypair","name":"web-1","network_aws_id":"foo","network_is_public":false,"network_name":"web","public_ip":"","security_group_aws_ids":["foo"],"security_groups":["web-sg-1"],"service":"71e85de5-d58d-46eb-49c0-7bb2a06b1afc","tags":{"Name":"web-1","ernest.instance_group":"web","ernest.service":"aws9188591"},"type":"instance.create.aws-fake.done","user_data":"","volumes":null}],"changes":[{"_action":"create","_component":"vpc","_component_id":"vpc::test-vpc","_provider":"aws-fake","_state":"completed","auto_remove":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_region":"fake","datacenter_type":"aws-fake","name":"test-vpc","service":"71e85de5-d58d-46eb-49c0-7bb2a06b1afc","subnet":"1.1.1.1/24","tags":{"Name":"test-vpc","ernest.service":"aws9188591"},"type":"vpc.create.aws-fake.done","vpc_aws_id":"fakeaws"},{"_action":"create","_component":"internet_gateway","_component_id":"internet_gateway::test-vpc","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway_aws_id":"foo","name":"test-vpc","service":"71e85de5-d58d-46eb-49c0-7bb2a06b1afc","tags":{"Name":"test-vpc","ernest.service":"aws9188591"},"type":"internet_gateway.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"network","_component_id":"network::web","_provider":"aws-fake","_state":"completed","availability_zone":"","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway":"test-vpc","internet_gateway_aws_id":"foo","is_public":true,"name":"web","network_aws_id":"foo","range":"10.1.0.0/24","service":"71e85de5-d58d-46eb-49c0-7bb2a06b1afc","tags":{"Name":"web","ernest.service":"aws9188591"},"type":"network.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"instance","_component_id":"instance::web-1","_provider":"aws-fake","_state":"completed","assign_elastic_ip":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","elastic_ip":"","iam_instance_profile":null,"iam_instance_profile_arn":null,"image":"ami-6666f915","instance_aws_id":"","instance_type":"e1.micro","ip":"10.1.0.11","key_pair":"some-keypair","name":"web-1","network_aws_id":"foo","network_is_public":false,"network_name":"web","public_ip":"","security_group_aws_ids":["foo"],"security_groups":["web-sg-1"],"service":"71e85de5-d58d-46eb-49c0-7bb2a06b1afc","tags":{"Name":"web-1","ernest.instance_group":"web","ernest.service":"aws9188591"},"type":"instance.create.aws-fake.done","user_data":"","volumes":null},{"_action":"create","_component":"firewall","_component_id":"firewall::web-sg-1","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","name":"web-sg-1","rules":{"egress":[{"from_port":80,"ip":"10.1.1.11/32","protocol":"-1","to_port":80}],"ingress":[{"from_port":80,"ip":"10.1.1.11/32","protocol":"-1","to_port":80}]},"security_group_aws_id":"foo","service":"71e85de5-d58d-46eb-49c0-7bb2a06b1afc","tags":{"Name":"web-sg-1","ernest.service":"aws9188591"},"type":"firewall.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"}],"edges":[{"destination":"internet_gateway::test-vpc","length":1,"source":"vpc::test-vpc"},{"destination":"network::web","length":1,"source":"internet_gateway::test-vpc"},{"destination":"instance::web-1","length":1,"source":"firewall::web-sg-1"},{"destination":"instance::web-1","length":1,"source":"network::web"},{"destination":"firewall::web-sg-1","length":1,"source":"vpc::test-vpc"},{"destination":"vpc::test-vpc","length":1,"source":"start"},{"destination":"end","length":1,"source":"instance::web-1"}]}', false, '', 0, '0001-01-01 00:00:00+00', '2017-07-21 18:55:15.936405+00', NULL);
INSERT INTO services (id, uuid, group_id, user_id, datacenter_id, name, type, version, status, last_known_error, options, definition, mapping, sync, sync_type, sync_interval, created_at, updated_at, deleted_at) VALUES (22, '544deac4-b13b-4e3f-63b4-b6f65836fa0e', 3, 3, 1, 'aws9522710', 'aws-fake', '2017-07-21 18:55:29.307738+00', 'done', '', '', 'name: aws9522710
datacenter: fakeaws
vpcs:
- name: test-vpc
  subnet: 1.1.1.1/24
nat_gateways:
- name: db-nat
  public_network: web
networks:
- name: web
  vpc: test-vpc
  subnet: 10.1.0.0/24
  public: true
- name: db-a
  vpc: test-vpc
  subnet: 10.2.0.0/24
  public: false
  availability_zone: fake-1a
  nat_gateway: db-nat
- name: db-b
  vpc: test-vpc
  subnet: 10.3.0.0/24
  public: false
  availability_zone: fake-1b
  nat_gateway: db-nat
instances:
- name: web
  type: e1.micro
  image: ami-6666f915
  network: web
  start_ip: 10.1.0.11
  count: 1
  key_pair: some-keypair
security_groups:
- name: web-sg-1
  vpc: test-vpc
  egress:
  - from_port: "80"
    ip: 10.1.1.11/32
    protocol: any
    to_port: "80"
  ingress:
  - from_port: "80"
    ip: 10.1.1.11/32
    protocol: any
    to_port: "80"
rds_clusters:
- name: aurora
  engine: aurora
  port: 3306
  networks:
  - db-a
  - db-b
  security_groups:
  - web-sg-1
  backups:
    retention: 1
  database_name: test
  database_username: test
  database_password: testpass-2
', '{"id":"544deac4-b13b-4e3f-63b4-b6f65836fa0e","action":"service.create","name":"aws9522710","options":null,"components":[{"_action":"none","_component":"credentials","_component_id":"credentials::aws","_provider":"aws-fake","_state":"waiting","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","name":"fakeaws","region":"fake"},{"_action":"create","_component":"vpc","_component_id":"vpc::test-vpc","_provider":"aws-fake","_state":"completed","auto_remove":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_region":"fake","datacenter_type":"aws-fake","name":"test-vpc","service":"544deac4-b13b-4e3f-63b4-b6f65836fa0e","subnet":"1.1.1.1/24","tags":{"Name":"test-vpc","ernest.service":"aws9522710"},"type":"vpc.create.aws-fake.done","vpc_aws_id":"fakeaws"},{"_action":"create","_component":"internet_gateway","_component_id":"internet_gateway::test-vpc","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway_aws_id":"foo","name":"test-vpc","service":"544deac4-b13b-4e3f-63b4-b6f65836fa0e","tags":{"Name":"test-vpc","ernest.service":"aws9522710"},"type":"internet_gateway.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"network","_component_id":"network::db-a","_provider":"aws-fake","_state":"completed","availability_zone":"fake-1a","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway":"test-vpc","internet_gateway_aws_id":"","is_public":false,"name":"db-a","network_aws_id":"foo","range":"10.2.0.0/24","service":"544deac4-b13b-4e3f-63b4-b6f65836fa0e","tags":{"Name":"db-a","ernest.nat_gateway":"db-nat","ernest.service":"aws9522710"},"type":"network.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"network","_component_id":"network::db-b","_provider":"aws-fake","_state":"completed","availability_zone":"fake-1b","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway":"test-vpc","internet_gateway_aws_id":"","is_public":false,"name":"db-b","network_aws_id":"foo","range":"10.3.0.0/24","service":"544deac4-b13b-4e3f-63b4-b6f65836fa0e","tags":{"Name":"db-b","ernest.nat_gateway":"db-nat","ernest.service":"aws9522710"},"type":"network.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"firewall","_component_id":"firewall::web-sg-1","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","name":"web-sg-1","rules":{"egress":[{"from_port":80,"ip":"10.1.1.11/32","protocol":"-1","to_port":80}],"ingress":[{"from_port":80,"ip":"10.1.1.11/32","protocol":"-1","to_port":80}]},"security_group_aws_id":"foo","service":"544deac4-b13b-4e3f-63b4-b6f65836fa0e","tags":{"Name":"web-sg-1","ernest.service":"aws9522710"},"type":"firewall.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"network","_component_id":"network::web","_provider":"aws-fake","_state":"completed","availability_zone":"","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway":"test-vpc","internet_gateway_aws_id":"foo","is_public":true,"name":"web","network_aws_id":"foo","range":"10.1.0.0/24","service":"544deac4-b13b-4e3f-63b4-b6f65836fa0e","tags":{"Name":"web","ernest.service":"aws9522710"},"type":"network.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"rds_cluster","_component_id":"rds_cluster::aurora","_provider":"aws-fake","_state":"completed","arn":"","availability_zones":null,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","backup_retention":1,"database_name":"test","database_password":"testpass-2","database_username":"test","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","endpoint":"rds-endpoint","engine":"aurora","final_snapshot":false,"name":"aurora","network_aws_ids":["foo","foo"],"networks":["db-a","db-b"],"port":3306,"security_group_aws_ids":["foo"],"security_groups":["web-sg-1"],"service":"544deac4-b13b-4e3f-63b4-b6f65836fa0e","tags":{"ernest.service":"aws9522710"},"type":"rds_cluster.create.aws-fake.done"},{"_action":"create","_component":"instance","_component_id":"instance::web-1","_provider":"aws-fake","_state":"completed","assign_elastic_ip":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","elastic_ip":"","iam_instance_profile":null,"iam_instance_profile_arn":null,"image":"ami-6666f915","instance_aws_id":"","instance_type":"e1.micro","ip":"10.1.0.11","key_pair":"some-keypair","name":"web-1","network_aws_id":"foo","network_is_public":false,"network_name":"web","public_ip":"","security_group_aws_ids":null,"security_groups":null,"service":"544deac4-b13b-4e3f-63b4-b6f65836fa0e","tags":{"Name":"web-1","ernest.instance_group":"web","ernest.service":"aws9522710"},"type":"instance.create.aws-fake.done","user_data":"","volumes":null},{"_action":"create","_component":"nat","_component_id":"nat::db-nat","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway_id":"","name":"db-nat","nat_gateway_allocation_id":"","nat_gateway_allocation_ip":"","nat_gateway_aws_id":"","public_network":"web","public_network_aws_id":"foo","routed_networks":["db-a","db-b"],"routed_networks_aws_ids":["foo","foo"],"service":"544deac4-b13b-4e3f-63b4-b6f65836fa0e","tags":null,"type":"nat.create.aws-fake.done","vpc_id":"fakeaws"}],"changes":[{"_action":"create","_component":"vpc","_component_id":"vpc::test-vpc","_provider":"aws-fake","_state":"completed","auto_remove":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_region":"fake","datacenter_type":"aws-fake","name":"test-vpc","service":"544deac4-b13b-4e3f-63b4-b6f65836fa0e","subnet":"1.1.1.1/24","tags":{"Name":"test-vpc","ernest.service":"aws9522710"},"type":"vpc.create.aws-fake.done","vpc_aws_id":"fakeaws"},{"_action":"create","_component":"internet_gateway","_component_id":"internet_gateway::test-vpc","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway_aws_id":"foo","name":"test-vpc","service":"544deac4-b13b-4e3f-63b4-b6f65836fa0e","tags":{"Name":"test-vpc","ernest.service":"aws9522710"},"type":"internet_gateway.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"network","_component_id":"network::web","_provider":"aws-fake","_state":"completed","availability_zone":"","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway":"test-vpc","internet_gateway_aws_id":"foo","is_public":true,"name":"web","network_aws_id":"foo","range":"10.1.0.0/24","service":"544deac4-b13b-4e3f-63b4-b6f65836fa0e","tags":{"Name":"web","ernest.service":"aws9522710"},"type":"network.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"network","_component_id":"network::db-a","_provider":"aws-fake","_state":"completed","availability_zone":"fake-1a","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway":"test-vpc","internet_gateway_aws_id":"","is_public":false,"name":"db-a","network_aws_id":"foo","range":"10.2.0.0/24","service":"544deac4-b13b-4e3f-63b4-b6f65836fa0e","tags":{"Name":"db-a","ernest.nat_gateway":"db-nat","ernest.service":"aws9522710"},"type":"network.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"network","_component_id":"network::db-b","_provider":"aws-fake","_state":"completed","availability_zone":"fake-1b","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway":"test-vpc","internet_gateway_aws_id":"","is_public":false,"name":"db-b","network_aws_id":"foo","range":"10.3.0.0/24","service":"544deac4-b13b-4e3f-63b4-b6f65836fa0e","tags":{"Name":"db-b","ernest.nat_gateway":"db-nat","ernest.service":"aws9522710"},"type":"network.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"instance","_component_id":"instance::web-1","_provider":"aws-fake","_state":"completed","assign_elastic_ip":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","elastic_ip":"","iam_instance_profile":null,"iam_instance_profile_arn":null,"image":"ami-6666f915","instance_aws_id":"","instance_type":"e1.micro","ip":"10.1.0.11","key_pair":"some-keypair","name":"web-1","network_aws_id":"foo","network_is_public":false,"network_name":"web","public_ip":"","security_group_aws_ids":null,"security_groups":null,"service":"544deac4-b13b-4e3f-63b4-b6f65836fa0e","tags":{"Name":"web-1","ernest.instance_group":"web","ernest.service":"aws9522710"},"type":"instance.create.aws-fake.done","user_data":"","volumes":null},{"_action":"create","_component":"firewall","_component_id":"firewall::web-sg-1","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","name":"web-sg-1","rules":{"egress":[{"from_port":80,"ip":"10.1.1.11/32","protocol":"-1","to_port":80}],"ingress":[{"from_port":80,"ip":"10.1.1.11/32","protocol":"-1","to_port":80}]},"security_group_aws_id":"foo","service":"544deac4-b13b-4e3f-63b4-b6f65836fa0e","tags":{"Name":"web-sg-1","ernest.service":"aws9522710"},"type":"firewall.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"nat","_component_id":"nat::db-nat","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway_id":"","name":"db-nat","nat_gateway_allocation_id":"","nat_gateway_allocation_ip":"","nat_gateway_aws_id":"","public_network":"web","public_network_aws_id":"foo","routed_networks":["db-a","db-b"],"routed_networks_aws_ids":["foo","foo"],"service":"544deac4-b13b-4e3f-63b4-b6f65836fa0e","tags":null,"type":"nat.create.aws-fake.done","vpc_id":"fakeaws"},{"_action":"create","_component":"rds_cluster","_component_id":"rds_cluster::aurora","_provider":"aws-fake","_state":"completed","arn":"","availability_zones":null,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","backup_retention":1,"database_name":"test","database_password":"testpass-2","database_username":"test","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","endpoint":"rds-endpoint","engine":"aurora","final_snapshot":false,"name":"aurora","network_aws_ids":["foo","foo"],"networks":["db-a","db-b"],"port":3306,"security_group_aws_ids":["foo"],"security_groups":["web-sg-1"],"service":"544deac4-b13b-4e3f-63b4-b6f65836fa0e","tags":{"ernest.service":"aws9522710"},"type":"rds_cluster.create.aws-fake.done"}],"edges":[{"destination":"internet_gateway::test-vpc","length":1,"source":"vpc::test-vpc"},{"destination":"network::web","length":1,"source":"internet_gateway::test-vpc"},{"destination":"network::db-a","length":1,"source":"vpc::test-vpc"},{"destination":"network::db-b","length":1,"source":"vpc::test-vpc"},{"destination":"instance::web-1","length":1,"source":"network::web"},{"destination":"firewall::web-sg-1","length":1,"source":"vpc::test-vpc"},{"destination":"nat::db-nat","length":1,"source":"network::db-a"},{"destination":"nat::db-nat","length":1,"source":"network::db-b"},{"destination":"nat::db-nat","length":1,"source":"network::web"},{"destination":"rds_cluster::aurora","length":1,"source":"firewall::web-sg-1"},{"destination":"rds_cluster::aurora","length":1,"source":"network::db-a"},{"destination":"rds_cluster::aurora","length":1,"source":"network::db-b"},{"destination":"vpc::test-vpc","length":1,"source":"start"},{"destination":"end","length":1,"source":"instance::web-1"},{"destination":"end","length":1,"source":"nat::db-nat"},{"destination":"end","length":1,"source":"rds_cluster::aurora"}]}', false, '', 0, '0001-01-01 00:00:00+00', '2017-07-21 18:55:29.465575+00', NULL);
INSERT INTO services (id, uuid, group_id, user_id, datacenter_id, name, type, version, status, last_known_error, options, definition, mapping, sync, sync_type, sync_interval, created_at, updated_at, deleted_at) VALUES (23, 'b9d3a85e-8520-4bf0-5fe1-76c80c7ab6b4', 3, 3, 1, 'aws9522710', 'aws-fake', '2017-07-21 18:55:30.49517+00', 'done', '', '', 'name: aws9522710
datacenter: fakeaws
vpcs:
- name: test-vpc
  subnet: 1.1.1.1/24
nat_gateways:
- name: db-nat
  public_network: web
networks:
- name: web
  vpc: test-vpc
  subnet: 10.1.0.0/24
  public: true
- name: db-a
  vpc: test-vpc
  subnet: 10.2.0.0/24
  public: false
  availability_zone: fake-1a
  nat_gateway: db-nat
- name: db-b
  vpc: test-vpc
  subnet: 10.3.0.0/24
  public: false
  availability_zone: fake-1b
  nat_gateway: db-nat
instances:
- name: web
  type: e1.micro
  image: ami-6666f915
  network: web
  start_ip: 10.1.0.11
  count: 1
  key_pair: some-keypair
security_groups:
- name: web-sg-1
  vpc: test-vpc
  egress:
  - from_port: "80"
    ip: 10.1.1.11/32
    protocol: any
    to_port: "80"
  ingress:
  - from_port: "80"
    ip: 10.1.1.11/32
    protocol: any
    to_port: "80"
', '{"id":"b9d3a85e-8520-4bf0-5fe1-76c80c7ab6b4","action":"service.create","name":"aws9522710","options":null,"components":[{"_action":"create","_component":"vpc","_component_id":"vpc::test-vpc","_provider":"aws-fake","_state":"completed","auto_remove":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_region":"fake","datacenter_type":"aws-fake","name":"test-vpc","service":"544deac4-b13b-4e3f-63b4-b6f65836fa0e","subnet":"1.1.1.1/24","tags":{"Name":"test-vpc","ernest.service":"aws9522710"},"vpc_aws_id":"fakeaws"},{"_action":"create","_component":"internet_gateway","_component_id":"internet_gateway::test-vpc","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway_aws_id":"foo","name":"test-vpc","service":"544deac4-b13b-4e3f-63b4-b6f65836fa0e","tags":{"Name":"test-vpc","ernest.service":"aws9522710"},"vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"network","_component_id":"network::db-a","_provider":"aws-fake","_state":"completed","availability_zone":"fake-1a","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway":"test-vpc","internet_gateway_aws_id":"","is_public":false,"name":"db-a","network_aws_id":"foo","range":"10.2.0.0/24","service":"544deac4-b13b-4e3f-63b4-b6f65836fa0e","tags":{"Name":"db-a","ernest.nat_gateway":"db-nat","ernest.service":"aws9522710"},"vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"network","_component_id":"network::db-b","_provider":"aws-fake","_state":"completed","availability_zone":"fake-1b","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway":"test-vpc","internet_gateway_aws_id":"","is_public":false,"name":"db-b","network_aws_id":"foo","range":"10.3.0.0/24","service":"544deac4-b13b-4e3f-63b4-b6f65836fa0e","tags":{"Name":"db-b","ernest.nat_gateway":"db-nat","ernest.service":"aws9522710"},"vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"firewall","_component_id":"firewall::web-sg-1","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","name":"web-sg-1","rules":{"egress":[{"from_port":80,"ip":"10.1.1.11/32","protocol":"-1","to_port":80}],"ingress":[{"from_port":80,"ip":"10.1.1.11/32","protocol":"-1","to_port":80}]},"security_group_aws_id":"foo","service":"544deac4-b13b-4e3f-63b4-b6f65836fa0e","tags":{"Name":"web-sg-1","ernest.service":"aws9522710"},"vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"network","_component_id":"network::web","_provider":"aws-fake","_state":"completed","availability_zone":"","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway":"test-vpc","internet_gateway_aws_id":"foo","is_public":true,"name":"web","network_aws_id":"foo","range":"10.1.0.0/24","service":"544deac4-b13b-4e3f-63b4-b6f65836fa0e","tags":{"Name":"web","ernest.service":"aws9522710"},"vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"instance","_component_id":"instance::web-1","_provider":"aws-fake","_state":"completed","assign_elastic_ip":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","elastic_ip":"","iam_instance_profile":null,"iam_instance_profile_arn":null,"image":"ami-6666f915","instance_aws_id":"","instance_type":"e1.micro","ip":"10.1.0.11","key_pair":"some-keypair","name":"web-1","network_aws_id":"foo","network_is_public":false,"network_name":"web","public_ip":"","security_group_aws_ids":null,"security_groups":null,"service":"544deac4-b13b-4e3f-63b4-b6f65836fa0e","tags":{"Name":"web-1","ernest.instance_group":"web","ernest.service":"aws9522710"},"user_data":"","volumes":null},{"_action":"create","_component":"nat","_component_id":"nat::db-nat","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway_id":"","name":"db-nat","nat_gateway_allocation_id":"","nat_gateway_allocation_ip":"","nat_gateway_aws_id":"","public_network":"web","public_network_aws_id":"foo","routed_networks":["db-a","db-b"],"routed_networks_aws_ids":["foo","foo"],"service":"544deac4-b13b-4e3f-63b4-b6f65836fa0e","tags":null,"vpc_id":"fakeaws"},{"_action":"none","_component":"credentials","_component_id":"credentials::aws","_provider":"aws-fake","_state":"waiting","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","name":"fakeaws","region":"fake"}],"changes":[{"_action":"delete","_component":"rds_cluster","_component_id":"rds_cluster::aurora","_provider":"aws-fake","_state":"completed","arn":"","availability_zones":null,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","backup_retention":1,"database_name":"test","database_password":"testpass-2","database_username":"test","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","endpoint":"rds-endpoint","engine":"aurora","final_snapshot":false,"name":"aurora","network_aws_ids":["foo","foo"],"networks":["db-a","db-b"],"port":3306,"security_group_aws_ids":["foo"],"security_groups":["web-sg-1"],"service":"b9d3a85e-8520-4bf0-5fe1-76c80c7ab6b4","tags":{"ernest.service":"aws9522710"},"type":"rds_cluster.delete.aws-fake.done"}],"edges":[{"destination":"rds_cluster::aurora","length":1,"source":"start"},{"destination":"end","length":1,"source":"rds_cluster::aurora"}]}', false, '', 0, '0001-01-01 00:00:00+00', '2017-07-21 18:55:30.528441+00', NULL);
INSERT INTO services (id, uuid, group_id, user_id, datacenter_id, name, type, version, status, last_known_error, options, definition, mapping, sync, sync_type, sync_interval, created_at, updated_at, deleted_at) VALUES (20, '2bcb8602-1509-45b7-693f-711c05cf1e83', 3, 3, 1, 'aws3716033', 'aws-fake', '2017-07-21 18:55:22.069901+00', 'done', '', '', 'name: aws3716033
datacenter: fakeaws
vpcs:
- name: test-vpc
  subnet: 1.1.1.1/24
networks:
- name: web
  vpc: test-vpc
  public: true
  subnet: 10.1.0.0/24
instances:
- name: web
  type: e1.micro
  image: ami-6666f915
  network: web
  start_ip: 10.1.0.11
  count: 2
  key_pair: some-keypair
  security_groups:
  - web-sg-1
security_groups:
- name: web-sg-1
  vpc: test-vpc
  egress:
  - from_port: "80"
    ip: 10.1.1.11/32
    protocol: any
    to_port: "80"
  ingress:
  - from_port: "80"
    ip: 10.1.1.11/32
    protocol: any
    to_port: "80"
', '{"id":"2bcb8602-1509-45b7-693f-711c05cf1e83","action":"service.create","name":"aws3716033","options":null,"components":[{"_action":"none","_component":"credentials","_component_id":"credentials::aws","_provider":"aws-fake","_state":"waiting","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","name":"fakeaws","region":"fake"},{"_action":"create","_component":"vpc","_component_id":"vpc::test-vpc","_provider":"aws-fake","_state":"completed","auto_remove":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_region":"fake","datacenter_type":"aws-fake","name":"test-vpc","service":"2bcb8602-1509-45b7-693f-711c05cf1e83","subnet":"1.1.1.1/24","tags":{"Name":"test-vpc","ernest.service":"aws3716033"},"type":"vpc.create.aws-fake.done","vpc_aws_id":"fakeaws"},{"_action":"create","_component":"internet_gateway","_component_id":"internet_gateway::test-vpc","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway_aws_id":"foo","name":"test-vpc","service":"2bcb8602-1509-45b7-693f-711c05cf1e83","tags":{"Name":"test-vpc","ernest.service":"aws3716033"},"type":"internet_gateway.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"firewall","_component_id":"firewall::web-sg-1","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","name":"web-sg-1","rules":{"egress":[{"from_port":80,"ip":"10.1.1.11/32","protocol":"-1","to_port":80}],"ingress":[{"from_port":80,"ip":"10.1.1.11/32","protocol":"-1","to_port":80}]},"security_group_aws_id":"foo","service":"2bcb8602-1509-45b7-693f-711c05cf1e83","tags":{"Name":"web-sg-1","ernest.service":"aws3716033"},"type":"firewall.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"network","_component_id":"network::web","_provider":"aws-fake","_state":"completed","availability_zone":"","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway":"test-vpc","internet_gateway_aws_id":"foo","is_public":true,"name":"web","network_aws_id":"foo","range":"10.1.0.0/24","service":"2bcb8602-1509-45b7-693f-711c05cf1e83","tags":{"Name":"web","ernest.service":"aws3716033"},"type":"network.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"instance","_component_id":"instance::web-1","_provider":"aws-fake","_state":"completed","assign_elastic_ip":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","elastic_ip":"","iam_instance_profile":null,"iam_instance_profile_arn":null,"image":"ami-6666f915","instance_aws_id":"","instance_type":"e1.micro","ip":"10.1.0.11","key_pair":"some-keypair","name":"web-1","network_aws_id":"foo","network_is_public":false,"network_name":"web","public_ip":"","security_group_aws_ids":["foo"],"security_groups":["web-sg-1"],"service":"2bcb8602-1509-45b7-693f-711c05cf1e83","tags":{"Name":"web-1","ernest.instance_group":"web","ernest.service":"aws3716033"},"type":"instance.create.aws-fake.done","user_data":"","volumes":null},{"_action":"create","_component":"instance","_component_id":"instance::web-2","_provider":"aws-fake","_state":"completed","assign_elastic_ip":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","elastic_ip":"","iam_instance_profile":null,"iam_instance_profile_arn":null,"image":"ami-6666f915","instance_aws_id":"","instance_type":"e1.micro","ip":"10.1.0.12","key_pair":"some-keypair","name":"web-2","network_aws_id":"foo","network_is_public":false,"network_name":"web","public_ip":"","security_group_aws_ids":["foo"],"security_groups":["web-sg-1"],"service":"2bcb8602-1509-45b7-693f-711c05cf1e83","tags":{"Name":"web-2","ernest.instance_group":"web","ernest.service":"aws3716033"},"type":"instance.create.aws-fake.done","user_data":"","volumes":null}],"changes":[{"_action":"create","_component":"vpc","_component_id":"vpc::test-vpc","_provider":"aws-fake","_state":"completed","auto_remove":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_region":"fake","datacenter_type":"aws-fake","name":"test-vpc","service":"2bcb8602-1509-45b7-693f-711c05cf1e83","subnet":"1.1.1.1/24","tags":{"Name":"test-vpc","ernest.service":"aws3716033"},"type":"vpc.create.aws-fake.done","vpc_aws_id":"fakeaws"},{"_action":"create","_component":"internet_gateway","_component_id":"internet_gateway::test-vpc","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway_aws_id":"foo","name":"test-vpc","service":"2bcb8602-1509-45b7-693f-711c05cf1e83","tags":{"Name":"test-vpc","ernest.service":"aws3716033"},"type":"internet_gateway.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"network","_component_id":"network::web","_provider":"aws-fake","_state":"completed","availability_zone":"","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway":"test-vpc","internet_gateway_aws_id":"foo","is_public":true,"name":"web","network_aws_id":"foo","range":"10.1.0.0/24","service":"2bcb8602-1509-45b7-693f-711c05cf1e83","tags":{"Name":"web","ernest.service":"aws3716033"},"type":"network.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"instance","_component_id":"instance::web-1","_provider":"aws-fake","_state":"completed","assign_elastic_ip":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","elastic_ip":"","iam_instance_profile":null,"iam_instance_profile_arn":null,"image":"ami-6666f915","instance_aws_id":"","instance_type":"e1.micro","ip":"10.1.0.11","key_pair":"some-keypair","name":"web-1","network_aws_id":"foo","network_is_public":false,"network_name":"web","public_ip":"","security_group_aws_ids":["foo"],"security_groups":["web-sg-1"],"service":"2bcb8602-1509-45b7-693f-711c05cf1e83","tags":{"Name":"web-1","ernest.instance_group":"web","ernest.service":"aws3716033"},"type":"instance.create.aws-fake.done","user_data":"","volumes":null},{"_action":"create","_component":"instance","_component_id":"instance::web-2","_provider":"aws-fake","_state":"completed","assign_elastic_ip":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","elastic_ip":"","iam_instance_profile":null,"iam_instance_profile_arn":null,"image":"ami-6666f915","instance_aws_id":"","instance_type":"e1.micro","ip":"10.1.0.12","key_pair":"some-keypair","name":"web-2","network_aws_id":"foo","network_is_public":false,"network_name":"web","public_ip":"","security_group_aws_ids":["foo"],"security_groups":["web-sg-1"],"service":"2bcb8602-1509-45b7-693f-711c05cf1e83","tags":{"Name":"web-2","ernest.instance_group":"web","ernest.service":"aws3716033"},"type":"instance.create.aws-fake.done","user_data":"","volumes":null},{"_action":"create","_component":"firewall","_component_id":"firewall::web-sg-1","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","name":"web-sg-1","rules":{"egress":[{"from_port":80,"ip":"10.1.1.11/32","protocol":"-1","to_port":80}],"ingress":[{"from_port":80,"ip":"10.1.1.11/32","protocol":"-1","to_port":80}]},"security_group_aws_id":"foo","service":"2bcb8602-1509-45b7-693f-711c05cf1e83","tags":{"Name":"web-sg-1","ernest.service":"aws3716033"},"type":"firewall.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"}],"edges":[{"destination":"internet_gateway::test-vpc","length":1,"source":"vpc::test-vpc"},{"destination":"network::web","length":1,"source":"internet_gateway::test-vpc"},{"destination":"instance::web-1","length":1,"source":"firewall::web-sg-1"},{"destination":"instance::web-1","length":1,"source":"network::web"},{"destination":"instance::web-2","length":1,"source":"firewall::web-sg-1"},{"destination":"instance::web-2","length":1,"source":"network::web"},{"destination":"firewall::web-sg-1","length":1,"source":"vpc::test-vpc"},{"destination":"vpc::test-vpc","length":1,"source":"start"},{"destination":"end","length":1,"source":"instance::web-1"},{"destination":"end","length":1,"source":"instance::web-2"}]}', false, '', 0, '0001-01-01 00:00:00+00', '2017-07-21 18:55:22.158393+00', NULL);
INSERT INTO services (id, uuid, group_id, user_id, datacenter_id, name, type, version, status, last_known_error, options, definition, mapping, sync, sync_type, sync_interval, created_at, updated_at, deleted_at) VALUES (21, 'f7156733-e656-4fc5-4149-25fb2de15051', 3, 3, 1, 'aws3716033', 'aws-fake', '2017-07-21 18:55:23.186331+00', 'done', '', '', 'name: aws3716033
datacenter: fakeaws
vpcs:
- name: test-vpc
  subnet: 1.1.1.1/24
networks:
- name: web
  vpc: test-vpc
  public: true
  subnet: 10.1.0.0/24
instances:
- name: web
  type: e1.micro
  image: ami-6666f915
  network: web
  start_ip: 10.1.0.11
  count: 1
  key_pair: some-keypair
  security_groups:
  - web-sg-1
security_groups:
- name: web-sg-1
  vpc: test-vpc
  egress:
  - from_port: "80"
    ip: 10.1.1.11/32
    protocol: any
    to_port: "80"
  ingress:
  - from_port: "80"
    ip: 10.1.1.11/32
    protocol: any
    to_port: "80"
', '{"id":"f7156733-e656-4fc5-4149-25fb2de15051","action":"service.create","name":"aws3716033","options":null,"components":[{"_action":"create","_component":"vpc","_component_id":"vpc::test-vpc","_provider":"aws-fake","_state":"completed","auto_remove":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_region":"fake","datacenter_type":"aws-fake","name":"test-vpc","service":"2bcb8602-1509-45b7-693f-711c05cf1e83","subnet":"1.1.1.1/24","tags":{"Name":"test-vpc","ernest.service":"aws3716033"},"vpc_aws_id":"fakeaws"},{"_action":"create","_component":"internet_gateway","_component_id":"internet_gateway::test-vpc","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway_aws_id":"foo","name":"test-vpc","service":"2bcb8602-1509-45b7-693f-711c05cf1e83","tags":{"Name":"test-vpc","ernest.service":"aws3716033"},"vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"firewall","_component_id":"firewall::web-sg-1","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","name":"web-sg-1","rules":{"egress":[{"from_port":80,"ip":"10.1.1.11/32","protocol":"-1","to_port":80}],"ingress":[{"from_port":80,"ip":"10.1.1.11/32","protocol":"-1","to_port":80}]},"security_group_aws_id":"foo","service":"2bcb8602-1509-45b7-693f-711c05cf1e83","tags":{"Name":"web-sg-1","ernest.service":"aws3716033"},"vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"network","_component_id":"network::web","_provider":"aws-fake","_state":"completed","availability_zone":"","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway":"test-vpc","internet_gateway_aws_id":"foo","is_public":true,"name":"web","network_aws_id":"foo","range":"10.1.0.0/24","service":"2bcb8602-1509-45b7-693f-711c05cf1e83","tags":{"Name":"web","ernest.service":"aws3716033"},"vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"instance","_component_id":"instance::web-1","_provider":"aws-fake","_state":"completed","assign_elastic_ip":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","elastic_ip":"","iam_instance_profile":null,"iam_instance_profile_arn":null,"image":"ami-6666f915","instance_aws_id":"","instance_type":"e1.micro","ip":"10.1.0.11","key_pair":"some-keypair","name":"web-1","network_aws_id":"foo","network_is_public":false,"network_name":"web","public_ip":"","security_group_aws_ids":["foo"],"security_groups":["web-sg-1"],"service":"2bcb8602-1509-45b7-693f-711c05cf1e83","tags":{"Name":"web-1","ernest.instance_group":"web","ernest.service":"aws3716033"},"user_data":"","volumes":null},{"_action":"none","_component":"credentials","_component_id":"credentials::aws","_provider":"aws-fake","_state":"waiting","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","name":"fakeaws","region":"fake"}],"changes":[{"_action":"delete","_component":"instance","_component_id":"instance::web-2","_provider":"aws-fake","_state":"completed","assign_elastic_ip":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","elastic_ip":"","iam_instance_profile":null,"iam_instance_profile_arn":null,"image":"ami-6666f915","instance_aws_id":"","instance_type":"e1.micro","ip":"10.1.0.12","key_pair":"some-keypair","name":"web-2","network_aws_id":"foo","network_is_public":false,"network_name":"web","public_ip":"","security_group_aws_ids":["foo"],"security_groups":["web-sg-1"],"service":"f7156733-e656-4fc5-4149-25fb2de15051","tags":{"Name":"web-2","ernest.instance_group":"web","ernest.service":"aws3716033"},"type":"instance.delete.aws-fake.done","user_data":"","volumes":null}],"edges":[{"destination":"instance::web-2","length":1,"source":"start"},{"destination":"end","length":1,"source":"instance::web-2"}]}', false, '', 0, '0001-01-01 00:00:00+00', '2017-07-21 18:55:23.210551+00', NULL);
INSERT INTO services (id, uuid, group_id, user_id, datacenter_id, name, type, version, status, last_known_error, options, definition, mapping, sync, sync_type, sync_interval, created_at, updated_at, deleted_at) VALUES (30, 'a0d8d660-3e60-4dcb-5afa-20268c213cdb', 3, 3, 1, 'aws5039544', 'aws-fake', '2017-07-21 18:55:58.444112+00', 'done', '', '', 'name: aws5039544
datacenter: fakeaws
vpcs:
- name: test-vpc
  subnet: 1.1.1.1/24
nat_gateways:
- name: db-nat
  public_network: web
networks:
- name: web
  vpc: test-vpc
  subnet: 10.1.0.0/24
  public: true
- name: db
  vpc: test-vpc
  subnet: 10.2.0.0/24
  public: false
  nat_gateway: db-nat
instances:
- name: web
  type: e1.micro
  image: ami-6666f915
  network: web
  start_ip: 10.1.0.11
  count: 1
  key_pair: some-keypair
security_groups:
- name: web-sg-1
  vpc: test-vpc
  egress:
  - from_port: "80"
    ip: 10.1.1.11/32
    protocol: any
    to_port: "80"
  ingress:
  - from_port: "80"
    ip: 10.1.1.11/32
    protocol: any
    to_port: "80"
loadbalancers:
- name: elb-1
  private: true
  instances:
  - web
  listeners:
  - from_port: 80
    to_port: 80
    protocol: http
  - from_port: 443
    to_port: 443
    protocol: https
    ssl_cert: foo
  security_groups:
  - web-sg-1
s3_buckets:
- name: bucket-1
  bucket_location: eu-west-1
  grantees:
  - id: foo@r3labs.io
    type: emailaddress
    permissions: full_control
  - id: bar@r3labs.io
    type: emailaddress
    permissions: write
', '{"id":"a0d8d660-3e60-4dcb-5afa-20268c213cdb","action":"service.create","name":"aws5039544","options":null,"components":[{"_action":"none","_component":"credentials","_component_id":"credentials::aws","_provider":"aws-fake","_state":"waiting","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","name":"fakeaws","region":"fake"},{"_action":"create","_component":"vpc","_component_id":"vpc::test-vpc","_provider":"aws-fake","_state":"completed","auto_remove":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_region":"fake","datacenter_type":"aws-fake","name":"test-vpc","service":"a0d8d660-3e60-4dcb-5afa-20268c213cdb","subnet":"1.1.1.1/24","tags":{"Name":"test-vpc","ernest.service":"aws5039544"},"type":"vpc.create.aws-fake.done","vpc_aws_id":"fakeaws"},{"_action":"create","_component":"s3","_component_id":"s3::bucket-1","_provider":"aws-fake","_state":"completed","acl":"","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","bucket_location":"eu-west-1","bucket_uri":"","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","grantees":[{"id":"foo@r3labs.io","permissions":"FULL_CONTROL","type":"emailaddress"},{"id":"bar@r3labs.io","permissions":"WRITE","type":"emailaddress"}],"name":"bucket-1","service":"a0d8d660-3e60-4dcb-5afa-20268c213cdb","tags":{"ernest.service":"aws5039544"},"type":"s3.create.aws-fake.done"},{"_action":"create","_component":"internet_gateway","_component_id":"internet_gateway::test-vpc","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway_aws_id":"foo","name":"test-vpc","service":"a0d8d660-3e60-4dcb-5afa-20268c213cdb","tags":{"Name":"test-vpc","ernest.service":"aws5039544"},"type":"internet_gateway.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"network","_component_id":"network::db","_provider":"aws-fake","_state":"completed","availability_zone":"","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway":"test-vpc","internet_gateway_aws_id":"","is_public":false,"name":"db","network_aws_id":"foo","range":"10.2.0.0/24","service":"a0d8d660-3e60-4dcb-5afa-20268c213cdb","tags":{"Name":"db","ernest.nat_gateway":"db-nat","ernest.service":"aws5039544"},"type":"network.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"firewall","_component_id":"firewall::web-sg-1","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","name":"web-sg-1","rules":{"egress":[{"from_port":80,"ip":"10.1.1.11/32","protocol":"-1","to_port":80}],"ingress":[{"from_port":80,"ip":"10.1.1.11/32","protocol":"-1","to_port":80}]},"security_group_aws_id":"foo","service":"a0d8d660-3e60-4dcb-5afa-20268c213cdb","tags":{"Name":"web-sg-1","ernest.service":"aws5039544"},"type":"firewall.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"network","_component_id":"network::web","_provider":"aws-fake","_state":"completed","availability_zone":"","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway":"test-vpc","internet_gateway_aws_id":"foo","is_public":true,"name":"web","network_aws_id":"foo","range":"10.1.0.0/24","service":"a0d8d660-3e60-4dcb-5afa-20268c213cdb","tags":{"Name":"web","ernest.service":"aws5039544"},"type":"network.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"instance","_component_id":"instance::web-1","_provider":"aws-fake","_state":"completed","assign_elastic_ip":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","elastic_ip":"","iam_instance_profile":null,"iam_instance_profile_arn":null,"image":"ami-6666f915","instance_aws_id":"","instance_type":"e1.micro","ip":"10.1.0.11","key_pair":"some-keypair","name":"web-1","network_aws_id":"foo","network_is_public":false,"network_name":"web","public_ip":"","security_group_aws_ids":null,"security_groups":null,"service":"a0d8d660-3e60-4dcb-5afa-20268c213cdb","tags":{"Name":"web-1","ernest.instance_group":"web","ernest.service":"aws5039544"},"type":"instance.create.aws-fake.done","user_data":"","volumes":null},{"_action":"create","_component":"nat","_component_id":"nat::db-nat","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway_id":"","name":"db-nat","nat_gateway_allocation_id":"","nat_gateway_allocation_ip":"","nat_gateway_aws_id":"","public_network":"web","public_network_aws_id":"foo","routed_networks":["db"],"routed_networks_aws_ids":["foo"],"service":"a0d8d660-3e60-4dcb-5afa-20268c213cdb","tags":null,"type":"nat.create.aws-fake.done","vpc_id":"fakeaws"},{"_action":"create","_component":"elb","_component_id":"elb::elb-1","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","dns_name":"fake-dns-name","instance_aws_ids":["$(components.#[_component_id=\"instance::web-1\"].instance_aws_id)"],"instance_names":["web-1"],"instances":["web"],"is_private":true,"listeners":[{"from_port":80,"protocol":"HTTP","ssl_cert":"","to_port":80},{"from_port":443,"protocol":"HTTPS","ssl_cert":"foo","to_port":443}],"name":"elb-1","network_aws_ids":null,"networks":null,"security_group_aws_ids":["foo"],"security_groups":["web-sg-1"],"service":"a0d8d660-3e60-4dcb-5afa-20268c213cdb","tags":{"ernest.service":"aws5039544"},"type":"elb.create.aws-fake.done"}],"changes":[{"_action":"create","_component":"vpc","_component_id":"vpc::test-vpc","_provider":"aws-fake","_state":"completed","auto_remove":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_region":"fake","datacenter_type":"aws-fake","name":"test-vpc","service":"a0d8d660-3e60-4dcb-5afa-20268c213cdb","subnet":"1.1.1.1/24","tags":{"Name":"test-vpc","ernest.service":"aws5039544"},"type":"vpc.create.aws-fake.done","vpc_aws_id":"fakeaws"},{"_action":"create","_component":"internet_gateway","_component_id":"internet_gateway::test-vpc","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway_aws_id":"foo","name":"test-vpc","service":"a0d8d660-3e60-4dcb-5afa-20268c213cdb","tags":{"Name":"test-vpc","ernest.service":"aws5039544"},"type":"internet_gateway.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"network","_component_id":"network::web","_provider":"aws-fake","_state":"completed","availability_zone":"","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway":"test-vpc","internet_gateway_aws_id":"foo","is_public":true,"name":"web","network_aws_id":"foo","range":"10.1.0.0/24","service":"a0d8d660-3e60-4dcb-5afa-20268c213cdb","tags":{"Name":"web","ernest.service":"aws5039544"},"type":"network.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"network","_component_id":"network::db","_provider":"aws-fake","_state":"completed","availability_zone":"","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway":"test-vpc","internet_gateway_aws_id":"","is_public":false,"name":"db","network_aws_id":"foo","range":"10.2.0.0/24","service":"a0d8d660-3e60-4dcb-5afa-20268c213cdb","tags":{"Name":"db","ernest.nat_gateway":"db-nat","ernest.service":"aws5039544"},"type":"network.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"instance","_component_id":"instance::web-1","_provider":"aws-fake","_state":"completed","assign_elastic_ip":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","elastic_ip":"","iam_instance_profile":null,"iam_instance_profile_arn":null,"image":"ami-6666f915","instance_aws_id":"","instance_type":"e1.micro","ip":"10.1.0.11","key_pair":"some-keypair","name":"web-1","network_aws_id":"foo","network_is_public":false,"network_name":"web","public_ip":"","security_group_aws_ids":null,"security_groups":null,"service":"a0d8d660-3e60-4dcb-5afa-20268c213cdb","tags":{"Name":"web-1","ernest.instance_group":"web","ernest.service":"aws5039544"},"type":"instance.create.aws-fake.done","user_data":"","volumes":null},{"_action":"create","_component":"firewall","_component_id":"firewall::web-sg-1","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","name":"web-sg-1","rules":{"egress":[{"from_port":80,"ip":"10.1.1.11/32","protocol":"-1","to_port":80}],"ingress":[{"from_port":80,"ip":"10.1.1.11/32","protocol":"-1","to_port":80}]},"security_group_aws_id":"foo","service":"a0d8d660-3e60-4dcb-5afa-20268c213cdb","tags":{"Name":"web-sg-1","ernest.service":"aws5039544"},"type":"firewall.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"elb","_component_id":"elb::elb-1","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","dns_name":"fake-dns-name","instance_aws_ids":["$(components.#[_component_id=\"instance::web-1\"].instance_aws_id)"],"instance_names":["web-1"],"instances":["web"],"is_private":true,"listeners":[{"from_port":80,"protocol":"HTTP","ssl_cert":"","to_port":80},{"from_port":443,"protocol":"HTTPS","ssl_cert":"foo","to_port":443}],"name":"elb-1","network_aws_ids":null,"networks":null,"security_group_aws_ids":["foo"],"security_groups":["web-sg-1"],"service":"a0d8d660-3e60-4dcb-5afa-20268c213cdb","tags":{"ernest.service":"aws5039544"},"type":"elb.create.aws-fake.done"},{"_action":"create","_component":"nat","_component_id":"nat::db-nat","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway_id":"","name":"db-nat","nat_gateway_allocation_id":"","nat_gateway_allocation_ip":"","nat_gateway_aws_id":"","public_network":"web","public_network_aws_id":"foo","routed_networks":["db"],"routed_networks_aws_ids":["foo"],"service":"a0d8d660-3e60-4dcb-5afa-20268c213cdb","tags":null,"type":"nat.create.aws-fake.done","vpc_id":"fakeaws"},{"_action":"create","_component":"s3","_component_id":"s3::bucket-1","_provider":"aws-fake","_state":"completed","acl":"","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","bucket_location":"eu-west-1","bucket_uri":"","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","grantees":[{"id":"foo@r3labs.io","permissions":"FULL_CONTROL","type":"emailaddress"},{"id":"bar@r3labs.io","permissions":"WRITE","type":"emailaddress"}],"name":"bucket-1","service":"a0d8d660-3e60-4dcb-5afa-20268c213cdb","tags":{"ernest.service":"aws5039544"},"type":"s3.create.aws-fake.done"}],"edges":[{"destination":"internet_gateway::test-vpc","length":1,"source":"vpc::test-vpc"},{"destination":"network::web","length":1,"source":"internet_gateway::test-vpc"},{"destination":"network::db","length":1,"source":"vpc::test-vpc"},{"destination":"instance::web-1","length":1,"source":"network::web"},{"destination":"firewall::web-sg-1","length":1,"source":"vpc::test-vpc"},{"destination":"elb::elb-1","length":1,"source":"firewall::web-sg-1"},{"destination":"elb::elb-1","length":1,"source":"instance::web-1"},{"destination":"nat::db-nat","length":1,"source":"network::db"},{"destination":"nat::db-nat","length":1,"source":"network::web"},{"destination":"vpc::test-vpc","length":1,"source":"start"},{"destination":"end","length":1,"source":"elb::elb-1"},{"destination":"end","length":1,"source":"nat::db-nat"},{"destination":"s3::bucket-1","length":1,"source":"start"},{"destination":"end","length":1,"source":"s3::bucket-1"}]}', false, '', 0, '0001-01-01 00:00:00+00', '2017-07-21 18:55:58.581178+00', NULL);
INSERT INTO services (id, uuid, group_id, user_id, datacenter_id, name, type, version, status, last_known_error, options, definition, mapping, sync, sync_type, sync_interval, created_at, updated_at, deleted_at) VALUES (25, 'd76f9a73-ddb5-4cb9-5ca0-ff38716135ef', 3, 3, 1, 'aws6429855', 'aws-fake', '2017-07-21 18:55:37.819073+00', 'done', '', '', 'name: aws6429855
datacenter: fakeaws
vpcs:
- name: test-vpc
  subnet: 1.1.1.1/24
nat_gateways:
- name: db-nat
  public_network: web
networks:
- name: web
  vpc: test-vpc
  subnet: 10.1.0.0/24
  public: true
- name: db-a
  vpc: test-vpc
  subnet: 10.2.0.0/24
  public: false
  availability_zone: fake-1a
  nat_gateway: db-nat
- name: db-b
  vpc: test-vpc
  subnet: 10.3.0.0/24
  public: false
  availability_zone: fake-1b
  nat_gateway: db-nat
instances:
- name: web
  type: e1.micro
  image: ami-6666f915
  network: web
  start_ip: 10.1.0.11
  count: 1
  key_pair: some-keypair
security_groups:
- name: web-sg-1
  vpc: test-vpc
  egress:
  - from_port: "80"
    ip: 10.1.1.11/32
    protocol: any
    to_port: "80"
  ingress:
  - from_port: "80"
    ip: 10.1.1.11/32
    protocol: any
    to_port: "80"
rds_clusters:
- name: aurora
  engine: aurora
  port: 3306
  networks:
  - db-a
  - db-b
  security_groups:
  - web-sg-1
  backups:
    retention: 1
  database_name: test
  database_username: test
  database_password: testpass-2
', '{"id":"d76f9a73-ddb5-4cb9-5ca0-ff38716135ef","action":"service.create","name":"aws6429855","options":null,"components":[{"_action":"create","_component":"vpc","_component_id":"vpc::test-vpc","_provider":"aws-fake","_state":"completed","auto_remove":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_region":"fake","datacenter_type":"aws-fake","name":"test-vpc","service":"ef9a82bd-d1a6-4dac-6ca0-7aab6399694e","subnet":"1.1.1.1/24","tags":{"Name":"test-vpc","ernest.service":"aws6429855"},"vpc_aws_id":"fakeaws"},{"_action":"create","_component":"internet_gateway","_component_id":"internet_gateway::test-vpc","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway_aws_id":"foo","name":"test-vpc","service":"ef9a82bd-d1a6-4dac-6ca0-7aab6399694e","tags":{"Name":"test-vpc","ernest.service":"aws6429855"},"vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"network","_component_id":"network::db-a","_provider":"aws-fake","_state":"completed","availability_zone":"fake-1a","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway":"test-vpc","internet_gateway_aws_id":"","is_public":false,"name":"db-a","network_aws_id":"foo","range":"10.2.0.0/24","service":"ef9a82bd-d1a6-4dac-6ca0-7aab6399694e","tags":{"Name":"db-a","ernest.nat_gateway":"db-nat","ernest.service":"aws6429855"},"vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"network","_component_id":"network::db-b","_provider":"aws-fake","_state":"completed","availability_zone":"fake-1b","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway":"test-vpc","internet_gateway_aws_id":"","is_public":false,"name":"db-b","network_aws_id":"foo","range":"10.3.0.0/24","service":"ef9a82bd-d1a6-4dac-6ca0-7aab6399694e","tags":{"Name":"db-b","ernest.nat_gateway":"db-nat","ernest.service":"aws6429855"},"vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"firewall","_component_id":"firewall::web-sg-1","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","name":"web-sg-1","rules":{"egress":[{"from_port":80,"ip":"10.1.1.11/32","protocol":"-1","to_port":80}],"ingress":[{"from_port":80,"ip":"10.1.1.11/32","protocol":"-1","to_port":80}]},"security_group_aws_id":"foo","service":"ef9a82bd-d1a6-4dac-6ca0-7aab6399694e","tags":{"Name":"web-sg-1","ernest.service":"aws6429855"},"vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"network","_component_id":"network::web","_provider":"aws-fake","_state":"completed","availability_zone":"","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway":"test-vpc","internet_gateway_aws_id":"foo","is_public":true,"name":"web","network_aws_id":"foo","range":"10.1.0.0/24","service":"ef9a82bd-d1a6-4dac-6ca0-7aab6399694e","tags":{"Name":"web","ernest.service":"aws6429855"},"vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"rds_cluster","_component_id":"rds_cluster::aurora","_provider":"aws-fake","_state":"completed","arn":"","availability_zones":null,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","backup_retention":1,"database_name":"test","database_password":"testpass-2","database_username":"test","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","endpoint":"rds-endpoint","engine":"aurora","final_snapshot":false,"name":"aurora","network_aws_ids":["foo","foo"],"networks":["db-a","db-b"],"port":3306,"security_group_aws_ids":["foo"],"security_groups":["web-sg-1"],"service":"ef9a82bd-d1a6-4dac-6ca0-7aab6399694e","tags":{"ernest.service":"aws6429855"}},{"_action":"create","_component":"instance","_component_id":"instance::web-1","_provider":"aws-fake","_state":"completed","assign_elastic_ip":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","elastic_ip":"","iam_instance_profile":null,"iam_instance_profile_arn":null,"image":"ami-6666f915","instance_aws_id":"","instance_type":"e1.micro","ip":"10.1.0.11","key_pair":"some-keypair","name":"web-1","network_aws_id":"foo","network_is_public":false,"network_name":"web","public_ip":"","security_group_aws_ids":null,"security_groups":null,"service":"ef9a82bd-d1a6-4dac-6ca0-7aab6399694e","tags":{"Name":"web-1","ernest.instance_group":"web","ernest.service":"aws6429855"},"user_data":"","volumes":null},{"_action":"create","_component":"nat","_component_id":"nat::db-nat","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway_id":"","name":"db-nat","nat_gateway_allocation_id":"","nat_gateway_allocation_ip":"","nat_gateway_aws_id":"","public_network":"web","public_network_aws_id":"foo","routed_networks":["db-a","db-b"],"routed_networks_aws_ids":["foo","foo"],"service":"ef9a82bd-d1a6-4dac-6ca0-7aab6399694e","tags":null,"vpc_id":"fakeaws"},{"_action":"none","_component":"credentials","_component_id":"credentials::aws","_provider":"aws-fake","_state":"waiting","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","name":"fakeaws","region":"fake"}],"changes":[{"_action":"delete","_component":"rds_instance","_component_id":"rds_instance::test-1","_provider":"aws-fake","_state":"completed","arn":"","auto_upgrade":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","cluster":"aurora","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","endpoint":"rds-endpoint","engine":"aurora","final_snapshot":false,"multi_az":false,"name":"test-1","network_aws_ids":null,"networks":null,"public":false,"security_group_aws_ids":null,"security_groups":null,"service":"d76f9a73-ddb5-4cb9-5ca0-ff38716135ef","size":"db.r3.xlarge","tags":{"ernest.service":"aws6429855"},"type":"rds_instance.delete.aws-fake.done"}],"edges":[{"destination":"rds_instance::test-1","length":1,"source":"start"},{"destination":"end","length":1,"source":"rds_instance::test-1"}]}', false, '', 0, '0001-01-01 00:00:00+00', '2017-07-21 18:55:37.843777+00', NULL);
INSERT INTO services (id, uuid, group_id, user_id, datacenter_id, name, type, version, status, last_known_error, options, definition, mapping, sync, sync_type, sync_interval, created_at, updated_at, deleted_at) VALUES (27, '4aca9aa6-d32c-4853-52a2-9f13797a2e00', 3, 3, 1, 'aws4545644', 'aws-fake', '2017-07-21 18:55:45.034143+00', 'done', '', '', 'name: aws4545644
datacenter: fakeaws
vpcs:
- name: test-vpc
  subnet: 1.1.1.1/24
networks:
- name: web
  vpc: test-vpc
  public: true
  subnet: 10.1.0.0/24
instances:
- name: web
  type: e1.micro
  image: ami-6666f915
  network: web
  start_ip: 10.1.0.11
  count: 2
  key_pair: some-keypair
  security_groups:
  - web-sg-1
security_groups:
- name: web-sg-1
  vpc: test-vpc
  egress:
  - from_port: "80"
    ip: 10.1.1.11/32
    protocol: any
    to_port: "80"
  ingress:
  - from_port: "80"
    ip: 10.1.1.11/32
    protocol: any
    to_port: "80"
', '{"id":"4aca9aa6-d32c-4853-52a2-9f13797a2e00","action":"service.create","name":"aws4545644","options":null,"components":[{"_action":"create","_component":"vpc","_component_id":"vpc::test-vpc","_provider":"aws-fake","_state":"completed","auto_remove":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_region":"fake","datacenter_type":"aws-fake","name":"test-vpc","service":"a5cda986-c9da-4100-6b5c-42a137da6e91","subnet":"1.1.1.1/24","tags":{"Name":"test-vpc","ernest.service":"aws4545644"},"vpc_aws_id":"fakeaws"},{"_action":"create","_component":"internet_gateway","_component_id":"internet_gateway::test-vpc","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway_aws_id":"foo","name":"test-vpc","service":"a5cda986-c9da-4100-6b5c-42a137da6e91","tags":{"Name":"test-vpc","ernest.service":"aws4545644"},"vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"firewall","_component_id":"firewall::web-sg-1","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","name":"web-sg-1","rules":{"egress":[{"from_port":80,"ip":"10.1.1.11/32","protocol":"-1","to_port":80}],"ingress":[{"from_port":80,"ip":"10.1.1.11/32","protocol":"-1","to_port":80}]},"security_group_aws_id":"foo","service":"a5cda986-c9da-4100-6b5c-42a137da6e91","tags":{"Name":"web-sg-1","ernest.service":"aws4545644"},"vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"network","_component_id":"network::web","_provider":"aws-fake","_state":"completed","availability_zone":"","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway":"test-vpc","internet_gateway_aws_id":"foo","is_public":true,"name":"web","network_aws_id":"foo","range":"10.1.0.0/24","service":"a5cda986-c9da-4100-6b5c-42a137da6e91","tags":{"Name":"web","ernest.service":"aws4545644"},"vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"instance","_component_id":"instance::web-1","_provider":"aws-fake","_state":"completed","assign_elastic_ip":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","elastic_ip":"","iam_instance_profile":null,"iam_instance_profile_arn":null,"image":"ami-6666f915","instance_aws_id":"","instance_type":"e1.micro","ip":"10.1.0.11","key_pair":"some-keypair","name":"web-1","network_aws_id":"foo","network_is_public":false,"network_name":"web","public_ip":"","security_group_aws_ids":["foo"],"security_groups":["web-sg-1"],"service":"a5cda986-c9da-4100-6b5c-42a137da6e91","tags":{"Name":"web-1","ernest.instance_group":"web","ernest.service":"aws4545644"},"user_data":"","volumes":null},{"_action":"none","_component":"credentials","_component_id":"credentials::aws","_provider":"aws-fake","_state":"waiting","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","name":"fakeaws","region":"fake"},{"_action":"create","_component":"instance","_component_id":"instance::web-2","_provider":"aws-fake","_state":"completed","assign_elastic_ip":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","elastic_ip":"","iam_instance_profile":null,"iam_instance_profile_arn":null,"image":"ami-6666f915","instance_aws_id":"","instance_type":"e1.micro","ip":"10.1.0.12","key_pair":"some-keypair","name":"web-2","network_aws_id":"foo","network_is_public":false,"network_name":"web","public_ip":"","security_group_aws_ids":["foo"],"security_groups":["web-sg-1"],"service":"4aca9aa6-d32c-4853-52a2-9f13797a2e00","tags":{"Name":"web-2","ernest.instance_group":"web","ernest.service":"aws4545644"},"type":"instance.create.aws-fake.done","user_data":"","volumes":null}],"changes":[{"_action":"create","_component":"instance","_component_id":"instance::web-2","_provider":"aws-fake","_state":"completed","assign_elastic_ip":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","elastic_ip":"","iam_instance_profile":null,"iam_instance_profile_arn":null,"image":"ami-6666f915","instance_aws_id":"","instance_type":"e1.micro","ip":"10.1.0.12","key_pair":"some-keypair","name":"web-2","network_aws_id":"foo","network_is_public":false,"network_name":"web","public_ip":"","security_group_aws_ids":["foo"],"security_groups":["web-sg-1"],"service":"4aca9aa6-d32c-4853-52a2-9f13797a2e00","tags":{"Name":"web-2","ernest.instance_group":"web","ernest.service":"aws4545644"},"type":"instance.create.aws-fake.done","user_data":"","volumes":null}],"edges":[{"destination":"instance::web-2","length":1,"source":"start"},{"destination":"end","length":1,"source":"instance::web-2"}]}', false, '', 0, '0001-01-01 00:00:00+00', '2017-07-21 18:55:45.058179+00', NULL);
INSERT INTO services (id, uuid, group_id, user_id, datacenter_id, name, type, version, status, last_known_error, options, definition, mapping, sync, sync_type, sync_interval, created_at, updated_at, deleted_at) VALUES (29, '401098b5-4c9d-4606-6d8c-70e2049d58ac', 3, 3, 1, 'aws7525099', 'aws-fake', '2017-07-21 18:55:52.28714+00', 'done', '', '', 'name: aws7525099
datacenter: fakeaws
vpcs:
- name: test-vpc
  subnet: 1.1.1.1/24
networks:
- name: web
  vpc: test-vpc
  subnet: 10.1.0.0/24
  public: true
instances:
- name: web
  type: e1.micro
  image: ami-6666f915
  network: web
  start_ip: 10.1.0.11
  count: 1
  key_pair: some-keypair
security_groups:
- name: web-sg-1
  vpc: test-vpc
  egress:
  - from_port: "80"
    ip: 10.1.1.11/32
    protocol: any
    to_port: "80"
  ingress:
  - from_port: "80"
    ip: 10.1.1.11/32
    protocol: any
    to_port: "80"
', '{"id":"401098b5-4c9d-4606-6d8c-70e2049d58ac","action":"service.create","name":"aws7525099","options":null,"components":[{"_action":"create","_component":"vpc","_component_id":"vpc::test-vpc","_provider":"aws-fake","_state":"completed","auto_remove":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_region":"fake","datacenter_type":"aws-fake","name":"test-vpc","service":"d74ddd8e-c825-408e-7307-d004290deba9","subnet":"1.1.1.1/24","tags":{"Name":"test-vpc","ernest.service":"aws7525099"},"vpc_aws_id":"fakeaws"},{"_action":"create","_component":"internet_gateway","_component_id":"internet_gateway::test-vpc","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway_aws_id":"foo","name":"test-vpc","service":"d74ddd8e-c825-408e-7307-d004290deba9","tags":{"Name":"test-vpc","ernest.service":"aws7525099"},"vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"firewall","_component_id":"firewall::web-sg-1","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","name":"web-sg-1","rules":{"egress":[{"from_port":80,"ip":"10.1.1.11/32","protocol":"-1","to_port":80}],"ingress":[{"from_port":80,"ip":"10.1.1.11/32","protocol":"-1","to_port":80}]},"security_group_aws_id":"foo","service":"d74ddd8e-c825-408e-7307-d004290deba9","tags":{"Name":"web-sg-1","ernest.service":"aws7525099"},"vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"network","_component_id":"network::web","_provider":"aws-fake","_state":"completed","availability_zone":"","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway":"test-vpc","internet_gateway_aws_id":"foo","is_public":true,"name":"web","network_aws_id":"foo","range":"10.1.0.0/24","service":"d74ddd8e-c825-408e-7307-d004290deba9","tags":{"Name":"web","ernest.service":"aws7525099"},"vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"instance","_component_id":"instance::web-1","_provider":"aws-fake","_state":"completed","assign_elastic_ip":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","elastic_ip":"","iam_instance_profile":null,"iam_instance_profile_arn":null,"image":"ami-6666f915","instance_aws_id":"","instance_type":"e1.micro","ip":"10.1.0.11","key_pair":"some-keypair","name":"web-1","network_aws_id":"foo","network_is_public":false,"network_name":"web","public_ip":"","security_group_aws_ids":null,"security_groups":null,"service":"d74ddd8e-c825-408e-7307-d004290deba9","tags":{"Name":"web-1","ernest.instance_group":"web","ernest.service":"aws7525099"},"user_data":"","volumes":null},{"_action":"none","_component":"credentials","_component_id":"credentials::aws","_provider":"aws-fake","_state":"waiting","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","name":"fakeaws","region":"fake"}],"changes":[{"_action":"delete","_component":"network","_component_id":"network::bknd","_provider":"aws-fake","_state":"completed","availability_zone":"","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway":"test-vpc","internet_gateway_aws_id":"","is_public":false,"name":"bknd","network_aws_id":"foo","range":"10.2.0.0/24","service":"401098b5-4c9d-4606-6d8c-70e2049d58ac","tags":{"Name":"bknd","ernest.service":"aws7525099"},"type":"network.delete.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"delete","_component":"instance","_component_id":"instance::bknd-1","_provider":"aws-fake","_state":"completed","assign_elastic_ip":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","elastic_ip":"","iam_instance_profile":null,"iam_instance_profile_arn":null,"image":"ami-6666f915","instance_aws_id":"","instance_type":"e1.micro","ip":"10.2.0.11","key_pair":"some-keypair","name":"bknd-1","network_aws_id":"foo","network_is_public":false,"network_name":"bknd","public_ip":"","security_group_aws_ids":null,"security_groups":null,"service":"401098b5-4c9d-4606-6d8c-70e2049d58ac","tags":{"Name":"bknd-1","ernest.instance_group":"bknd","ernest.service":"aws7525099"},"type":"instance.delete.aws-fake.done","user_data":"","volumes":null}],"edges":[{"destination":"network::bknd","length":1,"source":"instance::bknd-1"},{"destination":"end","length":1,"source":"network::bknd"},{"destination":"instance::bknd-1","length":1,"source":"start"}]}', false, '', 0, '0001-01-01 00:00:00+00', '2017-07-21 18:55:52.322097+00', NULL);
INSERT INTO services (id, uuid, group_id, user_id, datacenter_id, name, type, version, status, last_known_error, options, definition, mapping, sync, sync_type, sync_interval, created_at, updated_at, deleted_at) VALUES (28, 'd74ddd8e-c825-408e-7307-d004290deba9', 3, 3, 1, 'aws7525099', 'aws-fake', '2017-07-21 18:55:51.159448+00', 'done', '', '', 'name: aws7525099
datacenter: fakeaws
vpcs:
- name: test-vpc
  subnet: 1.1.1.1/24
networks:
- name: web
  vpc: test-vpc
  subnet: 10.1.0.0/24
  public: true
- name: bknd
  vpc: test-vpc
  subnet: 10.2.0.0/24
instances:
- name: web
  type: e1.micro
  image: ami-6666f915
  network: web
  start_ip: 10.1.0.11
  count: 1
  key_pair: some-keypair
- name: bknd
  type: e1.micro
  image: ami-6666f915
  network: bknd
  start_ip: 10.2.0.11
  count: 1
  key_pair: some-keypair
security_groups:
- name: web-sg-1
  vpc: test-vpc
  egress:
  - from_port: "80"
    ip: 10.1.1.11/32
    protocol: any
    to_port: "80"
  ingress:
  - from_port: "80"
    ip: 10.1.1.11/32
    protocol: any
    to_port: "80"
', '{"id":"d74ddd8e-c825-408e-7307-d004290deba9","action":"service.create","name":"aws7525099","options":null,"components":[{"_action":"none","_component":"credentials","_component_id":"credentials::aws","_provider":"aws-fake","_state":"waiting","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","name":"fakeaws","region":"fake"},{"_action":"create","_component":"vpc","_component_id":"vpc::test-vpc","_provider":"aws-fake","_state":"completed","auto_remove":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_region":"fake","datacenter_type":"aws-fake","name":"test-vpc","service":"d74ddd8e-c825-408e-7307-d004290deba9","subnet":"1.1.1.1/24","tags":{"Name":"test-vpc","ernest.service":"aws7525099"},"type":"vpc.create.aws-fake.done","vpc_aws_id":"fakeaws"},{"_action":"create","_component":"internet_gateway","_component_id":"internet_gateway::test-vpc","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway_aws_id":"foo","name":"test-vpc","service":"d74ddd8e-c825-408e-7307-d004290deba9","tags":{"Name":"test-vpc","ernest.service":"aws7525099"},"type":"internet_gateway.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"network","_component_id":"network::bknd","_provider":"aws-fake","_state":"completed","availability_zone":"","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway":"test-vpc","internet_gateway_aws_id":"","is_public":false,"name":"bknd","network_aws_id":"foo","range":"10.2.0.0/24","service":"d74ddd8e-c825-408e-7307-d004290deba9","tags":{"Name":"bknd","ernest.service":"aws7525099"},"type":"network.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"firewall","_component_id":"firewall::web-sg-1","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","name":"web-sg-1","rules":{"egress":[{"from_port":80,"ip":"10.1.1.11/32","protocol":"-1","to_port":80}],"ingress":[{"from_port":80,"ip":"10.1.1.11/32","protocol":"-1","to_port":80}]},"security_group_aws_id":"foo","service":"d74ddd8e-c825-408e-7307-d004290deba9","tags":{"Name":"web-sg-1","ernest.service":"aws7525099"},"type":"firewall.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"network","_component_id":"network::web","_provider":"aws-fake","_state":"completed","availability_zone":"","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway":"test-vpc","internet_gateway_aws_id":"foo","is_public":true,"name":"web","network_aws_id":"foo","range":"10.1.0.0/24","service":"d74ddd8e-c825-408e-7307-d004290deba9","tags":{"Name":"web","ernest.service":"aws7525099"},"type":"network.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"instance","_component_id":"instance::bknd-1","_provider":"aws-fake","_state":"completed","assign_elastic_ip":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","elastic_ip":"","iam_instance_profile":null,"iam_instance_profile_arn":null,"image":"ami-6666f915","instance_aws_id":"","instance_type":"e1.micro","ip":"10.2.0.11","key_pair":"some-keypair","name":"bknd-1","network_aws_id":"foo","network_is_public":false,"network_name":"bknd","public_ip":"","security_group_aws_ids":null,"security_groups":null,"service":"d74ddd8e-c825-408e-7307-d004290deba9","tags":{"Name":"bknd-1","ernest.instance_group":"bknd","ernest.service":"aws7525099"},"type":"instance.create.aws-fake.done","user_data":"","volumes":null},{"_action":"create","_component":"instance","_component_id":"instance::web-1","_provider":"aws-fake","_state":"completed","assign_elastic_ip":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","elastic_ip":"","iam_instance_profile":null,"iam_instance_profile_arn":null,"image":"ami-6666f915","instance_aws_id":"","instance_type":"e1.micro","ip":"10.1.0.11","key_pair":"some-keypair","name":"web-1","network_aws_id":"foo","network_is_public":false,"network_name":"web","public_ip":"","security_group_aws_ids":null,"security_groups":null,"service":"d74ddd8e-c825-408e-7307-d004290deba9","tags":{"Name":"web-1","ernest.instance_group":"web","ernest.service":"aws7525099"},"type":"instance.create.aws-fake.done","user_data":"","volumes":null}],"changes":[{"_action":"create","_component":"vpc","_component_id":"vpc::test-vpc","_provider":"aws-fake","_state":"completed","auto_remove":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_region":"fake","datacenter_type":"aws-fake","name":"test-vpc","service":"d74ddd8e-c825-408e-7307-d004290deba9","subnet":"1.1.1.1/24","tags":{"Name":"test-vpc","ernest.service":"aws7525099"},"type":"vpc.create.aws-fake.done","vpc_aws_id":"fakeaws"},{"_action":"create","_component":"internet_gateway","_component_id":"internet_gateway::test-vpc","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway_aws_id":"foo","name":"test-vpc","service":"d74ddd8e-c825-408e-7307-d004290deba9","tags":{"Name":"test-vpc","ernest.service":"aws7525099"},"type":"internet_gateway.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"network","_component_id":"network::web","_provider":"aws-fake","_state":"completed","availability_zone":"","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway":"test-vpc","internet_gateway_aws_id":"foo","is_public":true,"name":"web","network_aws_id":"foo","range":"10.1.0.0/24","service":"d74ddd8e-c825-408e-7307-d004290deba9","tags":{"Name":"web","ernest.service":"aws7525099"},"type":"network.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"network","_component_id":"network::bknd","_provider":"aws-fake","_state":"completed","availability_zone":"","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway":"test-vpc","internet_gateway_aws_id":"","is_public":false,"name":"bknd","network_aws_id":"foo","range":"10.2.0.0/24","service":"d74ddd8e-c825-408e-7307-d004290deba9","tags":{"Name":"bknd","ernest.service":"aws7525099"},"type":"network.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"instance","_component_id":"instance::web-1","_provider":"aws-fake","_state":"completed","assign_elastic_ip":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","elastic_ip":"","iam_instance_profile":null,"iam_instance_profile_arn":null,"image":"ami-6666f915","instance_aws_id":"","instance_type":"e1.micro","ip":"10.1.0.11","key_pair":"some-keypair","name":"web-1","network_aws_id":"foo","network_is_public":false,"network_name":"web","public_ip":"","security_group_aws_ids":null,"security_groups":null,"service":"d74ddd8e-c825-408e-7307-d004290deba9","tags":{"Name":"web-1","ernest.instance_group":"web","ernest.service":"aws7525099"},"type":"instance.create.aws-fake.done","user_data":"","volumes":null},{"_action":"create","_component":"instance","_component_id":"instance::bknd-1","_provider":"aws-fake","_state":"completed","assign_elastic_ip":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","elastic_ip":"","iam_instance_profile":null,"iam_instance_profile_arn":null,"image":"ami-6666f915","instance_aws_id":"","instance_type":"e1.micro","ip":"10.2.0.11","key_pair":"some-keypair","name":"bknd-1","network_aws_id":"foo","network_is_public":false,"network_name":"bknd","public_ip":"","security_group_aws_ids":null,"security_groups":null,"service":"d74ddd8e-c825-408e-7307-d004290deba9","tags":{"Name":"bknd-1","ernest.instance_group":"bknd","ernest.service":"aws7525099"},"type":"instance.create.aws-fake.done","user_data":"","volumes":null},{"_action":"create","_component":"firewall","_component_id":"firewall::web-sg-1","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","name":"web-sg-1","rules":{"egress":[{"from_port":80,"ip":"10.1.1.11/32","protocol":"-1","to_port":80}],"ingress":[{"from_port":80,"ip":"10.1.1.11/32","protocol":"-1","to_port":80}]},"security_group_aws_id":"foo","service":"d74ddd8e-c825-408e-7307-d004290deba9","tags":{"Name":"web-sg-1","ernest.service":"aws7525099"},"type":"firewall.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"}],"edges":[{"destination":"internet_gateway::test-vpc","length":1,"source":"vpc::test-vpc"},{"destination":"network::web","length":1,"source":"internet_gateway::test-vpc"},{"destination":"network::bknd","length":1,"source":"vpc::test-vpc"},{"destination":"instance::web-1","length":1,"source":"network::web"},{"destination":"instance::bknd-1","length":1,"source":"network::bknd"},{"destination":"firewall::web-sg-1","length":1,"source":"vpc::test-vpc"},{"destination":"vpc::test-vpc","length":1,"source":"start"},{"destination":"end","length":1,"source":"instance::web-1"},{"destination":"end","length":1,"source":"instance::bknd-1"},{"destination":"end","length":1,"source":"firewall::web-sg-1"}]}', false, '', 0, '0001-01-01 00:00:00+00', '2017-07-21 18:55:51.260168+00', NULL);
INSERT INTO services (id, uuid, group_id, user_id, datacenter_id, name, type, version, status, last_known_error, options, definition, mapping, sync, sync_type, sync_interval, created_at, updated_at, deleted_at) VALUES (40, '60ea0231-0af5-453b-4428-11bc56a92290', 3, 3, 1, 'aws4213851', 'aws-fake', '2017-07-21 18:56:34.843436+00', 'done', '', '', 'name: aws4213851
datacenter: fakeaws
vpcs:
- name: test-vpc
  subnet: 1.1.1.1/24
nat_gateways:
- name: db-nat
  public_network: web
networks:
- name: web
  vpc: test-vpc
  subnet: 10.1.0.0/24
  public: true
- name: db-a
  vpc: test-vpc
  subnet: 10.2.0.0/24
  public: false
  availability_zone: fake-1a
  nat_gateway: db-nat
- name: db-b
  vpc: test-vpc
  subnet: 10.3.0.0/24
  public: false
  availability_zone: fake-1b
  nat_gateway: db-nat
instances:
- name: web
  type: e1.micro
  image: ami-6666f915
  network: web
  start_ip: 10.1.0.11
  count: 1
  key_pair: some-keypair
security_groups:
- name: web-sg-1
  vpc: test-vpc
  egress:
  - from_port: "80"
    ip: 10.1.1.11/32
    protocol: any
    to_port: "80"
  ingress:
  - from_port: "80"
    ip: 10.1.1.11/32
    protocol: any
    to_port: "80"
rds_clusters:
- name: aurora
  engine: aurora
  port: 3306
  networks:
  - db-a
  - db-b
  security_groups:
  - web-sg-1
  backups:
    retention: 1
  database_name: test
  database_username: test
  database_password: testpass-2
rds_instances:
- name: test-1
  cluster: aurora
  size: db.r3.large
', '{"id":"60ea0231-0af5-453b-4428-11bc56a92290","action":"service.create","name":"aws4213851","options":null,"components":[{"_action":"none","_component":"credentials","_component_id":"credentials::aws","_provider":"aws-fake","_state":"waiting","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","name":"fakeaws","region":"fake"},{"_action":"create","_component":"vpc","_component_id":"vpc::test-vpc","_provider":"aws-fake","_state":"completed","auto_remove":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_region":"fake","datacenter_type":"aws-fake","name":"test-vpc","service":"60ea0231-0af5-453b-4428-11bc56a92290","subnet":"1.1.1.1/24","tags":{"Name":"test-vpc","ernest.service":"aws4213851"},"type":"vpc.create.aws-fake.done","vpc_aws_id":"fakeaws"},{"_action":"create","_component":"internet_gateway","_component_id":"internet_gateway::test-vpc","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway_aws_id":"foo","name":"test-vpc","service":"60ea0231-0af5-453b-4428-11bc56a92290","tags":{"Name":"test-vpc","ernest.service":"aws4213851"},"type":"internet_gateway.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"network","_component_id":"network::db-a","_provider":"aws-fake","_state":"completed","availability_zone":"fake-1a","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway":"test-vpc","internet_gateway_aws_id":"","is_public":false,"name":"db-a","network_aws_id":"foo","range":"10.2.0.0/24","service":"60ea0231-0af5-453b-4428-11bc56a92290","tags":{"Name":"db-a","ernest.nat_gateway":"db-nat","ernest.service":"aws4213851"},"type":"network.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"network","_component_id":"network::db-b","_provider":"aws-fake","_state":"completed","availability_zone":"fake-1b","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway":"test-vpc","internet_gateway_aws_id":"","is_public":false,"name":"db-b","network_aws_id":"foo","range":"10.3.0.0/24","service":"60ea0231-0af5-453b-4428-11bc56a92290","tags":{"Name":"db-b","ernest.nat_gateway":"db-nat","ernest.service":"aws4213851"},"type":"network.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"firewall","_component_id":"firewall::web-sg-1","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","name":"web-sg-1","rules":{"egress":[{"from_port":80,"ip":"10.1.1.11/32","protocol":"-1","to_port":80}],"ingress":[{"from_port":80,"ip":"10.1.1.11/32","protocol":"-1","to_port":80}]},"security_group_aws_id":"foo","service":"60ea0231-0af5-453b-4428-11bc56a92290","tags":{"Name":"web-sg-1","ernest.service":"aws4213851"},"type":"firewall.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"network","_component_id":"network::web","_provider":"aws-fake","_state":"completed","availability_zone":"","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway":"test-vpc","internet_gateway_aws_id":"foo","is_public":true,"name":"web","network_aws_id":"foo","range":"10.1.0.0/24","service":"60ea0231-0af5-453b-4428-11bc56a92290","tags":{"Name":"web","ernest.service":"aws4213851"},"type":"network.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"rds_cluster","_component_id":"rds_cluster::aurora","_provider":"aws-fake","_state":"completed","arn":"","availability_zones":null,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","backup_retention":1,"database_name":"test","database_password":"testpass-2","database_username":"test","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","endpoint":"rds-endpoint","engine":"aurora","final_snapshot":false,"name":"aurora","network_aws_ids":["foo","foo"],"networks":["db-a","db-b"],"port":3306,"security_group_aws_ids":["foo"],"security_groups":["web-sg-1"],"service":"60ea0231-0af5-453b-4428-11bc56a92290","tags":{"ernest.service":"aws4213851"},"type":"rds_cluster.create.aws-fake.done"},{"_action":"create","_component":"instance","_component_id":"instance::web-1","_provider":"aws-fake","_state":"completed","assign_elastic_ip":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","elastic_ip":"","iam_instance_profile":null,"iam_instance_profile_arn":null,"image":"ami-6666f915","instance_aws_id":"","instance_type":"e1.micro","ip":"10.1.0.11","key_pair":"some-keypair","name":"web-1","network_aws_id":"foo","network_is_public":false,"network_name":"web","public_ip":"","security_group_aws_ids":null,"security_groups":null,"service":"60ea0231-0af5-453b-4428-11bc56a92290","tags":{"Name":"web-1","ernest.instance_group":"web","ernest.service":"aws4213851"},"type":"instance.create.aws-fake.done","user_data":"","volumes":null},{"_action":"create","_component":"nat","_component_id":"nat::db-nat","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway_id":"","name":"db-nat","nat_gateway_allocation_id":"","nat_gateway_allocation_ip":"","nat_gateway_aws_id":"","public_network":"web","public_network_aws_id":"foo","routed_networks":["db-a","db-b"],"routed_networks_aws_ids":["foo","foo"],"service":"60ea0231-0af5-453b-4428-11bc56a92290","tags":null,"type":"nat.create.aws-fake.done","vpc_id":"fakeaws"},{"_action":"create","_component":"rds_instance","_component_id":"rds_instance::test-1","_provider":"aws-fake","_state":"completed","arn":"","auto_upgrade":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","cluster":"aurora","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","endpoint":"rds-endpoint","engine":"aurora","final_snapshot":false,"multi_az":false,"name":"test-1","network_aws_ids":null,"networks":null,"public":false,"security_group_aws_ids":null,"security_groups":null,"service":"60ea0231-0af5-453b-4428-11bc56a92290","size":"db.r3.large","tags":{"ernest.service":"aws4213851"},"type":"rds_instance.create.aws-fake.done"}],"changes":[{"_action":"create","_component":"vpc","_component_id":"vpc::test-vpc","_provider":"aws-fake","_state":"completed","auto_remove":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_region":"fake","datacenter_type":"aws-fake","name":"test-vpc","service":"60ea0231-0af5-453b-4428-11bc56a92290","subnet":"1.1.1.1/24","tags":{"Name":"test-vpc","ernest.service":"aws4213851"},"type":"vpc.create.aws-fake.done","vpc_aws_id":"fakeaws"},{"_action":"create","_component":"internet_gateway","_component_id":"internet_gateway::test-vpc","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway_aws_id":"foo","name":"test-vpc","service":"60ea0231-0af5-453b-4428-11bc56a92290","tags":{"Name":"test-vpc","ernest.service":"aws4213851"},"type":"internet_gateway.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"network","_component_id":"network::web","_provider":"aws-fake","_state":"completed","availability_zone":"","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway":"test-vpc","internet_gateway_aws_id":"foo","is_public":true,"name":"web","network_aws_id":"foo","range":"10.1.0.0/24","service":"60ea0231-0af5-453b-4428-11bc56a92290","tags":{"Name":"web","ernest.service":"aws4213851"},"type":"network.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"network","_component_id":"network::db-a","_provider":"aws-fake","_state":"completed","availability_zone":"fake-1a","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway":"test-vpc","internet_gateway_aws_id":"","is_public":false,"name":"db-a","network_aws_id":"foo","range":"10.2.0.0/24","service":"60ea0231-0af5-453b-4428-11bc56a92290","tags":{"Name":"db-a","ernest.nat_gateway":"db-nat","ernest.service":"aws4213851"},"type":"network.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"network","_component_id":"network::db-b","_provider":"aws-fake","_state":"completed","availability_zone":"fake-1b","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway":"test-vpc","internet_gateway_aws_id":"","is_public":false,"name":"db-b","network_aws_id":"foo","range":"10.3.0.0/24","service":"60ea0231-0af5-453b-4428-11bc56a92290","tags":{"Name":"db-b","ernest.nat_gateway":"db-nat","ernest.service":"aws4213851"},"type":"network.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"instance","_component_id":"instance::web-1","_provider":"aws-fake","_state":"completed","assign_elastic_ip":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","elastic_ip":"","iam_instance_profile":null,"iam_instance_profile_arn":null,"image":"ami-6666f915","instance_aws_id":"","instance_type":"e1.micro","ip":"10.1.0.11","key_pair":"some-keypair","name":"web-1","network_aws_id":"foo","network_is_public":false,"network_name":"web","public_ip":"","security_group_aws_ids":null,"security_groups":null,"service":"60ea0231-0af5-453b-4428-11bc56a92290","tags":{"Name":"web-1","ernest.instance_group":"web","ernest.service":"aws4213851"},"type":"instance.create.aws-fake.done","user_data":"","volumes":null},{"_action":"create","_component":"firewall","_component_id":"firewall::web-sg-1","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","name":"web-sg-1","rules":{"egress":[{"from_port":80,"ip":"10.1.1.11/32","protocol":"-1","to_port":80}],"ingress":[{"from_port":80,"ip":"10.1.1.11/32","protocol":"-1","to_port":80}]},"security_group_aws_id":"foo","service":"60ea0231-0af5-453b-4428-11bc56a92290","tags":{"Name":"web-sg-1","ernest.service":"aws4213851"},"type":"firewall.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"nat","_component_id":"nat::db-nat","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway_id":"","name":"db-nat","nat_gateway_allocation_id":"","nat_gateway_allocation_ip":"","nat_gateway_aws_id":"","public_network":"web","public_network_aws_id":"foo","routed_networks":["db-a","db-b"],"routed_networks_aws_ids":["foo","foo"],"service":"60ea0231-0af5-453b-4428-11bc56a92290","tags":null,"type":"nat.create.aws-fake.done","vpc_id":"fakeaws"},{"_action":"create","_component":"rds_cluster","_component_id":"rds_cluster::aurora","_provider":"aws-fake","_state":"completed","arn":"","availability_zones":null,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","backup_retention":1,"database_name":"test","database_password":"testpass-2","database_username":"test","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","endpoint":"rds-endpoint","engine":"aurora","final_snapshot":false,"name":"aurora","network_aws_ids":["foo","foo"],"networks":["db-a","db-b"],"port":3306,"security_group_aws_ids":["foo"],"security_groups":["web-sg-1"],"service":"60ea0231-0af5-453b-4428-11bc56a92290","tags":{"ernest.service":"aws4213851"},"type":"rds_cluster.create.aws-fake.done"},{"_action":"create","_component":"rds_instance","_component_id":"rds_instance::test-1","_provider":"aws-fake","_state":"completed","arn":"","auto_upgrade":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","cluster":"aurora","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","endpoint":"rds-endpoint","engine":"aurora","final_snapshot":false,"multi_az":false,"name":"test-1","network_aws_ids":null,"networks":null,"public":false,"security_group_aws_ids":null,"security_groups":null,"service":"60ea0231-0af5-453b-4428-11bc56a92290","size":"db.r3.large","tags":{"ernest.service":"aws4213851"},"type":"rds_instance.create.aws-fake.done"}],"edges":[{"destination":"internet_gateway::test-vpc","length":1,"source":"vpc::test-vpc"},{"destination":"network::web","length":1,"source":"internet_gateway::test-vpc"},{"destination":"network::db-a","length":1,"source":"vpc::test-vpc"},{"destination":"network::db-b","length":1,"source":"vpc::test-vpc"},{"destination":"instance::web-1","length":1,"source":"network::web"},{"destination":"firewall::web-sg-1","length":1,"source":"vpc::test-vpc"},{"destination":"nat::db-nat","length":1,"source":"network::db-a"},{"destination":"nat::db-nat","length":1,"source":"network::db-b"},{"destination":"nat::db-nat","length":1,"source":"network::web"},{"destination":"rds_cluster::aurora","length":1,"source":"firewall::web-sg-1"},{"destination":"rds_cluster::aurora","length":1,"source":"network::db-a"},{"destination":"rds_cluster::aurora","length":1,"source":"network::db-b"},{"destination":"rds_instance::test-1","length":1,"source":"rds_cluster::aurora"},{"destination":"vpc::test-vpc","length":1,"source":"start"},{"destination":"end","length":1,"source":"instance::web-1"},{"destination":"end","length":1,"source":"nat::db-nat"},{"destination":"end","length":1,"source":"rds_instance::test-1"}]}', false, '', 0, '0001-01-01 00:00:00+00', '2017-07-21 18:56:34.999034+00', NULL);
INSERT INTO services (id, uuid, group_id, user_id, datacenter_id, name, type, version, status, last_known_error, options, definition, mapping, sync, sync_type, sync_interval, created_at, updated_at, deleted_at) VALUES (31, '9acf4088-679a-42e6-5eb5-254ac23282a2', 3, 3, 1, 'aws5039544', 'aws-fake', '2017-07-21 18:55:59.610683+00', 'done', '', '', 'name: aws5039544
datacenter: fakeaws
vpcs:
- name: test-vpc
  subnet: 1.1.1.1/24
nat_gateways:
- name: db-nat
  public_network: web
networks:
- name: web
  vpc: test-vpc
  subnet: 10.1.0.0/24
  public: true
- name: db
  vpc: test-vpc
  subnet: 10.2.0.0/24
  public: false
  nat_gateway: db-nat
instances:
- name: web
  type: e1.micro
  image: ami-6666f915
  network: web
  start_ip: 10.1.0.11
  count: 1
  key_pair: some-keypair
security_groups:
- name: web-sg-1
  vpc: test-vpc
  egress:
  - from_port: "80"
    ip: 10.1.1.11/32
    protocol: any
    to_port: "80"
  ingress:
  - from_port: "80"
    ip: 10.1.1.11/32
    protocol: any
    to_port: "80"
', '{"id":"9acf4088-679a-42e6-5eb5-254ac23282a2","action":"service.create","name":"aws5039544","options":null,"components":[{"_action":"create","_component":"vpc","_component_id":"vpc::test-vpc","_provider":"aws-fake","_state":"completed","auto_remove":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_region":"fake","datacenter_type":"aws-fake","name":"test-vpc","service":"a0d8d660-3e60-4dcb-5afa-20268c213cdb","subnet":"1.1.1.1/24","tags":{"Name":"test-vpc","ernest.service":"aws5039544"},"vpc_aws_id":"fakeaws"},{"_action":"create","_component":"internet_gateway","_component_id":"internet_gateway::test-vpc","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway_aws_id":"foo","name":"test-vpc","service":"a0d8d660-3e60-4dcb-5afa-20268c213cdb","tags":{"Name":"test-vpc","ernest.service":"aws5039544"},"vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"network","_component_id":"network::db","_provider":"aws-fake","_state":"completed","availability_zone":"","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway":"test-vpc","internet_gateway_aws_id":"","is_public":false,"name":"db","network_aws_id":"foo","range":"10.2.0.0/24","service":"a0d8d660-3e60-4dcb-5afa-20268c213cdb","tags":{"Name":"db","ernest.nat_gateway":"db-nat","ernest.service":"aws5039544"},"vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"firewall","_component_id":"firewall::web-sg-1","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","name":"web-sg-1","rules":{"egress":[{"from_port":80,"ip":"10.1.1.11/32","protocol":"-1","to_port":80}],"ingress":[{"from_port":80,"ip":"10.1.1.11/32","protocol":"-1","to_port":80}]},"security_group_aws_id":"foo","service":"a0d8d660-3e60-4dcb-5afa-20268c213cdb","tags":{"Name":"web-sg-1","ernest.service":"aws5039544"},"vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"network","_component_id":"network::web","_provider":"aws-fake","_state":"completed","availability_zone":"","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway":"test-vpc","internet_gateway_aws_id":"foo","is_public":true,"name":"web","network_aws_id":"foo","range":"10.1.0.0/24","service":"a0d8d660-3e60-4dcb-5afa-20268c213cdb","tags":{"Name":"web","ernest.service":"aws5039544"},"vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"instance","_component_id":"instance::web-1","_provider":"aws-fake","_state":"completed","assign_elastic_ip":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","elastic_ip":"","iam_instance_profile":null,"iam_instance_profile_arn":null,"image":"ami-6666f915","instance_aws_id":"","instance_type":"e1.micro","ip":"10.1.0.11","key_pair":"some-keypair","name":"web-1","network_aws_id":"foo","network_is_public":false,"network_name":"web","public_ip":"","security_group_aws_ids":null,"security_groups":null,"service":"a0d8d660-3e60-4dcb-5afa-20268c213cdb","tags":{"Name":"web-1","ernest.instance_group":"web","ernest.service":"aws5039544"},"user_data":"","volumes":null},{"_action":"create","_component":"nat","_component_id":"nat::db-nat","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway_id":"","name":"db-nat","nat_gateway_allocation_id":"","nat_gateway_allocation_ip":"","nat_gateway_aws_id":"","public_network":"web","public_network_aws_id":"foo","routed_networks":["db"],"routed_networks_aws_ids":["foo"],"service":"a0d8d660-3e60-4dcb-5afa-20268c213cdb","tags":null,"vpc_id":"fakeaws"},{"_action":"none","_component":"credentials","_component_id":"credentials::aws","_provider":"aws-fake","_state":"waiting","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","name":"fakeaws","region":"fake"}],"changes":[{"_action":"delete","_component":"s3","_component_id":"s3::bucket-1","_provider":"aws-fake","_state":"completed","acl":"","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","bucket_location":"eu-west-1","bucket_uri":"","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","grantees":[{"id":"foo@r3labs.io","permissions":"FULL_CONTROL","type":"emailaddress"},{"id":"bar@r3labs.io","permissions":"WRITE","type":"emailaddress"}],"name":"bucket-1","service":"9acf4088-679a-42e6-5eb5-254ac23282a2","tags":{"ernest.service":"aws5039544"},"type":"s3.delete.aws-fake.done"},{"_action":"delete","_component":"elb","_component_id":"elb::elb-1","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","dns_name":"fake-dns-name","instance_aws_ids":["$(components.#[_component_id=\"instance::web-1\"].instance_aws_id)"],"instance_names":["web-1"],"instances":["web"],"is_private":true,"listeners":[{"from_port":80,"protocol":"HTTP","ssl_cert":"","to_port":80},{"from_port":443,"protocol":"HTTPS","ssl_cert":"foo","to_port":443}],"name":"elb-1","network_aws_ids":null,"networks":null,"security_group_aws_ids":["foo"],"security_groups":["web-sg-1"],"service":"9acf4088-679a-42e6-5eb5-254ac23282a2","tags":{"ernest.service":"aws5039544"},"type":"elb.delete.aws-fake.done"}],"edges":[{"destination":"s3::bucket-1","length":1,"source":"start"},{"destination":"end","length":1,"source":"s3::bucket-1"},{"destination":"elb::elb-1","length":1,"source":"start"},{"destination":"end","length":1,"source":"elb::elb-1"}]}', false, '', 0, '0001-01-01 00:00:00+00', '2017-07-21 18:55:59.650241+00', NULL);
INSERT INTO services (id, uuid, group_id, user_id, datacenter_id, name, type, version, status, last_known_error, options, definition, mapping, sync, sync_type, sync_interval, created_at, updated_at, deleted_at) VALUES (37, '4b32954d-f11b-470d-7e5a-c45e9f3b0fee', 3, 3, 1, 'aws1441251', 'aws-fake', '2017-07-21 18:56:21.377085+00', 'done', '', '', 'name: aws1441251
datacenter: fakeaws
vpcs:
- name: test-vpc
  subnet: 1.1.1.1/24
nat_gateways:
- name: db-nat
  public_network: web
networks:
- name: web
  vpc: test-vpc
  subnet: 10.1.0.0/24
  public: true
- name: db
  vpc: test-vpc
  subnet: 10.2.0.0/24
  public: false
  nat_gateway: db-nat
instances:
- name: web
  type: e1.micro
  image: ami-6666f915
  network: web
  start_ip: 10.1.0.11
  count: 1
  key_pair: some-keypair
security_groups:
- name: web-sg-1
  vpc: test-vpc
  egress:
  - from_port: "80"
    ip: 10.1.1.11/32
    protocol: any
    to_port: "80"
  ingress:
  - from_port: "80"
    ip: 10.1.1.11/32
    protocol: any
    to_port: "80"
loadbalancers:
- name: elb-1
  private: true
  instances:
  - web
  listeners:
  - from_port: 80
    to_port: 80
    protocol: http
  - from_port: 443
    to_port: 443
    protocol: https
    ssl_cert: foo
  security_groups:
  - web-sg-1
s3_buckets:
- name: bucket-1
  bucket_location: eu-west-1
  grantees:
  - id: foo@r3labs.io
    type: emailaddress
    permissions: full_control
  - id: bar@r3labs.io
    type: emailaddress
    permissions: write
', '{"id":"4b32954d-f11b-470d-7e5a-c45e9f3b0fee","action":"service.create","name":"aws1441251","options":null,"components":[{"_action":"create","_component":"vpc","_component_id":"vpc::test-vpc","_provider":"aws-fake","_state":"completed","auto_remove":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_region":"fake","datacenter_type":"aws-fake","name":"test-vpc","service":"d8bd4ffc-b4ab-4351-722c-2fab54bb6ab2","subnet":"1.1.1.1/24","tags":{"Name":"test-vpc","ernest.service":"aws1441251"},"vpc_aws_id":"fakeaws"},{"_action":"update","_component":"s3","_component_id":"s3::bucket-1","_provider":"aws-fake","_state":"completed","acl":"","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","bucket_location":"eu-west-1","bucket_uri":"","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","grantees":[{"id":"foo@r3labs.io","permissions":"FULL_CONTROL","type":"emailaddress"},{"id":"bar@r3labs.io","permissions":"WRITE","type":"emailaddress"}],"name":"bucket-1","service":"4b32954d-f11b-470d-7e5a-c45e9f3b0fee","tags":{"ernest.service":"aws1441251"},"type":"s3.update.aws-fake.done"},{"_action":"create","_component":"internet_gateway","_component_id":"internet_gateway::test-vpc","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway_aws_id":"foo","name":"test-vpc","service":"d8bd4ffc-b4ab-4351-722c-2fab54bb6ab2","tags":{"Name":"test-vpc","ernest.service":"aws1441251"},"vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"network","_component_id":"network::db","_provider":"aws-fake","_state":"completed","availability_zone":"","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway":"test-vpc","internet_gateway_aws_id":"","is_public":false,"name":"db","network_aws_id":"foo","range":"10.2.0.0/24","service":"d8bd4ffc-b4ab-4351-722c-2fab54bb6ab2","tags":{"Name":"db","ernest.nat_gateway":"db-nat","ernest.service":"aws1441251"},"vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"firewall","_component_id":"firewall::web-sg-1","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","name":"web-sg-1","rules":{"egress":[{"from_port":80,"ip":"10.1.1.11/32","protocol":"-1","to_port":80}],"ingress":[{"from_port":80,"ip":"10.1.1.11/32","protocol":"-1","to_port":80}]},"security_group_aws_id":"foo","service":"d8bd4ffc-b4ab-4351-722c-2fab54bb6ab2","tags":{"Name":"web-sg-1","ernest.service":"aws1441251"},"vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"network","_component_id":"network::web","_provider":"aws-fake","_state":"completed","availability_zone":"","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway":"test-vpc","internet_gateway_aws_id":"foo","is_public":true,"name":"web","network_aws_id":"foo","range":"10.1.0.0/24","service":"d8bd4ffc-b4ab-4351-722c-2fab54bb6ab2","tags":{"Name":"web","ernest.service":"aws1441251"},"vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"instance","_component_id":"instance::web-1","_provider":"aws-fake","_state":"completed","assign_elastic_ip":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","elastic_ip":"","iam_instance_profile":null,"iam_instance_profile_arn":null,"image":"ami-6666f915","instance_aws_id":"","instance_type":"e1.micro","ip":"10.1.0.11","key_pair":"some-keypair","name":"web-1","network_aws_id":"foo","network_is_public":false,"network_name":"web","public_ip":"","security_group_aws_ids":null,"security_groups":null,"service":"d8bd4ffc-b4ab-4351-722c-2fab54bb6ab2","tags":{"Name":"web-1","ernest.instance_group":"web","ernest.service":"aws1441251"},"user_data":"","volumes":null},{"_action":"create","_component":"nat","_component_id":"nat::db-nat","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway_id":"","name":"db-nat","nat_gateway_allocation_id":"","nat_gateway_allocation_ip":"","nat_gateway_aws_id":"","public_network":"web","public_network_aws_id":"foo","routed_networks":["db"],"routed_networks_aws_ids":["foo"],"service":"d8bd4ffc-b4ab-4351-722c-2fab54bb6ab2","tags":null,"vpc_id":"fakeaws"},{"_action":"update","_component":"elb","_component_id":"elb::elb-1","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","dns_name":"fake-dns-name","instance_aws_ids":["$(components.#[_component_id=\"instance::web-1\"].instance_aws_id)"],"instance_names":["web-1"],"instances":["web"],"is_private":true,"listeners":[{"from_port":80,"protocol":"HTTP","ssl_cert":"","to_port":80},{"from_port":443,"protocol":"HTTPS","ssl_cert":"foo","to_port":443}],"name":"elb-1","network_aws_ids":null,"networks":null,"security_group_aws_ids":["foo"],"security_groups":["web-sg-1"],"service":"4b32954d-f11b-470d-7e5a-c45e9f3b0fee","tags":{"ernest.service":"aws1441251"},"type":"elb.update.aws-fake.done"},{"_action":"none","_component":"credentials","_component_id":"credentials::aws","_provider":"aws-fake","_state":"waiting","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","name":"fakeaws","region":"fake"}],"changes":[{"_action":"update","_component":"elb","_component_id":"elb::elb-1","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","dns_name":"fake-dns-name","instance_aws_ids":["$(components.#[_component_id=\"instance::web-1\"].instance_aws_id)"],"instance_names":["web-1"],"instances":["web"],"is_private":true,"listeners":[{"from_port":80,"protocol":"HTTP","ssl_cert":"","to_port":80},{"from_port":443,"protocol":"HTTPS","ssl_cert":"foo","to_port":443}],"name":"elb-1","network_aws_ids":null,"networks":null,"security_group_aws_ids":["foo"],"security_groups":["web-sg-1"],"service":"4b32954d-f11b-470d-7e5a-c45e9f3b0fee","tags":{"ernest.service":"aws1441251"},"type":"elb.update.aws-fake.done"},{"_action":"update","_component":"s3","_component_id":"s3::bucket-1","_provider":"aws-fake","_state":"completed","acl":"","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","bucket_location":"eu-west-1","bucket_uri":"","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","grantees":[{"id":"foo@r3labs.io","permissions":"FULL_CONTROL","type":"emailaddress"},{"id":"bar@r3labs.io","permissions":"WRITE","type":"emailaddress"}],"name":"bucket-1","service":"4b32954d-f11b-470d-7e5a-c45e9f3b0fee","tags":{"ernest.service":"aws1441251"},"type":"s3.update.aws-fake.done"}],"edges":[{"destination":"elb::elb-1","length":1,"source":"start"},{"destination":"end","length":1,"source":"elb::elb-1"},{"destination":"s3::bucket-1","length":1,"source":"start"},{"destination":"end","length":1,"source":"s3::bucket-1"}]}', false, '', 0, '0001-01-01 00:00:00+00', '2017-07-21 18:56:21.418324+00', NULL);
INSERT INTO services (id, uuid, group_id, user_id, datacenter_id, name, type, version, status, last_known_error, options, definition, mapping, sync, sync_type, sync_interval, created_at, updated_at, deleted_at) VALUES (39, 'bc941b3a-cede-4893-4b1b-fd4a3d5a6118', 3, 3, 1, 'aws4033122', 'aws-fake', '2017-07-21 18:56:28.720604+00', 'done', '', '', 'name: aws4033122
datacenter: fakeaws
vpcs:
- name: test-vpc
  subnet: 1.1.1.1/24
nat_gateways:
- name: db-nat
  public_network: web
networks:
- name: web
  vpc: test-vpc
  subnet: 10.1.0.0/24
  public: true
- name: db-a
  vpc: test-vpc
  subnet: 10.2.0.0/24
  public: false
  availability_zone: fake-1a
  nat_gateway: db-nat
- name: db-b
  vpc: test-vpc
  subnet: 10.3.0.0/24
  public: false
  availability_zone: fake-1b
  nat_gateway: db-nat
instances:
- name: web
  type: e1.micro
  image: ami-6666f915
  network: web
  start_ip: 10.1.0.11
  count: 1
  key_pair: some-keypair
security_groups:
- name: web-sg-1
  vpc: test-vpc
  egress:
  - from_port: "80"
    ip: 10.1.1.11/32
    protocol: any
    to_port: "80"
  ingress:
  - from_port: "80"
    ip: 10.1.1.11/32
    protocol: any
    to_port: "80"
rds_clusters:
- name: aurora
  engine: aurora
  port: 3306
  networks:
  - db-a
  - db-b
  security_groups:
  - web-sg-1
  backups:
    retention: 1
  database_name: test
  database_username: test
  database_password: testpass-2
', '{"id":"bc941b3a-cede-4893-4b1b-fd4a3d5a6118","action":"service.create","name":"aws4033122","options":null,"components":[{"_action":"create","_component":"vpc","_component_id":"vpc::test-vpc","_provider":"aws-fake","_state":"completed","auto_remove":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_region":"fake","datacenter_type":"aws-fake","name":"test-vpc","service":"5285def4-89f3-465b-7491-e75f9f8d2304","subnet":"1.1.1.1/24","tags":{"Name":"test-vpc","ernest.service":"aws4033122"},"vpc_aws_id":"fakeaws"},{"_action":"create","_component":"internet_gateway","_component_id":"internet_gateway::test-vpc","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway_aws_id":"foo","name":"test-vpc","service":"5285def4-89f3-465b-7491-e75f9f8d2304","tags":{"Name":"test-vpc","ernest.service":"aws4033122"},"vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"network","_component_id":"network::db-a","_provider":"aws-fake","_state":"completed","availability_zone":"fake-1a","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway":"test-vpc","internet_gateway_aws_id":"","is_public":false,"name":"db-a","network_aws_id":"foo","range":"10.2.0.0/24","service":"5285def4-89f3-465b-7491-e75f9f8d2304","tags":{"Name":"db-a","ernest.nat_gateway":"db-nat","ernest.service":"aws4033122"},"vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"network","_component_id":"network::db-b","_provider":"aws-fake","_state":"completed","availability_zone":"fake-1b","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway":"test-vpc","internet_gateway_aws_id":"","is_public":false,"name":"db-b","network_aws_id":"foo","range":"10.3.0.0/24","service":"5285def4-89f3-465b-7491-e75f9f8d2304","tags":{"Name":"db-b","ernest.nat_gateway":"db-nat","ernest.service":"aws4033122"},"vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"firewall","_component_id":"firewall::web-sg-1","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","name":"web-sg-1","rules":{"egress":[{"from_port":80,"ip":"10.1.1.11/32","protocol":"-1","to_port":80}],"ingress":[{"from_port":80,"ip":"10.1.1.11/32","protocol":"-1","to_port":80}]},"security_group_aws_id":"foo","service":"5285def4-89f3-465b-7491-e75f9f8d2304","tags":{"Name":"web-sg-1","ernest.service":"aws4033122"},"vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"network","_component_id":"network::web","_provider":"aws-fake","_state":"completed","availability_zone":"","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway":"test-vpc","internet_gateway_aws_id":"foo","is_public":true,"name":"web","network_aws_id":"foo","range":"10.1.0.0/24","service":"5285def4-89f3-465b-7491-e75f9f8d2304","tags":{"Name":"web","ernest.service":"aws4033122"},"vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"update","_component":"rds_cluster","_component_id":"rds_cluster::aurora","_provider":"aws-fake","_state":"completed","arn":"","availability_zones":null,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","backup_retention":1,"database_name":"test","database_password":"testpass-2","database_username":"test","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","endpoint":"rds-endpoint","engine":"aurora","final_snapshot":false,"name":"aurora","network_aws_ids":["foo","foo"],"networks":["db-a","db-b"],"port":3306,"security_group_aws_ids":["foo"],"security_groups":["web-sg-1"],"service":"bc941b3a-cede-4893-4b1b-fd4a3d5a6118","tags":{"ernest.service":"aws4033122"},"type":"rds_cluster.update.aws-fake.done"},{"_action":"create","_component":"instance","_component_id":"instance::web-1","_provider":"aws-fake","_state":"completed","assign_elastic_ip":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","elastic_ip":"","iam_instance_profile":null,"iam_instance_profile_arn":null,"image":"ami-6666f915","instance_aws_id":"","instance_type":"e1.micro","ip":"10.1.0.11","key_pair":"some-keypair","name":"web-1","network_aws_id":"foo","network_is_public":false,"network_name":"web","public_ip":"","security_group_aws_ids":null,"security_groups":null,"service":"5285def4-89f3-465b-7491-e75f9f8d2304","tags":{"Name":"web-1","ernest.instance_group":"web","ernest.service":"aws4033122"},"user_data":"","volumes":null},{"_action":"create","_component":"nat","_component_id":"nat::db-nat","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway_id":"","name":"db-nat","nat_gateway_allocation_id":"","nat_gateway_allocation_ip":"","nat_gateway_aws_id":"","public_network":"web","public_network_aws_id":"foo","routed_networks":["db-a","db-b"],"routed_networks_aws_ids":["foo","foo"],"service":"5285def4-89f3-465b-7491-e75f9f8d2304","tags":null,"vpc_id":"fakeaws"},{"_action":"none","_component":"credentials","_component_id":"credentials::aws","_provider":"aws-fake","_state":"waiting","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","name":"fakeaws","region":"fake"}],"changes":[{"_action":"update","_component":"rds_cluster","_component_id":"rds_cluster::aurora","_provider":"aws-fake","_state":"completed","arn":"","availability_zones":null,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","backup_retention":1,"database_name":"test","database_password":"testpass-2","database_username":"test","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","endpoint":"rds-endpoint","engine":"aurora","final_snapshot":false,"name":"aurora","network_aws_ids":["foo","foo"],"networks":["db-a","db-b"],"port":3306,"security_group_aws_ids":["foo"],"security_groups":["web-sg-1"],"service":"bc941b3a-cede-4893-4b1b-fd4a3d5a6118","tags":{"ernest.service":"aws4033122"},"type":"rds_cluster.update.aws-fake.done"}],"edges":[{"destination":"rds_cluster::aurora","length":1,"source":"start"},{"destination":"end","length":1,"source":"rds_cluster::aurora"}]}', false, '', 0, '0001-01-01 00:00:00+00', '2017-07-21 18:56:28.745731+00', NULL);
INSERT INTO services (id, uuid, group_id, user_id, datacenter_id, name, type, version, status, last_known_error, options, definition, mapping, sync, sync_type, sync_interval, created_at, updated_at, deleted_at) VALUES (32, 'b1f584a1-e43c-484a-7222-4c14434e2fe6', 3, 3, 1, 'aws23457', 'aws-fake', '2017-07-21 18:56:05.764108+00', 'done', '', '', 'name: aws23457
datacenter: fakeaws
vpcs:
- name: test-vpc
  subnet: 1.1.1.1/24
networks:
- name: web
  vpc: test-vpc
  subnet: 10.1.0.0/24
  public: true
- name: bknd
  vpc: test-vpc
  subnet: 10.2.0.0/24
instances:
- name: web
  type: e1.micro
  image: ami-6666f915
  network: web
  start_ip: 10.1.0.11
  count: 1
  key_pair: some-keypair
security_groups:
- name: web-sg-1
  vpc: test-vpc
  egress:
  - from_port: "80"
    ip: 10.1.1.11/32
    protocol: any
    to_port: "80"
  ingress:
  - from_port: "80"
    ip: 10.1.1.11/32
    protocol: any
    to_port: "80"
', '{"id":"b1f584a1-e43c-484a-7222-4c14434e2fe6","action":"service.create","name":"aws23457","options":null,"components":[{"_action":"none","_component":"credentials","_component_id":"credentials::aws","_provider":"aws-fake","_state":"waiting","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","name":"fakeaws","region":"fake"},{"_action":"create","_component":"vpc","_component_id":"vpc::test-vpc","_provider":"aws-fake","_state":"completed","auto_remove":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_region":"fake","datacenter_type":"aws-fake","name":"test-vpc","service":"b1f584a1-e43c-484a-7222-4c14434e2fe6","subnet":"1.1.1.1/24","tags":{"Name":"test-vpc","ernest.service":"aws23457"},"type":"vpc.create.aws-fake.done","vpc_aws_id":"fakeaws"},{"_action":"create","_component":"internet_gateway","_component_id":"internet_gateway::test-vpc","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway_aws_id":"foo","name":"test-vpc","service":"b1f584a1-e43c-484a-7222-4c14434e2fe6","tags":{"Name":"test-vpc","ernest.service":"aws23457"},"type":"internet_gateway.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"network","_component_id":"network::bknd","_provider":"aws-fake","_state":"completed","availability_zone":"","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway":"test-vpc","internet_gateway_aws_id":"","is_public":false,"name":"bknd","network_aws_id":"foo","range":"10.2.0.0/24","service":"b1f584a1-e43c-484a-7222-4c14434e2fe6","tags":{"Name":"bknd","ernest.service":"aws23457"},"type":"network.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"firewall","_component_id":"firewall::web-sg-1","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","name":"web-sg-1","rules":{"egress":[{"from_port":80,"ip":"10.1.1.11/32","protocol":"-1","to_port":80}],"ingress":[{"from_port":80,"ip":"10.1.1.11/32","protocol":"-1","to_port":80}]},"security_group_aws_id":"foo","service":"b1f584a1-e43c-484a-7222-4c14434e2fe6","tags":{"Name":"web-sg-1","ernest.service":"aws23457"},"type":"firewall.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"network","_component_id":"network::web","_provider":"aws-fake","_state":"completed","availability_zone":"","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway":"test-vpc","internet_gateway_aws_id":"foo","is_public":true,"name":"web","network_aws_id":"foo","range":"10.1.0.0/24","service":"b1f584a1-e43c-484a-7222-4c14434e2fe6","tags":{"Name":"web","ernest.service":"aws23457"},"type":"network.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"instance","_component_id":"instance::web-1","_provider":"aws-fake","_state":"completed","assign_elastic_ip":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","elastic_ip":"","iam_instance_profile":null,"iam_instance_profile_arn":null,"image":"ami-6666f915","instance_aws_id":"","instance_type":"e1.micro","ip":"10.1.0.11","key_pair":"some-keypair","name":"web-1","network_aws_id":"foo","network_is_public":false,"network_name":"web","public_ip":"","security_group_aws_ids":null,"security_groups":null,"service":"b1f584a1-e43c-484a-7222-4c14434e2fe6","tags":{"Name":"web-1","ernest.instance_group":"web","ernest.service":"aws23457"},"type":"instance.create.aws-fake.done","user_data":"","volumes":null}],"changes":[{"_action":"create","_component":"vpc","_component_id":"vpc::test-vpc","_provider":"aws-fake","_state":"completed","auto_remove":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_region":"fake","datacenter_type":"aws-fake","name":"test-vpc","service":"b1f584a1-e43c-484a-7222-4c14434e2fe6","subnet":"1.1.1.1/24","tags":{"Name":"test-vpc","ernest.service":"aws23457"},"type":"vpc.create.aws-fake.done","vpc_aws_id":"fakeaws"},{"_action":"create","_component":"internet_gateway","_component_id":"internet_gateway::test-vpc","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway_aws_id":"foo","name":"test-vpc","service":"b1f584a1-e43c-484a-7222-4c14434e2fe6","tags":{"Name":"test-vpc","ernest.service":"aws23457"},"type":"internet_gateway.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"network","_component_id":"network::web","_provider":"aws-fake","_state":"completed","availability_zone":"","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway":"test-vpc","internet_gateway_aws_id":"foo","is_public":true,"name":"web","network_aws_id":"foo","range":"10.1.0.0/24","service":"b1f584a1-e43c-484a-7222-4c14434e2fe6","tags":{"Name":"web","ernest.service":"aws23457"},"type":"network.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"network","_component_id":"network::bknd","_provider":"aws-fake","_state":"completed","availability_zone":"","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway":"test-vpc","internet_gateway_aws_id":"","is_public":false,"name":"bknd","network_aws_id":"foo","range":"10.2.0.0/24","service":"b1f584a1-e43c-484a-7222-4c14434e2fe6","tags":{"Name":"bknd","ernest.service":"aws23457"},"type":"network.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"instance","_component_id":"instance::web-1","_provider":"aws-fake","_state":"completed","assign_elastic_ip":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","elastic_ip":"","iam_instance_profile":null,"iam_instance_profile_arn":null,"image":"ami-6666f915","instance_aws_id":"","instance_type":"e1.micro","ip":"10.1.0.11","key_pair":"some-keypair","name":"web-1","network_aws_id":"foo","network_is_public":false,"network_name":"web","public_ip":"","security_group_aws_ids":null,"security_groups":null,"service":"b1f584a1-e43c-484a-7222-4c14434e2fe6","tags":{"Name":"web-1","ernest.instance_group":"web","ernest.service":"aws23457"},"type":"instance.create.aws-fake.done","user_data":"","volumes":null},{"_action":"create","_component":"firewall","_component_id":"firewall::web-sg-1","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","name":"web-sg-1","rules":{"egress":[{"from_port":80,"ip":"10.1.1.11/32","protocol":"-1","to_port":80}],"ingress":[{"from_port":80,"ip":"10.1.1.11/32","protocol":"-1","to_port":80}]},"security_group_aws_id":"foo","service":"b1f584a1-e43c-484a-7222-4c14434e2fe6","tags":{"Name":"web-sg-1","ernest.service":"aws23457"},"type":"firewall.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"}],"edges":[{"destination":"internet_gateway::test-vpc","length":1,"source":"vpc::test-vpc"},{"destination":"network::web","length":1,"source":"internet_gateway::test-vpc"},{"destination":"network::bknd","length":1,"source":"vpc::test-vpc"},{"destination":"instance::web-1","length":1,"source":"network::web"},{"destination":"firewall::web-sg-1","length":1,"source":"vpc::test-vpc"},{"destination":"vpc::test-vpc","length":1,"source":"start"},{"destination":"end","length":1,"source":"network::bknd"},{"destination":"end","length":1,"source":"instance::web-1"},{"destination":"end","length":1,"source":"firewall::web-sg-1"}]}', false, '', 0, '0001-01-01 00:00:00+00', '2017-07-21 18:56:05.850519+00', NULL);
INSERT INTO services (id, uuid, group_id, user_id, datacenter_id, name, type, version, status, last_known_error, options, definition, mapping, sync, sync_type, sync_interval, created_at, updated_at, deleted_at) VALUES (38, '5285def4-89f3-465b-7491-e75f9f8d2304', 3, 3, 1, 'aws4033122', 'aws-fake', '2017-07-21 18:56:27.551055+00', 'done', '', '', 'name: aws4033122
datacenter: fakeaws
vpcs:
- name: test-vpc
  subnet: 1.1.1.1/24
nat_gateways:
- name: db-nat
  public_network: web
networks:
- name: web
  vpc: test-vpc
  subnet: 10.1.0.0/24
  public: true
- name: db-a
  vpc: test-vpc
  subnet: 10.2.0.0/24
  public: false
  availability_zone: fake-1a
  nat_gateway: db-nat
- name: db-b
  vpc: test-vpc
  subnet: 10.3.0.0/24
  public: false
  availability_zone: fake-1b
  nat_gateway: db-nat
instances:
- name: web
  type: e1.micro
  image: ami-6666f915
  network: web
  start_ip: 10.1.0.11
  count: 1
  key_pair: some-keypair
security_groups:
- name: web-sg-1
  vpc: test-vpc
  egress:
  - from_port: "80"
    ip: 10.1.1.11/32
    protocol: any
    to_port: "80"
  ingress:
  - from_port: "80"
    ip: 10.1.1.11/32
    protocol: any
    to_port: "80"
rds_clusters:
- name: aurora
  engine: aurora
  port: 3306
  networks:
  - db-a
  - db-b
  security_groups:
  - web-sg-1
  backups:
    retention: 1
  database_name: test
  database_username: test
  database_password: testpass
', '{"id":"5285def4-89f3-465b-7491-e75f9f8d2304","action":"service.create","name":"aws4033122","options":null,"components":[{"_action":"none","_component":"credentials","_component_id":"credentials::aws","_provider":"aws-fake","_state":"waiting","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","name":"fakeaws","region":"fake"},{"_action":"create","_component":"vpc","_component_id":"vpc::test-vpc","_provider":"aws-fake","_state":"completed","auto_remove":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_region":"fake","datacenter_type":"aws-fake","name":"test-vpc","service":"5285def4-89f3-465b-7491-e75f9f8d2304","subnet":"1.1.1.1/24","tags":{"Name":"test-vpc","ernest.service":"aws4033122"},"type":"vpc.create.aws-fake.done","vpc_aws_id":"fakeaws"},{"_action":"create","_component":"internet_gateway","_component_id":"internet_gateway::test-vpc","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway_aws_id":"foo","name":"test-vpc","service":"5285def4-89f3-465b-7491-e75f9f8d2304","tags":{"Name":"test-vpc","ernest.service":"aws4033122"},"type":"internet_gateway.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"network","_component_id":"network::db-a","_provider":"aws-fake","_state":"completed","availability_zone":"fake-1a","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway":"test-vpc","internet_gateway_aws_id":"","is_public":false,"name":"db-a","network_aws_id":"foo","range":"10.2.0.0/24","service":"5285def4-89f3-465b-7491-e75f9f8d2304","tags":{"Name":"db-a","ernest.nat_gateway":"db-nat","ernest.service":"aws4033122"},"type":"network.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"network","_component_id":"network::db-b","_provider":"aws-fake","_state":"completed","availability_zone":"fake-1b","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway":"test-vpc","internet_gateway_aws_id":"","is_public":false,"name":"db-b","network_aws_id":"foo","range":"10.3.0.0/24","service":"5285def4-89f3-465b-7491-e75f9f8d2304","tags":{"Name":"db-b","ernest.nat_gateway":"db-nat","ernest.service":"aws4033122"},"type":"network.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"firewall","_component_id":"firewall::web-sg-1","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","name":"web-sg-1","rules":{"egress":[{"from_port":80,"ip":"10.1.1.11/32","protocol":"-1","to_port":80}],"ingress":[{"from_port":80,"ip":"10.1.1.11/32","protocol":"-1","to_port":80}]},"security_group_aws_id":"foo","service":"5285def4-89f3-465b-7491-e75f9f8d2304","tags":{"Name":"web-sg-1","ernest.service":"aws4033122"},"type":"firewall.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"network","_component_id":"network::web","_provider":"aws-fake","_state":"completed","availability_zone":"","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway":"test-vpc","internet_gateway_aws_id":"foo","is_public":true,"name":"web","network_aws_id":"foo","range":"10.1.0.0/24","service":"5285def4-89f3-465b-7491-e75f9f8d2304","tags":{"Name":"web","ernest.service":"aws4033122"},"type":"network.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"rds_cluster","_component_id":"rds_cluster::aurora","_provider":"aws-fake","_state":"completed","arn":"","availability_zones":null,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","backup_retention":1,"database_name":"test","database_password":"testpass","database_username":"test","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","endpoint":"rds-endpoint","engine":"aurora","final_snapshot":false,"name":"aurora","network_aws_ids":["foo","foo"],"networks":["db-a","db-b"],"port":3306,"security_group_aws_ids":["foo"],"security_groups":["web-sg-1"],"service":"5285def4-89f3-465b-7491-e75f9f8d2304","tags":{"ernest.service":"aws4033122"},"type":"rds_cluster.create.aws-fake.done"},{"_action":"create","_component":"instance","_component_id":"instance::web-1","_provider":"aws-fake","_state":"completed","assign_elastic_ip":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","elastic_ip":"","iam_instance_profile":null,"iam_instance_profile_arn":null,"image":"ami-6666f915","instance_aws_id":"","instance_type":"e1.micro","ip":"10.1.0.11","key_pair":"some-keypair","name":"web-1","network_aws_id":"foo","network_is_public":false,"network_name":"web","public_ip":"","security_group_aws_ids":null,"security_groups":null,"service":"5285def4-89f3-465b-7491-e75f9f8d2304","tags":{"Name":"web-1","ernest.instance_group":"web","ernest.service":"aws4033122"},"type":"instance.create.aws-fake.done","user_data":"","volumes":null},{"_action":"create","_component":"nat","_component_id":"nat::db-nat","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway_id":"","name":"db-nat","nat_gateway_allocation_id":"","nat_gateway_allocation_ip":"","nat_gateway_aws_id":"","public_network":"web","public_network_aws_id":"foo","routed_networks":["db-a","db-b"],"routed_networks_aws_ids":["foo","foo"],"service":"5285def4-89f3-465b-7491-e75f9f8d2304","tags":null,"type":"nat.create.aws-fake.done","vpc_id":"fakeaws"}],"changes":[{"_action":"create","_component":"vpc","_component_id":"vpc::test-vpc","_provider":"aws-fake","_state":"completed","auto_remove":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_region":"fake","datacenter_type":"aws-fake","name":"test-vpc","service":"5285def4-89f3-465b-7491-e75f9f8d2304","subnet":"1.1.1.1/24","tags":{"Name":"test-vpc","ernest.service":"aws4033122"},"type":"vpc.create.aws-fake.done","vpc_aws_id":"fakeaws"},{"_action":"create","_component":"internet_gateway","_component_id":"internet_gateway::test-vpc","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway_aws_id":"foo","name":"test-vpc","service":"5285def4-89f3-465b-7491-e75f9f8d2304","tags":{"Name":"test-vpc","ernest.service":"aws4033122"},"type":"internet_gateway.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"network","_component_id":"network::web","_provider":"aws-fake","_state":"completed","availability_zone":"","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway":"test-vpc","internet_gateway_aws_id":"foo","is_public":true,"name":"web","network_aws_id":"foo","range":"10.1.0.0/24","service":"5285def4-89f3-465b-7491-e75f9f8d2304","tags":{"Name":"web","ernest.service":"aws4033122"},"type":"network.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"network","_component_id":"network::db-a","_provider":"aws-fake","_state":"completed","availability_zone":"fake-1a","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway":"test-vpc","internet_gateway_aws_id":"","is_public":false,"name":"db-a","network_aws_id":"foo","range":"10.2.0.0/24","service":"5285def4-89f3-465b-7491-e75f9f8d2304","tags":{"Name":"db-a","ernest.nat_gateway":"db-nat","ernest.service":"aws4033122"},"type":"network.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"network","_component_id":"network::db-b","_provider":"aws-fake","_state":"completed","availability_zone":"fake-1b","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway":"test-vpc","internet_gateway_aws_id":"","is_public":false,"name":"db-b","network_aws_id":"foo","range":"10.3.0.0/24","service":"5285def4-89f3-465b-7491-e75f9f8d2304","tags":{"Name":"db-b","ernest.nat_gateway":"db-nat","ernest.service":"aws4033122"},"type":"network.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"instance","_component_id":"instance::web-1","_provider":"aws-fake","_state":"completed","assign_elastic_ip":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","elastic_ip":"","iam_instance_profile":null,"iam_instance_profile_arn":null,"image":"ami-6666f915","instance_aws_id":"","instance_type":"e1.micro","ip":"10.1.0.11","key_pair":"some-keypair","name":"web-1","network_aws_id":"foo","network_is_public":false,"network_name":"web","public_ip":"","security_group_aws_ids":null,"security_groups":null,"service":"5285def4-89f3-465b-7491-e75f9f8d2304","tags":{"Name":"web-1","ernest.instance_group":"web","ernest.service":"aws4033122"},"type":"instance.create.aws-fake.done","user_data":"","volumes":null},{"_action":"create","_component":"firewall","_component_id":"firewall::web-sg-1","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","name":"web-sg-1","rules":{"egress":[{"from_port":80,"ip":"10.1.1.11/32","protocol":"-1","to_port":80}],"ingress":[{"from_port":80,"ip":"10.1.1.11/32","protocol":"-1","to_port":80}]},"security_group_aws_id":"foo","service":"5285def4-89f3-465b-7491-e75f9f8d2304","tags":{"Name":"web-sg-1","ernest.service":"aws4033122"},"type":"firewall.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"nat","_component_id":"nat::db-nat","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway_id":"","name":"db-nat","nat_gateway_allocation_id":"","nat_gateway_allocation_ip":"","nat_gateway_aws_id":"","public_network":"web","public_network_aws_id":"foo","routed_networks":["db-a","db-b"],"routed_networks_aws_ids":["foo","foo"],"service":"5285def4-89f3-465b-7491-e75f9f8d2304","tags":null,"type":"nat.create.aws-fake.done","vpc_id":"fakeaws"},{"_action":"create","_component":"rds_cluster","_component_id":"rds_cluster::aurora","_provider":"aws-fake","_state":"completed","arn":"","availability_zones":null,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","backup_retention":1,"database_name":"test","database_password":"testpass","database_username":"test","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","endpoint":"rds-endpoint","engine":"aurora","final_snapshot":false,"name":"aurora","network_aws_ids":["foo","foo"],"networks":["db-a","db-b"],"port":3306,"security_group_aws_ids":["foo"],"security_groups":["web-sg-1"],"service":"5285def4-89f3-465b-7491-e75f9f8d2304","tags":{"ernest.service":"aws4033122"},"type":"rds_cluster.create.aws-fake.done"}],"edges":[{"destination":"internet_gateway::test-vpc","length":1,"source":"vpc::test-vpc"},{"destination":"network::web","length":1,"source":"internet_gateway::test-vpc"},{"destination":"network::db-a","length":1,"source":"vpc::test-vpc"},{"destination":"network::db-b","length":1,"source":"vpc::test-vpc"},{"destination":"instance::web-1","length":1,"source":"network::web"},{"destination":"firewall::web-sg-1","length":1,"source":"vpc::test-vpc"},{"destination":"nat::db-nat","length":1,"source":"network::db-a"},{"destination":"nat::db-nat","length":1,"source":"network::db-b"},{"destination":"nat::db-nat","length":1,"source":"network::web"},{"destination":"rds_cluster::aurora","length":1,"source":"firewall::web-sg-1"},{"destination":"rds_cluster::aurora","length":1,"source":"network::db-a"},{"destination":"rds_cluster::aurora","length":1,"source":"network::db-b"},{"destination":"vpc::test-vpc","length":1,"source":"start"},{"destination":"end","length":1,"source":"instance::web-1"},{"destination":"end","length":1,"source":"nat::db-nat"},{"destination":"end","length":1,"source":"rds_cluster::aurora"}]}', false, '', 0, '0001-01-01 00:00:00+00', '2017-07-21 18:56:27.696367+00', NULL);
INSERT INTO services (id, uuid, group_id, user_id, datacenter_id, name, type, version, status, last_known_error, options, definition, mapping, sync, sync_type, sync_interval, created_at, updated_at, deleted_at) VALUES (41, '61cf4133-1f45-4bd3-5a21-1f1e0ca15c30', 3, 3, 1, 'aws4213851', 'aws-fake', '2017-07-21 18:56:36.031317+00', 'done', '', '', 'name: aws4213851
datacenter: fakeaws
vpcs:
- name: test-vpc
  subnet: 1.1.1.1/24
nat_gateways:
- name: db-nat
  public_network: web
networks:
- name: web
  vpc: test-vpc
  subnet: 10.1.0.0/24
  public: true
- name: db-a
  vpc: test-vpc
  subnet: 10.2.0.0/24
  public: false
  availability_zone: fake-1a
  nat_gateway: db-nat
- name: db-b
  vpc: test-vpc
  subnet: 10.3.0.0/24
  public: false
  availability_zone: fake-1b
  nat_gateway: db-nat
instances:
- name: web
  type: e1.micro
  image: ami-6666f915
  network: web
  start_ip: 10.1.0.11
  count: 1
  key_pair: some-keypair
security_groups:
- name: web-sg-1
  vpc: test-vpc
  egress:
  - from_port: "80"
    ip: 10.1.1.11/32
    protocol: any
    to_port: "80"
  ingress:
  - from_port: "80"
    ip: 10.1.1.11/32
    protocol: any
    to_port: "80"
rds_clusters:
- name: aurora
  engine: aurora
  port: 3306
  networks:
  - db-a
  - db-b
  security_groups:
  - web-sg-1
  backups:
    retention: 1
  database_name: test
  database_username: test
  database_password: testpass-2
rds_instances:
- name: test-1
  cluster: aurora
  size: db.r3.xlarge
', '{"id":"61cf4133-1f45-4bd3-5a21-1f1e0ca15c30","action":"service.create","name":"aws4213851","options":null,"components":[{"_action":"create","_component":"vpc","_component_id":"vpc::test-vpc","_provider":"aws-fake","_state":"completed","auto_remove":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_region":"fake","datacenter_type":"aws-fake","name":"test-vpc","service":"60ea0231-0af5-453b-4428-11bc56a92290","subnet":"1.1.1.1/24","tags":{"Name":"test-vpc","ernest.service":"aws4213851"},"vpc_aws_id":"fakeaws"},{"_action":"create","_component":"internet_gateway","_component_id":"internet_gateway::test-vpc","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway_aws_id":"foo","name":"test-vpc","service":"60ea0231-0af5-453b-4428-11bc56a92290","tags":{"Name":"test-vpc","ernest.service":"aws4213851"},"vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"network","_component_id":"network::db-a","_provider":"aws-fake","_state":"completed","availability_zone":"fake-1a","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway":"test-vpc","internet_gateway_aws_id":"","is_public":false,"name":"db-a","network_aws_id":"foo","range":"10.2.0.0/24","service":"60ea0231-0af5-453b-4428-11bc56a92290","tags":{"Name":"db-a","ernest.nat_gateway":"db-nat","ernest.service":"aws4213851"},"vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"network","_component_id":"network::db-b","_provider":"aws-fake","_state":"completed","availability_zone":"fake-1b","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway":"test-vpc","internet_gateway_aws_id":"","is_public":false,"name":"db-b","network_aws_id":"foo","range":"10.3.0.0/24","service":"60ea0231-0af5-453b-4428-11bc56a92290","tags":{"Name":"db-b","ernest.nat_gateway":"db-nat","ernest.service":"aws4213851"},"vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"firewall","_component_id":"firewall::web-sg-1","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","name":"web-sg-1","rules":{"egress":[{"from_port":80,"ip":"10.1.1.11/32","protocol":"-1","to_port":80}],"ingress":[{"from_port":80,"ip":"10.1.1.11/32","protocol":"-1","to_port":80}]},"security_group_aws_id":"foo","service":"60ea0231-0af5-453b-4428-11bc56a92290","tags":{"Name":"web-sg-1","ernest.service":"aws4213851"},"vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"network","_component_id":"network::web","_provider":"aws-fake","_state":"completed","availability_zone":"","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway":"test-vpc","internet_gateway_aws_id":"foo","is_public":true,"name":"web","network_aws_id":"foo","range":"10.1.0.0/24","service":"60ea0231-0af5-453b-4428-11bc56a92290","tags":{"Name":"web","ernest.service":"aws4213851"},"vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"rds_cluster","_component_id":"rds_cluster::aurora","_provider":"aws-fake","_state":"completed","arn":"","availability_zones":null,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","backup_retention":1,"database_name":"test","database_password":"testpass-2","database_username":"test","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","endpoint":"rds-endpoint","engine":"aurora","final_snapshot":false,"name":"aurora","network_aws_ids":["foo","foo"],"networks":["db-a","db-b"],"port":3306,"security_group_aws_ids":["foo"],"security_groups":["web-sg-1"],"service":"60ea0231-0af5-453b-4428-11bc56a92290","tags":{"ernest.service":"aws4213851"}},{"_action":"create","_component":"instance","_component_id":"instance::web-1","_provider":"aws-fake","_state":"completed","assign_elastic_ip":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","elastic_ip":"","iam_instance_profile":null,"iam_instance_profile_arn":null,"image":"ami-6666f915","instance_aws_id":"","instance_type":"e1.micro","ip":"10.1.0.11","key_pair":"some-keypair","name":"web-1","network_aws_id":"foo","network_is_public":false,"network_name":"web","public_ip":"","security_group_aws_ids":null,"security_groups":null,"service":"60ea0231-0af5-453b-4428-11bc56a92290","tags":{"Name":"web-1","ernest.instance_group":"web","ernest.service":"aws4213851"},"user_data":"","volumes":null},{"_action":"create","_component":"nat","_component_id":"nat::db-nat","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway_id":"","name":"db-nat","nat_gateway_allocation_id":"","nat_gateway_allocation_ip":"","nat_gateway_aws_id":"","public_network":"web","public_network_aws_id":"foo","routed_networks":["db-a","db-b"],"routed_networks_aws_ids":["foo","foo"],"service":"60ea0231-0af5-453b-4428-11bc56a92290","tags":null,"vpc_id":"fakeaws"},{"_action":"update","_component":"rds_instance","_component_id":"rds_instance::test-1","_provider":"aws-fake","_state":"completed","arn":"","auto_upgrade":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","cluster":"aurora","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","endpoint":"rds-endpoint","engine":"aurora","final_snapshot":false,"multi_az":false,"name":"test-1","network_aws_ids":null,"networks":null,"public":false,"security_group_aws_ids":null,"security_groups":null,"service":"61cf4133-1f45-4bd3-5a21-1f1e0ca15c30","size":"db.r3.xlarge","tags":{"ernest.service":"aws4213851"},"type":"rds_instance.update.aws-fake.done"},{"_action":"none","_component":"credentials","_component_id":"credentials::aws","_provider":"aws-fake","_state":"waiting","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","name":"fakeaws","region":"fake"}],"changes":[{"_action":"update","_component":"rds_instance","_component_id":"rds_instance::test-1","_provider":"aws-fake","_state":"completed","arn":"","auto_upgrade":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","cluster":"aurora","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","endpoint":"rds-endpoint","engine":"aurora","final_snapshot":false,"multi_az":false,"name":"test-1","network_aws_ids":null,"networks":null,"public":false,"security_group_aws_ids":null,"security_groups":null,"service":"61cf4133-1f45-4bd3-5a21-1f1e0ca15c30","size":"db.r3.xlarge","tags":{"ernest.service":"aws4213851"},"type":"rds_instance.update.aws-fake.done"}],"edges":[{"destination":"rds_instance::test-1","length":1,"source":"start"},{"destination":"end","length":1,"source":"rds_instance::test-1"}]}', false, '', 0, '0001-01-01 00:00:00+00', '2017-07-21 18:56:36.054387+00', NULL);
INSERT INTO services (id, uuid, group_id, user_id, datacenter_id, name, type, version, status, last_known_error, options, definition, mapping, sync, sync_type, sync_interval, created_at, updated_at, deleted_at) VALUES (33, 'ad5d68aa-6c62-4cb6-6c8d-ad2a6ac38142', 3, 3, 1, 'aws23457', 'aws-fake', '2017-07-21 18:56:06.876965+00', 'done', '', '', 'name: aws23457
datacenter: fakeaws
vpcs:
- name: test-vpc
  subnet: 1.1.1.1/24
networks:
- name: web
  vpc: test-vpc
  public: true
  subnet: 10.1.0.0/24
instances:
- name: web
  type: e1.micro
  image: ami-6666f915
  network: web
  start_ip: 10.1.0.11
  count: 1
  key_pair: some-keypair
security_groups:
- name: web-sg-1
  vpc: test-vpc
  egress:
  - from_port: "80"
    ip: 10.1.1.11/32
    protocol: any
    to_port: "80"
  ingress:
  - from_port: "80"
    ip: 10.1.1.11/32
    protocol: any
    to_port: "80"
', '{"id":"ad5d68aa-6c62-4cb6-6c8d-ad2a6ac38142","action":"service.create","name":"aws23457","options":null,"components":[{"_action":"create","_component":"vpc","_component_id":"vpc::test-vpc","_provider":"aws-fake","_state":"completed","auto_remove":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_region":"fake","datacenter_type":"aws-fake","name":"test-vpc","service":"b1f584a1-e43c-484a-7222-4c14434e2fe6","subnet":"1.1.1.1/24","tags":{"Name":"test-vpc","ernest.service":"aws23457"},"vpc_aws_id":"fakeaws"},{"_action":"create","_component":"internet_gateway","_component_id":"internet_gateway::test-vpc","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway_aws_id":"foo","name":"test-vpc","service":"b1f584a1-e43c-484a-7222-4c14434e2fe6","tags":{"Name":"test-vpc","ernest.service":"aws23457"},"vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"firewall","_component_id":"firewall::web-sg-1","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","name":"web-sg-1","rules":{"egress":[{"from_port":80,"ip":"10.1.1.11/32","protocol":"-1","to_port":80}],"ingress":[{"from_port":80,"ip":"10.1.1.11/32","protocol":"-1","to_port":80}]},"security_group_aws_id":"foo","service":"b1f584a1-e43c-484a-7222-4c14434e2fe6","tags":{"Name":"web-sg-1","ernest.service":"aws23457"},"vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"network","_component_id":"network::web","_provider":"aws-fake","_state":"completed","availability_zone":"","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway":"test-vpc","internet_gateway_aws_id":"foo","is_public":true,"name":"web","network_aws_id":"foo","range":"10.1.0.0/24","service":"b1f584a1-e43c-484a-7222-4c14434e2fe6","tags":{"Name":"web","ernest.service":"aws23457"},"vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"instance","_component_id":"instance::web-1","_provider":"aws-fake","_state":"completed","assign_elastic_ip":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","elastic_ip":"","iam_instance_profile":null,"iam_instance_profile_arn":null,"image":"ami-6666f915","instance_aws_id":"","instance_type":"e1.micro","ip":"10.1.0.11","key_pair":"some-keypair","name":"web-1","network_aws_id":"foo","network_is_public":false,"network_name":"web","public_ip":"","security_group_aws_ids":null,"security_groups":null,"service":"b1f584a1-e43c-484a-7222-4c14434e2fe6","tags":{"Name":"web-1","ernest.instance_group":"web","ernest.service":"aws23457"},"user_data":"","volumes":null},{"_action":"none","_component":"credentials","_component_id":"credentials::aws","_provider":"aws-fake","_state":"waiting","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","name":"fakeaws","region":"fake"}],"changes":[{"_action":"delete","_component":"network","_component_id":"network::bknd","_provider":"aws-fake","_state":"completed","availability_zone":"","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway":"test-vpc","internet_gateway_aws_id":"","is_public":false,"name":"bknd","network_aws_id":"foo","range":"10.2.0.0/24","service":"ad5d68aa-6c62-4cb6-6c8d-ad2a6ac38142","tags":{"Name":"bknd","ernest.service":"aws23457"},"type":"network.delete.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"}],"edges":[{"destination":"network::bknd","length":1,"source":"start"},{"destination":"end","length":1,"source":"network::bknd"}]}', false, '', 0, '0001-01-01 00:00:00+00', '2017-07-21 18:56:06.898365+00', NULL);
INSERT INTO services (id, uuid, group_id, user_id, datacenter_id, name, type, version, status, last_known_error, options, definition, mapping, sync, sync_type, sync_interval, created_at, updated_at, deleted_at) VALUES (34, 'b7be6504-e530-4c2b-7a7a-f77fcaae09a0', 3, 3, 1, 'aws5521673', 'aws-fake', '2017-07-21 18:56:12.993124+00', 'done', '', '', 'name: aws5521673
datacenter: fakeaws
vpcs:
- name: test-vpc
  subnet: 1.1.1.1/24
networks:
- name: web
  vpc: test-vpc
  public: true
  subnet: 10.1.0.0/24
instances:
- name: web
  type: e1.micro
  image: ami-6666f915
  network: web
  start_ip: 10.1.0.11
  count: 1
  key_pair: some-keypair
security_groups:
- name: web-sg-1
  vpc: test-vpc
  egress:
  - from_port: "80"
    ip: 10.1.1.11/32
    protocol: any
    to_port: "80"
  - from_port: "22"
    ip: 10.1.1.11/32
    protocol: any
    to_port: "22"
  ingress:
  - from_port: "80"
    ip: 10.1.1.11/32
    protocol: any
    to_port: "80"
  - from_port: "22"
    ip: 10.1.1.11/32
    protocol: any
    to_port: "22"
', '{"id":"b7be6504-e530-4c2b-7a7a-f77fcaae09a0","action":"service.create","name":"aws5521673","options":null,"components":[{"_action":"none","_component":"credentials","_component_id":"credentials::aws","_provider":"aws-fake","_state":"waiting","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","name":"fakeaws","region":"fake"},{"_action":"create","_component":"vpc","_component_id":"vpc::test-vpc","_provider":"aws-fake","_state":"completed","auto_remove":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_region":"fake","datacenter_type":"aws-fake","name":"test-vpc","service":"b7be6504-e530-4c2b-7a7a-f77fcaae09a0","subnet":"1.1.1.1/24","tags":{"Name":"test-vpc","ernest.service":"aws5521673"},"type":"vpc.create.aws-fake.done","vpc_aws_id":"fakeaws"},{"_action":"create","_component":"internet_gateway","_component_id":"internet_gateway::test-vpc","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway_aws_id":"foo","name":"test-vpc","service":"b7be6504-e530-4c2b-7a7a-f77fcaae09a0","tags":{"Name":"test-vpc","ernest.service":"aws5521673"},"type":"internet_gateway.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"firewall","_component_id":"firewall::web-sg-1","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","name":"web-sg-1","rules":{"egress":[{"from_port":80,"ip":"10.1.1.11/32","protocol":"-1","to_port":80},{"from_port":22,"ip":"10.1.1.11/32","protocol":"-1","to_port":22}],"ingress":[{"from_port":80,"ip":"10.1.1.11/32","protocol":"-1","to_port":80},{"from_port":22,"ip":"10.1.1.11/32","protocol":"-1","to_port":22}]},"security_group_aws_id":"foo","service":"b7be6504-e530-4c2b-7a7a-f77fcaae09a0","tags":{"Name":"web-sg-1","ernest.service":"aws5521673"},"type":"firewall.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"network","_component_id":"network::web","_provider":"aws-fake","_state":"completed","availability_zone":"","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway":"test-vpc","internet_gateway_aws_id":"foo","is_public":true,"name":"web","network_aws_id":"foo","range":"10.1.0.0/24","service":"b7be6504-e530-4c2b-7a7a-f77fcaae09a0","tags":{"Name":"web","ernest.service":"aws5521673"},"type":"network.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"instance","_component_id":"instance::web-1","_provider":"aws-fake","_state":"completed","assign_elastic_ip":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","elastic_ip":"","iam_instance_profile":null,"iam_instance_profile_arn":null,"image":"ami-6666f915","instance_aws_id":"","instance_type":"e1.micro","ip":"10.1.0.11","key_pair":"some-keypair","name":"web-1","network_aws_id":"foo","network_is_public":false,"network_name":"web","public_ip":"","security_group_aws_ids":null,"security_groups":null,"service":"b7be6504-e530-4c2b-7a7a-f77fcaae09a0","tags":{"Name":"web-1","ernest.instance_group":"web","ernest.service":"aws5521673"},"type":"instance.create.aws-fake.done","user_data":"","volumes":null}],"changes":[{"_action":"create","_component":"vpc","_component_id":"vpc::test-vpc","_provider":"aws-fake","_state":"completed","auto_remove":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_region":"fake","datacenter_type":"aws-fake","name":"test-vpc","service":"b7be6504-e530-4c2b-7a7a-f77fcaae09a0","subnet":"1.1.1.1/24","tags":{"Name":"test-vpc","ernest.service":"aws5521673"},"type":"vpc.create.aws-fake.done","vpc_aws_id":"fakeaws"},{"_action":"create","_component":"internet_gateway","_component_id":"internet_gateway::test-vpc","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway_aws_id":"foo","name":"test-vpc","service":"b7be6504-e530-4c2b-7a7a-f77fcaae09a0","tags":{"Name":"test-vpc","ernest.service":"aws5521673"},"type":"internet_gateway.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"network","_component_id":"network::web","_provider":"aws-fake","_state":"completed","availability_zone":"","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway":"test-vpc","internet_gateway_aws_id":"foo","is_public":true,"name":"web","network_aws_id":"foo","range":"10.1.0.0/24","service":"b7be6504-e530-4c2b-7a7a-f77fcaae09a0","tags":{"Name":"web","ernest.service":"aws5521673"},"type":"network.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"instance","_component_id":"instance::web-1","_provider":"aws-fake","_state":"completed","assign_elastic_ip":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","elastic_ip":"","iam_instance_profile":null,"iam_instance_profile_arn":null,"image":"ami-6666f915","instance_aws_id":"","instance_type":"e1.micro","ip":"10.1.0.11","key_pair":"some-keypair","name":"web-1","network_aws_id":"foo","network_is_public":false,"network_name":"web","public_ip":"","security_group_aws_ids":null,"security_groups":null,"service":"b7be6504-e530-4c2b-7a7a-f77fcaae09a0","tags":{"Name":"web-1","ernest.instance_group":"web","ernest.service":"aws5521673"},"type":"instance.create.aws-fake.done","user_data":"","volumes":null},{"_action":"create","_component":"firewall","_component_id":"firewall::web-sg-1","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","name":"web-sg-1","rules":{"egress":[{"from_port":80,"ip":"10.1.1.11/32","protocol":"-1","to_port":80},{"from_port":22,"ip":"10.1.1.11/32","protocol":"-1","to_port":22}],"ingress":[{"from_port":80,"ip":"10.1.1.11/32","protocol":"-1","to_port":80},{"from_port":22,"ip":"10.1.1.11/32","protocol":"-1","to_port":22}]},"security_group_aws_id":"foo","service":"b7be6504-e530-4c2b-7a7a-f77fcaae09a0","tags":{"Name":"web-sg-1","ernest.service":"aws5521673"},"type":"firewall.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"}],"edges":[{"destination":"internet_gateway::test-vpc","length":1,"source":"vpc::test-vpc"},{"destination":"network::web","length":1,"source":"internet_gateway::test-vpc"},{"destination":"instance::web-1","length":1,"source":"network::web"},{"destination":"firewall::web-sg-1","length":1,"source":"vpc::test-vpc"},{"destination":"vpc::test-vpc","length":1,"source":"start"},{"destination":"end","length":1,"source":"instance::web-1"},{"destination":"end","length":1,"source":"firewall::web-sg-1"}]}', false, '', 0, '0001-01-01 00:00:00+00', '2017-07-21 18:56:13.062309+00', NULL);
INSERT INTO services (id, uuid, group_id, user_id, datacenter_id, name, type, version, status, last_known_error, options, definition, mapping, sync, sync_type, sync_interval, created_at, updated_at, deleted_at) VALUES (35, 'ab612e6a-0094-44ac-5530-3ab23a456736', 3, 3, 1, 'aws5521673', 'aws-fake', '2017-07-21 18:56:14.089008+00', 'done', '', '', 'name: aws5521673
datacenter: fakeaws
vpcs:
- name: test-vpc
  subnet: 1.1.1.1/24
networks:
- name: web
  vpc: test-vpc
  public: true
  subnet: 10.1.0.0/24
instances:
- name: web
  type: e1.micro
  image: ami-6666f915
  network: web
  start_ip: 10.1.0.11
  count: 1
  key_pair: some-keypair
security_groups:
- name: web-sg-1
  vpc: test-vpc
  egress:
  - from_port: "80"
    ip: 10.1.1.11/32
    protocol: any
    to_port: "80"
  ingress:
  - from_port: "80"
    ip: 10.1.1.11/32
    protocol: any
    to_port: "80"
', '{"id":"ab612e6a-0094-44ac-5530-3ab23a456736","action":"service.create","name":"aws5521673","options":null,"components":[{"_action":"create","_component":"vpc","_component_id":"vpc::test-vpc","_provider":"aws-fake","_state":"completed","auto_remove":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_region":"fake","datacenter_type":"aws-fake","name":"test-vpc","service":"b7be6504-e530-4c2b-7a7a-f77fcaae09a0","subnet":"1.1.1.1/24","tags":{"Name":"test-vpc","ernest.service":"aws5521673"},"vpc_aws_id":"fakeaws"},{"_action":"create","_component":"internet_gateway","_component_id":"internet_gateway::test-vpc","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway_aws_id":"foo","name":"test-vpc","service":"b7be6504-e530-4c2b-7a7a-f77fcaae09a0","tags":{"Name":"test-vpc","ernest.service":"aws5521673"},"vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"update","_component":"firewall","_component_id":"firewall::web-sg-1","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","name":"web-sg-1","rules":{"egress":[{"from_port":80,"ip":"10.1.1.11/32","protocol":"-1","to_port":80}],"ingress":[{"from_port":80,"ip":"10.1.1.11/32","protocol":"-1","to_port":80}]},"security_group_aws_id":"foo","service":"ab612e6a-0094-44ac-5530-3ab23a456736","tags":{"Name":"web-sg-1","ernest.service":"aws5521673"},"type":"firewall.update.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"network","_component_id":"network::web","_provider":"aws-fake","_state":"completed","availability_zone":"","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway":"test-vpc","internet_gateway_aws_id":"foo","is_public":true,"name":"web","network_aws_id":"foo","range":"10.1.0.0/24","service":"b7be6504-e530-4c2b-7a7a-f77fcaae09a0","tags":{"Name":"web","ernest.service":"aws5521673"},"vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"instance","_component_id":"instance::web-1","_provider":"aws-fake","_state":"completed","assign_elastic_ip":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","elastic_ip":"","iam_instance_profile":null,"iam_instance_profile_arn":null,"image":"ami-6666f915","instance_aws_id":"","instance_type":"e1.micro","ip":"10.1.0.11","key_pair":"some-keypair","name":"web-1","network_aws_id":"foo","network_is_public":false,"network_name":"web","public_ip":"","security_group_aws_ids":null,"security_groups":null,"service":"b7be6504-e530-4c2b-7a7a-f77fcaae09a0","tags":{"Name":"web-1","ernest.instance_group":"web","ernest.service":"aws5521673"},"user_data":"","volumes":null},{"_action":"none","_component":"credentials","_component_id":"credentials::aws","_provider":"aws-fake","_state":"waiting","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","name":"fakeaws","region":"fake"}],"changes":[{"_action":"update","_component":"firewall","_component_id":"firewall::web-sg-1","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","name":"web-sg-1","rules":{"egress":[{"from_port":80,"ip":"10.1.1.11/32","protocol":"-1","to_port":80}],"ingress":[{"from_port":80,"ip":"10.1.1.11/32","protocol":"-1","to_port":80}]},"security_group_aws_id":"foo","service":"ab612e6a-0094-44ac-5530-3ab23a456736","tags":{"Name":"web-sg-1","ernest.service":"aws5521673"},"type":"firewall.update.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"}],"edges":[{"destination":"firewall::web-sg-1","length":1,"source":"start"},{"destination":"end","length":1,"source":"firewall::web-sg-1"}]}', false, '', 0, '0001-01-01 00:00:00+00', '2017-07-21 18:56:14.110769+00', NULL);
INSERT INTO services (id, uuid, group_id, user_id, datacenter_id, name, type, version, status, last_known_error, options, definition, mapping, sync, sync_type, sync_interval, created_at, updated_at, deleted_at) VALUES (36, 'd8bd4ffc-b4ab-4351-722c-2fab54bb6ab2', 3, 3, 1, 'aws1441251', 'aws-fake', '2017-07-21 18:56:20.212143+00', 'done', '', '', 'name: aws1441251
datacenter: fakeaws
vpcs:
- name: test-vpc
  subnet: 1.1.1.1/24
nat_gateways:
- name: db-nat
  public_network: web
networks:
- name: web
  vpc: test-vpc
  subnet: 10.1.0.0/24
  public: true
- name: db
  vpc: test-vpc
  subnet: 10.2.0.0/24
  public: false
  nat_gateway: db-nat
instances:
- name: web
  type: e1.micro
  image: ami-6666f915
  network: web
  start_ip: 10.1.0.11
  count: 1
  key_pair: some-keypair
security_groups:
- name: web-sg-1
  vpc: test-vpc
  egress:
  - from_port: "80"
    ip: 10.1.1.11/32
    protocol: any
    to_port: "80"
  ingress:
  - from_port: "80"
    ip: 10.1.1.11/32
    protocol: any
    to_port: "80"
loadbalancers:
- name: elb-1
  private: true
  instances:
  - web
  listeners:
  - from_port: 80
    to_port: 80
    protocol: http
  security_groups:
  - web-sg-1
s3_buckets:
- name: bucket-1
  bucket_location: eu-west-1
  grantees:
  - id: foo@r3labs.io
    type: emailaddress
    permissions: full_control
', '{"id":"d8bd4ffc-b4ab-4351-722c-2fab54bb6ab2","action":"service.create","name":"aws1441251","options":null,"components":[{"_action":"none","_component":"credentials","_component_id":"credentials::aws","_provider":"aws-fake","_state":"waiting","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","name":"fakeaws","region":"fake"},{"_action":"create","_component":"vpc","_component_id":"vpc::test-vpc","_provider":"aws-fake","_state":"completed","auto_remove":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_region":"fake","datacenter_type":"aws-fake","name":"test-vpc","service":"d8bd4ffc-b4ab-4351-722c-2fab54bb6ab2","subnet":"1.1.1.1/24","tags":{"Name":"test-vpc","ernest.service":"aws1441251"},"type":"vpc.create.aws-fake.done","vpc_aws_id":"fakeaws"},{"_action":"create","_component":"s3","_component_id":"s3::bucket-1","_provider":"aws-fake","_state":"completed","acl":"","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","bucket_location":"eu-west-1","bucket_uri":"","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","grantees":[{"id":"foo@r3labs.io","permissions":"FULL_CONTROL","type":"emailaddress"}],"name":"bucket-1","service":"d8bd4ffc-b4ab-4351-722c-2fab54bb6ab2","tags":{"ernest.service":"aws1441251"},"type":"s3.create.aws-fake.done"},{"_action":"create","_component":"internet_gateway","_component_id":"internet_gateway::test-vpc","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway_aws_id":"foo","name":"test-vpc","service":"d8bd4ffc-b4ab-4351-722c-2fab54bb6ab2","tags":{"Name":"test-vpc","ernest.service":"aws1441251"},"type":"internet_gateway.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"network","_component_id":"network::db","_provider":"aws-fake","_state":"completed","availability_zone":"","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway":"test-vpc","internet_gateway_aws_id":"","is_public":false,"name":"db","network_aws_id":"foo","range":"10.2.0.0/24","service":"d8bd4ffc-b4ab-4351-722c-2fab54bb6ab2","tags":{"Name":"db","ernest.nat_gateway":"db-nat","ernest.service":"aws1441251"},"type":"network.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"firewall","_component_id":"firewall::web-sg-1","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","name":"web-sg-1","rules":{"egress":[{"from_port":80,"ip":"10.1.1.11/32","protocol":"-1","to_port":80}],"ingress":[{"from_port":80,"ip":"10.1.1.11/32","protocol":"-1","to_port":80}]},"security_group_aws_id":"foo","service":"d8bd4ffc-b4ab-4351-722c-2fab54bb6ab2","tags":{"Name":"web-sg-1","ernest.service":"aws1441251"},"type":"firewall.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"network","_component_id":"network::web","_provider":"aws-fake","_state":"completed","availability_zone":"","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway":"test-vpc","internet_gateway_aws_id":"foo","is_public":true,"name":"web","network_aws_id":"foo","range":"10.1.0.0/24","service":"d8bd4ffc-b4ab-4351-722c-2fab54bb6ab2","tags":{"Name":"web","ernest.service":"aws1441251"},"type":"network.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"instance","_component_id":"instance::web-1","_provider":"aws-fake","_state":"completed","assign_elastic_ip":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","elastic_ip":"","iam_instance_profile":null,"iam_instance_profile_arn":null,"image":"ami-6666f915","instance_aws_id":"","instance_type":"e1.micro","ip":"10.1.0.11","key_pair":"some-keypair","name":"web-1","network_aws_id":"foo","network_is_public":false,"network_name":"web","public_ip":"","security_group_aws_ids":null,"security_groups":null,"service":"d8bd4ffc-b4ab-4351-722c-2fab54bb6ab2","tags":{"Name":"web-1","ernest.instance_group":"web","ernest.service":"aws1441251"},"type":"instance.create.aws-fake.done","user_data":"","volumes":null},{"_action":"create","_component":"nat","_component_id":"nat::db-nat","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway_id":"","name":"db-nat","nat_gateway_allocation_id":"","nat_gateway_allocation_ip":"","nat_gateway_aws_id":"","public_network":"web","public_network_aws_id":"foo","routed_networks":["db"],"routed_networks_aws_ids":["foo"],"service":"d8bd4ffc-b4ab-4351-722c-2fab54bb6ab2","tags":null,"type":"nat.create.aws-fake.done","vpc_id":"fakeaws"},{"_action":"create","_component":"elb","_component_id":"elb::elb-1","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","dns_name":"fake-dns-name","instance_aws_ids":["$(components.#[_component_id=\"instance::web-1\"].instance_aws_id)"],"instance_names":["web-1"],"instances":["web"],"is_private":true,"listeners":[{"from_port":80,"protocol":"HTTP","ssl_cert":"","to_port":80}],"name":"elb-1","network_aws_ids":null,"networks":null,"security_group_aws_ids":["foo"],"security_groups":["web-sg-1"],"service":"d8bd4ffc-b4ab-4351-722c-2fab54bb6ab2","tags":{"ernest.service":"aws1441251"},"type":"elb.create.aws-fake.done"}],"changes":[{"_action":"create","_component":"vpc","_component_id":"vpc::test-vpc","_provider":"aws-fake","_state":"completed","auto_remove":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_region":"fake","datacenter_type":"aws-fake","name":"test-vpc","service":"d8bd4ffc-b4ab-4351-722c-2fab54bb6ab2","subnet":"1.1.1.1/24","tags":{"Name":"test-vpc","ernest.service":"aws1441251"},"type":"vpc.create.aws-fake.done","vpc_aws_id":"fakeaws"},{"_action":"create","_component":"internet_gateway","_component_id":"internet_gateway::test-vpc","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway_aws_id":"foo","name":"test-vpc","service":"d8bd4ffc-b4ab-4351-722c-2fab54bb6ab2","tags":{"Name":"test-vpc","ernest.service":"aws1441251"},"type":"internet_gateway.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"network","_component_id":"network::web","_provider":"aws-fake","_state":"completed","availability_zone":"","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway":"test-vpc","internet_gateway_aws_id":"foo","is_public":true,"name":"web","network_aws_id":"foo","range":"10.1.0.0/24","service":"d8bd4ffc-b4ab-4351-722c-2fab54bb6ab2","tags":{"Name":"web","ernest.service":"aws1441251"},"type":"network.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"network","_component_id":"network::db","_provider":"aws-fake","_state":"completed","availability_zone":"","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway":"test-vpc","internet_gateway_aws_id":"","is_public":false,"name":"db","network_aws_id":"foo","range":"10.2.0.0/24","service":"d8bd4ffc-b4ab-4351-722c-2fab54bb6ab2","tags":{"Name":"db","ernest.nat_gateway":"db-nat","ernest.service":"aws1441251"},"type":"network.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"instance","_component_id":"instance::web-1","_provider":"aws-fake","_state":"completed","assign_elastic_ip":false,"aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","elastic_ip":"","iam_instance_profile":null,"iam_instance_profile_arn":null,"image":"ami-6666f915","instance_aws_id":"","instance_type":"e1.micro","ip":"10.1.0.11","key_pair":"some-keypair","name":"web-1","network_aws_id":"foo","network_is_public":false,"network_name":"web","public_ip":"","security_group_aws_ids":null,"security_groups":null,"service":"d8bd4ffc-b4ab-4351-722c-2fab54bb6ab2","tags":{"Name":"web-1","ernest.instance_group":"web","ernest.service":"aws1441251"},"type":"instance.create.aws-fake.done","user_data":"","volumes":null},{"_action":"create","_component":"firewall","_component_id":"firewall::web-sg-1","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","name":"web-sg-1","rules":{"egress":[{"from_port":80,"ip":"10.1.1.11/32","protocol":"-1","to_port":80}],"ingress":[{"from_port":80,"ip":"10.1.1.11/32","protocol":"-1","to_port":80}]},"security_group_aws_id":"foo","service":"d8bd4ffc-b4ab-4351-722c-2fab54bb6ab2","tags":{"Name":"web-sg-1","ernest.service":"aws1441251"},"type":"firewall.create.aws-fake.done","vpc":"test-vpc","vpc_id":"fakeaws"},{"_action":"create","_component":"elb","_component_id":"elb::elb-1","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","dns_name":"fake-dns-name","instance_aws_ids":["$(components.#[_component_id=\"instance::web-1\"].instance_aws_id)"],"instance_names":["web-1"],"instances":["web"],"is_private":true,"listeners":[{"from_port":80,"protocol":"HTTP","ssl_cert":"","to_port":80}],"name":"elb-1","network_aws_ids":null,"networks":null,"security_group_aws_ids":["foo"],"security_groups":["web-sg-1"],"service":"d8bd4ffc-b4ab-4351-722c-2fab54bb6ab2","tags":{"ernest.service":"aws1441251"},"type":"elb.create.aws-fake.done"},{"_action":"create","_component":"nat","_component_id":"nat::db-nat","_provider":"aws-fake","_state":"completed","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","internet_gateway_id":"","name":"db-nat","nat_gateway_allocation_id":"","nat_gateway_allocation_ip":"","nat_gateway_aws_id":"","public_network":"web","public_network_aws_id":"foo","routed_networks":["db"],"routed_networks_aws_ids":["foo"],"service":"d8bd4ffc-b4ab-4351-722c-2fab54bb6ab2","tags":null,"type":"nat.create.aws-fake.done","vpc_id":"fakeaws"},{"_action":"create","_component":"s3","_component_id":"s3::bucket-1","_provider":"aws-fake","_state":"completed","acl":"","aws_access_key_id":"D/PjIq85HoQOExiA4Sic4d2Bv+ljdAc0AV64gKTqW0oJwZVu5F9EXtobda6onqBqt00=","aws_secret_access_key":"UPfBbUBps1RLVxCjHa8YeJG1pgDE7H9DtbW07dLDCCUmo3XIrvyanBLk1v89W1r7","bucket_location":"eu-west-1","bucket_uri":"","datacenter_name":"fakeaws","datacenter_region":"fake","datacenter_type":"aws-fake","grantees":[{"id":"foo@r3labs.io","permissions":"FULL_CONTROL","type":"emailaddress"}],"name":"bucket-1","service":"d8bd4ffc-b4ab-4351-722c-2fab54bb6ab2","tags":{"ernest.service":"aws1441251"},"type":"s3.create.aws-fake.done"}],"edges":[{"destination":"internet_gateway::test-vpc","length":1,"source":"vpc::test-vpc"},{"destination":"network::web","length":1,"source":"internet_gateway::test-vpc"},{"destination":"network::db","length":1,"source":"vpc::test-vpc"},{"destination":"instance::web-1","length":1,"source":"network::web"},{"destination":"firewall::web-sg-1","length":1,"source":"vpc::test-vpc"},{"destination":"elb::elb-1","length":1,"source":"firewall::web-sg-1"},{"destination":"elb::elb-1","length":1,"source":"instance::web-1"},{"destination":"nat::db-nat","length":1,"source":"network::db"},{"destination":"nat::db-nat","length":1,"source":"network::web"},{"destination":"vpc::test-vpc","length":1,"source":"start"},{"destination":"end","length":1,"source":"elb::elb-1"},{"destination":"end","length":1,"source":"nat::db-nat"},{"destination":"s3::bucket-1","length":1,"source":"start"},{"destination":"end","length":1,"source":"s3::bucket-1"}]}', false, '', 0, '0001-01-01 00:00:00+00', '2017-07-21 18:56:20.350716+00', NULL);


--
-- Name: services_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('services_id_seq', 41, true);


--
-- Name: services services_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY services
    ADD CONSTRAINT services_pkey PRIMARY KEY (id);


--
-- Name: idx_services_deleted_at; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_services_deleted_at ON services USING btree (deleted_at);


--
-- Name: public; Type: ACL; Schema: -; Owner: postgres
--

REVOKE ALL ON SCHEMA public FROM PUBLIC;
REVOKE ALL ON SCHEMA public FROM postgres;
GRANT ALL ON SCHEMA public TO postgres;
GRANT ALL ON SCHEMA public TO PUBLIC;


--
-- PostgreSQL database dump complete
--

